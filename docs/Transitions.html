<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Transitions</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-- MIT License</a>

<a id="17" class="Comment">-- Copyright (c) 2021 Luca Ciccone and Luca Padovani</a>

<a id="71" class="Comment">-- Permission is hereby granted, free of charge, to any person</a>
<a id="134" class="Comment">-- obtaining a copy of this software and associated documentation</a>
<a id="200" class="Comment">-- files (the &quot;Software&quot;), to deal in the Software without</a>
<a id="259" class="Comment">-- restriction, including without limitation the rights to use,</a>
<a id="323" class="Comment">-- copy, modify, merge, publish, distribute, sublicense, and/or sell</a>
<a id="392" class="Comment">-- copies of the Software, and to permit persons to whom the</a>
<a id="453" class="Comment">-- Software is furnished to do so, subject to the following</a>
<a id="513" class="Comment">-- conditions:</a>

<a id="529" class="Comment">-- The above copyright notice and this permission notice shall be</a>
<a id="595" class="Comment">-- included in all copies or substantial portions of the Software.</a>

<a id="663" class="Comment">-- THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</a>
<a id="730" class="Comment">-- EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES</a>
<a id="797" class="Comment">-- OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</a>
<a id="857" class="Comment">-- NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</a>
<a id="920" class="Comment">-- HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</a>
<a id="984" class="Comment">-- WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</a>
<a id="1048" class="Comment">-- FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</a>
<a id="1113" class="Comment">-- OTHER DEALINGS IN THE SOFTWARE.</a>

<a id="1149" class="Symbol">{-#</a> <a id="1153" class="Keyword">OPTIONS</a> <a id="1161" class="Pragma">--guardedness</a> <a id="1175" class="Symbol">#-}</a>

<a id="1180" class="Keyword">open</a> <a id="1185" class="Keyword">import</a> <a id="1192" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="1203" class="Keyword">open</a> <a id="1208" class="Keyword">import</a> <a id="1215" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1228" class="Keyword">open</a> <a id="1233" class="Keyword">import</a> <a id="1240" href="Data.List.html" class="Module">Data.List</a> <a id="1250" class="Keyword">using</a> <a id="1256" class="Symbol">(</a><a id="1257" href="Data.List.Base.html#10383" class="InductiveConstructor">[]</a><a id="1259" class="Symbol">;</a> <a id="1261" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="1264" class="Symbol">;</a> <a id="1266" href="Data.List.Base.html#10043" class="Function Operator">_∷ʳ_</a><a id="1270" class="Symbol">)</a>

<a id="1273" class="Keyword">open</a> <a id="1278" class="Keyword">import</a> <a id="1285" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="1300" class="Keyword">using</a> <a id="1306" class="Symbol">(</a><a id="1307" href="Relation.Unary.html#1523" class="Function Operator">_∈_</a><a id="1310" class="Symbol">)</a>
<a id="1312" class="Keyword">open</a> <a id="1317" class="Keyword">import</a> <a id="1324" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1362" class="Keyword">using</a> <a id="1368" class="Symbol">(</a><a id="1369" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="1372" class="Symbol">;</a> <a id="1374" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1378" class="Symbol">)</a>
<a id="1380" class="Keyword">import</a> <a id="1387" href="Relation.Binary.HeterogeneousEquality.html" class="Module">Relation.Binary.HeterogeneousEquality</a> <a id="1425" class="Symbol">as</a> <a id="1428" class="Module">Het</a>

<a id="1433" class="Keyword">open</a> <a id="1438" class="Keyword">import</a> <a id="1445" href="Common.html" class="Module">Common</a>

<a id="1453" class="Keyword">module</a> <a id="1460" href="Transitions.html" class="Module">Transitions</a> <a id="1472" class="Symbol">{</a><a id="1473" href="Transitions.html#1473" class="Bound">ℙ</a> <a id="1475" class="Symbol">:</a> <a id="1477" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1480" class="Symbol">}</a> <a id="1482" class="Symbol">(</a><a id="1483" href="Transitions.html#1483" class="Bound">message</a> <a id="1491" class="Symbol">:</a> <a id="1493" href="Common.html#1500" class="Record">Message</a> <a id="1501" href="Transitions.html#1473" class="Bound">ℙ</a><a id="1502" class="Symbol">)</a>
  <a id="1506" class="Keyword">where</a>

<a id="1513" class="Keyword">open</a> <a id="1518" class="Keyword">import</a> <a id="1525" href="SessionType.html" class="Module">SessionType</a> <a id="1537" href="Transitions.html#1483" class="Bound">message</a>
<a id="1545" class="Keyword">open</a> <a id="1550" class="Keyword">import</a> <a id="1557" href="Trace.html" class="Module">Trace</a> <a id="1563" href="Transitions.html#1483" class="Bound">message</a>

<a id="1572" class="Keyword">data</a> <a id="Transition"></a><a id="1577" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="1588" class="Symbol">:</a> <a id="1590" href="SessionType.html#1658" class="Datatype">SessionType</a> <a id="1602" class="Symbol">-&gt;</a> <a id="1605" href="Action.html#1349" class="Datatype">Action</a> <a id="1612" class="Symbol">-&gt;</a> <a id="1615" href="SessionType.html#1658" class="Datatype">SessionType</a> <a id="1627" class="Symbol">-&gt;</a> <a id="1630" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1634" class="Keyword">where</a>
  <a id="Transition.inp"></a><a id="1642" href="Transitions.html#1642" class="InductiveConstructor">inp</a> <a id="1646" class="Symbol">:</a> <a id="1648" class="Symbol">∀{</a><a id="1650" href="Transitions.html#1650" class="Bound">f</a> <a id="1652" href="Transitions.html#1652" class="Bound">x</a><a id="1653" class="Symbol">}</a>                 <a id="1671" class="Symbol">-&gt;</a> <a id="1674" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="1685" class="Symbol">(</a><a id="1686" href="SessionType.html#1893" class="InductiveConstructor">inp</a> <a id="1690" href="Transitions.html#1650" class="Bound">f</a><a id="1691" class="Symbol">)</a> <a id="1693" class="Symbol">(</a><a id="1694" href="Action.html#1370" class="InductiveConstructor">I</a> <a id="1696" href="Transitions.html#1652" class="Bound">x</a><a id="1697" class="Symbol">)</a> <a id="1699" class="Symbol">(</a><a id="1700" href="Transitions.html#1650" class="Bound">f</a> <a id="1702" href="Transitions.html#1652" class="Bound">x</a> <a id="1704" class="Symbol">.</a><a id="1705" href="SessionType.html#1749" class="Field">force</a><a id="1710" class="Symbol">)</a>
  <a id="Transition.out"></a><a id="1714" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="1718" class="Symbol">:</a> <a id="1720" class="Symbol">∀{</a><a id="1722" href="Transitions.html#1722" class="Bound">f</a> <a id="1724" href="Transitions.html#1724" class="Bound">x</a><a id="1725" class="Symbol">}</a> <a id="1727" class="Symbol">(</a><a id="1728" href="Transitions.html#1728" class="Bound">!x</a> <a id="1731" class="Symbol">:</a> <a id="1733" href="Transitions.html#1724" class="Bound">x</a> <a id="1735" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="1737" href="SessionType.html#2337" class="Function">dom</a> <a id="1741" href="Transitions.html#1722" class="Bound">f</a><a id="1742" class="Symbol">)</a> <a id="1744" class="Symbol">-&gt;</a> <a id="1747" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="1758" class="Symbol">(</a><a id="1759" href="SessionType.html#1935" class="InductiveConstructor">out</a> <a id="1763" href="Transitions.html#1722" class="Bound">f</a><a id="1764" class="Symbol">)</a> <a id="1766" class="Symbol">(</a><a id="1767" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="1769" href="Transitions.html#1724" class="Bound">x</a><a id="1770" class="Symbol">)</a> <a id="1772" class="Symbol">(</a><a id="1773" href="Transitions.html#1722" class="Bound">f</a> <a id="1775" href="Transitions.html#1724" class="Bound">x</a> <a id="1777" class="Symbol">.</a><a id="1778" href="SessionType.html#1749" class="Field">force</a><a id="1783" class="Symbol">)</a>

<a id="1786" class="Keyword">data</a> <a id="Transitions"></a><a id="1791" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="1803" class="Symbol">:</a> <a id="1805" href="SessionType.html#1658" class="Datatype">SessionType</a> <a id="1817" class="Symbol">-&gt;</a> <a id="1820" href="Trace.html#1565" class="Function">Trace</a> <a id="1826" class="Symbol">-&gt;</a> <a id="1829" href="SessionType.html#1658" class="Datatype">SessionType</a> <a id="1841" class="Symbol">-&gt;</a> <a id="1844" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1848" class="Keyword">where</a>
  <a id="Transitions.refl"></a><a id="1856" href="Transitions.html#1856" class="InductiveConstructor">refl</a> <a id="1861" class="Symbol">:</a> <a id="1863" class="Symbol">∀{</a><a id="1865" href="Transitions.html#1865" class="Bound">T</a><a id="1866" class="Symbol">}</a> <a id="1868" class="Symbol">-&gt;</a> <a id="1871" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="1883" href="Transitions.html#1865" class="Bound">T</a> <a id="1885" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1888" href="Transitions.html#1865" class="Bound">T</a>
  <a id="Transitions.step"></a><a id="1892" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="1897" class="Symbol">:</a> <a id="1899" class="Symbol">∀{</a><a id="1901" href="Transitions.html#1901" class="Bound">T</a> <a id="1903" href="Transitions.html#1903" class="Bound">α</a> <a id="1905" href="Transitions.html#1905" class="Bound">T&#39;</a> <a id="1908" href="Transitions.html#1908" class="Bound">φ</a> <a id="1910" href="Transitions.html#1910" class="Bound">T&#39;&#39;</a><a id="1913" class="Symbol">}</a> <a id="1915" class="Symbol">(</a><a id="1916" href="Transitions.html#1916" class="Bound">t</a> <a id="1918" class="Symbol">:</a> <a id="1920" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="1931" href="Transitions.html#1901" class="Bound">T</a> <a id="1933" href="Transitions.html#1903" class="Bound">α</a> <a id="1935" href="Transitions.html#1905" class="Bound">T&#39;</a><a id="1937" class="Symbol">)</a> <a id="1939" class="Symbol">(</a><a id="1940" href="Transitions.html#1940" class="Bound">tr</a> <a id="1943" class="Symbol">:</a> <a id="1945" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="1957" href="Transitions.html#1905" class="Bound">T&#39;</a> <a id="1960" href="Transitions.html#1908" class="Bound">φ</a> <a id="1962" href="Transitions.html#1910" class="Bound">T&#39;&#39;</a><a id="1965" class="Symbol">)</a> <a id="1967" class="Symbol">-&gt;</a> <a id="1970" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="1982" href="Transitions.html#1901" class="Bound">T</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Transitions.html#1903" class="Bound">α</a> <a id="1987" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1989" href="Transitions.html#1908" class="Bound">φ</a><a id="1990" class="Symbol">)</a> <a id="1992" href="Transitions.html#1910" class="Bound">T&#39;&#39;</a>

<a id="transition-&gt;defined"></a><a id="1997" href="Transitions.html#1997" class="Function">transition-&gt;defined</a> <a id="2017" class="Symbol">:</a> <a id="2019" class="Symbol">∀{</a><a id="2021" href="Transitions.html#2021" class="Bound">T</a> <a id="2023" href="Transitions.html#2023" class="Bound">a</a> <a id="2025" href="Transitions.html#2025" class="Bound">S</a><a id="2026" class="Symbol">}</a> <a id="2028" class="Symbol">-&gt;</a> <a id="2031" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="2042" href="Transitions.html#2021" class="Bound">T</a> <a id="2044" href="Transitions.html#2023" class="Bound">a</a> <a id="2046" href="Transitions.html#2025" class="Bound">S</a> <a id="2048" class="Symbol">-&gt;</a> <a id="2051" href="SessionType.html#1981" class="Datatype">Defined</a> <a id="2059" href="Transitions.html#2021" class="Bound">T</a>
<a id="2061" href="Transitions.html#1997" class="Function">transition-&gt;defined</a> <a id="2081" href="Transitions.html#1642" class="InductiveConstructor">inp</a>     <a id="2089" class="Symbol">=</a> <a id="2091" href="SessionType.html#2018" class="InductiveConstructor">inp</a>
<a id="2095" href="Transitions.html#1997" class="Function">transition-&gt;defined</a> <a id="2115" class="Symbol">(</a><a id="2116" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="2120" class="Symbol">_)</a> <a id="2123" class="Symbol">=</a> <a id="2125" href="SessionType.html#2050" class="InductiveConstructor">out</a>

<a id="output-transition-&gt;defined"></a><a id="2130" href="Transitions.html#2130" class="Function">output-transition-&gt;defined</a> <a id="2157" class="Symbol">:</a> <a id="2159" class="Symbol">∀{</a><a id="2161" href="Transitions.html#2161" class="Bound">T</a> <a id="2163" href="Transitions.html#2163" class="Bound">x</a> <a id="2165" href="Transitions.html#2165" class="Bound">S</a><a id="2166" class="Symbol">}</a> <a id="2168" class="Symbol">-&gt;</a> <a id="2171" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="2182" href="Transitions.html#2161" class="Bound">T</a> <a id="2184" class="Symbol">(</a><a id="2185" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="2187" href="Transitions.html#2163" class="Bound">x</a><a id="2188" class="Symbol">)</a> <a id="2190" href="Transitions.html#2165" class="Bound">S</a> <a id="2192" class="Symbol">-&gt;</a> <a id="2195" href="SessionType.html#1981" class="Datatype">Defined</a> <a id="2203" href="Transitions.html#2165" class="Bound">S</a>
<a id="2205" href="Transitions.html#2130" class="Function">output-transition-&gt;defined</a> <a id="2232" class="Symbol">(</a><a id="2233" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="2237" href="Transitions.html#2237" class="Bound">!x</a><a id="2239" class="Symbol">)</a> <a id="2241" class="Symbol">=</a> <a id="2243" href="Transitions.html#2237" class="Bound">!x</a>

<a id="output-transitions-&gt;defined"></a><a id="2247" href="Transitions.html#2247" class="Function">output-transitions-&gt;defined</a> <a id="2275" class="Symbol">:</a> <a id="2277" class="Symbol">∀{</a><a id="2279" href="Transitions.html#2279" class="Bound">T</a> <a id="2281" href="Transitions.html#2281" class="Bound">φ</a> <a id="2283" href="Transitions.html#2283" class="Bound">x</a> <a id="2285" href="Transitions.html#2285" class="Bound">S</a><a id="2286" class="Symbol">}</a> <a id="2288" class="Symbol">-&gt;</a> <a id="2291" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="2303" href="Transitions.html#2279" class="Bound">T</a> <a id="2305" class="Symbol">(</a><a id="2306" href="Transitions.html#2281" class="Bound">φ</a> <a id="2308" href="Data.List.Base.html#10043" class="Function Operator">∷ʳ</a> <a id="2311" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="2313" href="Transitions.html#2283" class="Bound">x</a><a id="2314" class="Symbol">)</a> <a id="2316" href="Transitions.html#2285" class="Bound">S</a> <a id="2318" class="Symbol">-&gt;</a> <a id="2321" href="SessionType.html#1981" class="Datatype">Defined</a> <a id="2329" href="Transitions.html#2285" class="Bound">S</a>
<a id="2331" href="Transitions.html#2247" class="Function">output-transitions-&gt;defined</a> <a id="2359" class="Symbol">{_}</a> <a id="2363" class="Symbol">{</a><a id="2364" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2366" class="Symbol">}</a> <a id="2368" class="Symbol">(</a><a id="2369" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="2374" class="Symbol">(</a><a id="2375" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="2379" href="Transitions.html#2379" class="Bound">fx</a><a id="2381" class="Symbol">)</a> <a id="2383" href="Transitions.html#1856" class="InductiveConstructor">refl</a><a id="2387" class="Symbol">)</a> <a id="2389" class="Symbol">=</a> <a id="2391" href="Transitions.html#2379" class="Bound">fx</a>
<a id="2394" href="Transitions.html#2247" class="Function">output-transitions-&gt;defined</a> <a id="2422" class="Symbol">{_}</a> <a id="2426" class="Symbol">{_</a> <a id="2429" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2431" class="Symbol">_}</a> <a id="2434" class="Symbol">(</a><a id="2435" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="2440" class="Symbol">_</a> <a id="2442" href="Transitions.html#2442" class="Bound">tr</a><a id="2444" class="Symbol">)</a> <a id="2446" class="Symbol">=</a> <a id="2448" href="Transitions.html#2247" class="Function">output-transitions-&gt;defined</a> <a id="2476" href="Transitions.html#2442" class="Bound">tr</a>

<a id="unsnoc-transitions"></a><a id="2480" href="Transitions.html#2480" class="Function">unsnoc-transitions</a> <a id="2499" class="Symbol">:</a> <a id="2501" class="Symbol">∀{</a><a id="2503" href="Transitions.html#2503" class="Bound">T</a> <a id="2505" href="Transitions.html#2505" class="Bound">φ</a> <a id="2507" href="Transitions.html#2507" class="Bound">α</a> <a id="2509" href="Transitions.html#2509" class="Bound">S</a><a id="2510" class="Symbol">}</a> <a id="2512" class="Symbol">-&gt;</a> <a id="2515" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="2527" href="Transitions.html#2503" class="Bound">T</a> <a id="2529" class="Symbol">(</a><a id="2530" href="Transitions.html#2505" class="Bound">φ</a> <a id="2532" href="Data.List.Base.html#10043" class="Function Operator">∷ʳ</a> <a id="2535" href="Transitions.html#2507" class="Bound">α</a><a id="2536" class="Symbol">)</a> <a id="2538" href="Transitions.html#2509" class="Bound">S</a> <a id="2540" class="Symbol">-&gt;</a> <a id="2543" href="Data.Product.html#1806" class="Function">∃[</a> <a id="2546" href="Transitions.html#2546" class="Bound">R</a> <a id="2548" href="Data.Product.html#1806" class="Function">]</a> <a id="2550" class="Symbol">(</a><a id="2551" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="2563" href="Transitions.html#2503" class="Bound">T</a> <a id="2565" href="Transitions.html#2505" class="Bound">φ</a> <a id="2567" href="Transitions.html#2546" class="Bound">R</a> <a id="2569" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2571" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="2582" href="Transitions.html#2546" class="Bound">R</a> <a id="2584" href="Transitions.html#2507" class="Bound">α</a> <a id="2586" href="Transitions.html#2509" class="Bound">S</a><a id="2587" class="Symbol">)</a>
<a id="2589" href="Transitions.html#2480" class="Function">unsnoc-transitions</a> <a id="2608" class="Symbol">{_}</a> <a id="2612" class="Symbol">{</a><a id="2613" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2615" class="Symbol">}</a> <a id="2617" class="Symbol">(</a><a id="2618" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="2623" href="Transitions.html#2623" class="Bound">t</a> <a id="2625" href="Transitions.html#1856" class="InductiveConstructor">refl</a><a id="2629" class="Symbol">)</a> <a id="2631" class="Symbol">=</a> <a id="2633" class="Symbol">_</a> <a id="2635" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2637" href="Transitions.html#1856" class="InductiveConstructor">refl</a> <a id="2642" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2644" href="Transitions.html#2623" class="Bound">t</a>
<a id="2646" href="Transitions.html#2480" class="Function">unsnoc-transitions</a> <a id="2665" class="Symbol">{_}</a> <a id="2669" class="Symbol">{</a><a id="2670" href="Transitions.html#2670" class="Bound">x</a> <a id="2672" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2674" href="Transitions.html#2674" class="Bound">φ</a><a id="2675" class="Symbol">}</a> <a id="2677" class="Symbol">(</a><a id="2678" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="2683" href="Transitions.html#2683" class="Bound">t</a> <a id="2685" href="Transitions.html#2685" class="Bound">tr</a><a id="2687" class="Symbol">)</a> <a id="2689" class="Keyword">with</a> <a id="2694" href="Transitions.html#2480" class="Function">unsnoc-transitions</a> <a id="2713" href="Transitions.html#2685" class="Bound">tr</a>
<a id="2716" class="Symbol">...</a> <a id="2720" class="Symbol">|</a> <a id="2722" class="Symbol">_</a> <a id="2724" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2726" href="Transitions.html#2726" class="Bound">sr</a> <a id="2729" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2731" href="Transitions.html#2731" class="Bound">s</a> <a id="2733" class="Symbol">=</a> <a id="2735" class="Symbol">_</a> <a id="2737" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2739" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="2744" class="Bound">t</a> <a id="2746" href="Transitions.html#2726" class="Bound">sr</a> <a id="2749" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2751" href="Transitions.html#2731" class="Bound">s</a>

<a id="transitions+defined-&gt;defined"></a><a id="2754" href="Transitions.html#2754" class="Function">transitions+defined-&gt;defined</a> <a id="2783" class="Symbol">:</a> <a id="2785" class="Symbol">∀{</a><a id="2787" href="Transitions.html#2787" class="Bound">T</a> <a id="2789" href="Transitions.html#2789" class="Bound">as</a> <a id="2792" href="Transitions.html#2792" class="Bound">S</a><a id="2793" class="Symbol">}</a> <a id="2795" class="Symbol">-&gt;</a> <a id="2798" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="2810" href="Transitions.html#2787" class="Bound">T</a> <a id="2812" href="Transitions.html#2789" class="Bound">as</a> <a id="2815" href="Transitions.html#2792" class="Bound">S</a> <a id="2817" class="Symbol">-&gt;</a> <a id="2820" href="SessionType.html#1981" class="Datatype">Defined</a> <a id="2828" href="Transitions.html#2792" class="Bound">S</a> <a id="2830" class="Symbol">-&gt;</a> <a id="2833" href="SessionType.html#1981" class="Datatype">Defined</a> <a id="2841" href="Transitions.html#2787" class="Bound">T</a>
<a id="2843" href="Transitions.html#2754" class="Function">transitions+defined-&gt;defined</a> <a id="2872" href="Transitions.html#1856" class="InductiveConstructor">refl</a> <a id="2877" href="Transitions.html#2877" class="Bound">def</a> <a id="2881" class="Symbol">=</a> <a id="2883" href="Transitions.html#2877" class="Bound">def</a>
<a id="2887" href="Transitions.html#2754" class="Function">transitions+defined-&gt;defined</a> <a id="2916" class="Symbol">(</a><a id="2917" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="2922" href="Transitions.html#2922" class="Bound">t</a> <a id="2924" class="Symbol">_)</a> <a id="2927" class="Symbol">_</a> <a id="2929" class="Symbol">=</a> <a id="2931" href="Transitions.html#1997" class="Function">transition-&gt;defined</a> <a id="2951" href="Transitions.html#2922" class="Bound">t</a>

<a id="transitions-eq"></a><a id="2954" href="Transitions.html#2954" class="Function">transitions-eq</a> <a id="2969" class="Symbol">:</a> <a id="2971" class="Symbol">∀{</a><a id="2973" href="Transitions.html#2973" class="Bound">T</a> <a id="2975" href="Transitions.html#2975" class="Bound">T&#39;</a> <a id="2978" href="Transitions.html#2978" class="Bound">T&#39;&#39;</a> <a id="2982" href="Transitions.html#2982" class="Bound">φ</a><a id="2983" class="Symbol">}</a> <a id="2985" class="Symbol">(</a><a id="2986" href="Transitions.html#2986" class="Bound">tr</a> <a id="2989" class="Symbol">:</a> <a id="2991" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="3003" href="Transitions.html#2973" class="Bound">T</a> <a id="3005" href="Transitions.html#2982" class="Bound">φ</a> <a id="3007" href="Transitions.html#2975" class="Bound">T&#39;</a><a id="3009" class="Symbol">)</a> <a id="3011" class="Symbol">(</a><a id="3012" href="Transitions.html#3012" class="Bound">sr</a> <a id="3015" class="Symbol">:</a> <a id="3017" href="Transitions.html#1791" class="Datatype">Transitions</a> <a id="3029" href="Transitions.html#2973" class="Bound">T</a> <a id="3031" href="Transitions.html#2982" class="Bound">φ</a> <a id="3033" href="Transitions.html#2978" class="Bound">T&#39;&#39;</a><a id="3036" class="Symbol">)</a> <a id="3038" class="Symbol">-&gt;</a>
  <a id="3043" href="Transitions.html#2975" class="Bound">T&#39;</a> <a id="3046" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3048" href="Transitions.html#2978" class="Bound">T&#39;&#39;</a> <a id="3052" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3054" href="Transitions.html#2986" class="Bound">tr</a> <a id="3057" href="Relation.Binary.HeterogeneousEquality.Core.html#681" class="Datatype Operator">Het.≅</a> <a id="3063" href="Transitions.html#3012" class="Bound">sr</a>
<a id="3066" href="Transitions.html#2954" class="Function">transitions-eq</a> <a id="3081" href="Transitions.html#1856" class="InductiveConstructor">refl</a> <a id="3086" href="Transitions.html#1856" class="InductiveConstructor">refl</a> <a id="3091" class="Symbol">=</a> <a id="3093" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3098" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3100" href="Relation.Binary.HeterogeneousEquality.Core.html#740" class="InductiveConstructor">Het.refl</a>
<a id="3109" href="Transitions.html#2954" class="Function">transitions-eq</a> <a id="3124" class="Symbol">(</a><a id="3125" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="3130" href="Transitions.html#1642" class="InductiveConstructor">inp</a> <a id="3134" href="Transitions.html#3134" class="Bound">tr</a><a id="3136" class="Symbol">)</a> <a id="3138" class="Symbol">(</a><a id="3139" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="3144" href="Transitions.html#1642" class="InductiveConstructor">inp</a> <a id="3148" href="Transitions.html#3148" class="Bound">sr</a><a id="3150" class="Symbol">)</a> <a id="3152" class="Keyword">with</a> <a id="3157" href="Transitions.html#2954" class="Function">transitions-eq</a> <a id="3172" href="Transitions.html#3134" class="Bound">tr</a> <a id="3175" href="Transitions.html#3148" class="Bound">sr</a>
<a id="3178" class="Symbol">...</a> <a id="3182" class="Symbol">|</a> <a id="3184" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3189" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3191" href="Relation.Binary.HeterogeneousEquality.Core.html#740" class="InductiveConstructor">Het.refl</a> <a id="3200" class="Symbol">=</a> <a id="3202" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3207" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3209" href="Relation.Binary.HeterogeneousEquality.Core.html#740" class="InductiveConstructor">Het.refl</a>
<a id="3218" href="Transitions.html#2954" class="Function">transitions-eq</a> <a id="3233" class="Symbol">(</a><a id="3234" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="3239" class="Symbol">(</a><a id="3240" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="3244" href="Transitions.html#3244" class="Bound">fx</a><a id="3246" class="Symbol">)</a> <a id="3248" href="Transitions.html#3248" class="Bound">tr</a><a id="3250" class="Symbol">)</a> <a id="3252" class="Symbol">(</a><a id="3253" href="Transitions.html#1892" class="InductiveConstructor">step</a> <a id="3258" class="Symbol">(</a><a id="3259" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="3263" href="Transitions.html#3263" class="Bound">gx</a><a id="3265" class="Symbol">)</a> <a id="3267" href="Transitions.html#3267" class="Bound">sr</a><a id="3269" class="Symbol">)</a> <a id="3271" class="Keyword">with</a> <a id="3276" href="SessionType.html#2211" class="Function">Defined-eq</a> <a id="3287" href="Transitions.html#3244" class="Bound">fx</a> <a id="3290" href="Transitions.html#3263" class="Bound">gx</a> <a id="3293" class="Symbol">|</a> <a id="3295" href="Transitions.html#2954" class="Function">transitions-eq</a> <a id="3310" href="Transitions.html#3248" class="Bound">tr</a> <a id="3313" href="Transitions.html#3267" class="Bound">sr</a>
<a id="3316" class="Symbol">...</a> <a id="3320" class="Symbol">|</a> <a id="3322" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3327" class="Symbol">|</a> <a id="3329" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3334" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3336" href="Relation.Binary.HeterogeneousEquality.Core.html#740" class="InductiveConstructor">Het.refl</a> <a id="3345" class="Symbol">=</a> <a id="3347" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3352" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3354" href="Relation.Binary.HeterogeneousEquality.Core.html#740" class="InductiveConstructor">Het.refl</a>

<a id="win-reduces-⊥"></a><a id="3364" href="Transitions.html#3364" class="Function">win-reduces-⊥</a> <a id="3378" class="Symbol">:</a> <a id="3380" class="Symbol">∀{</a><a id="3382" href="Transitions.html#3382" class="Bound">S</a> <a id="3384" href="Transitions.html#3384" class="Bound">S&#39;</a> <a id="3387" href="Transitions.html#3387" class="Bound">α</a><a id="3388" class="Symbol">}</a> <a id="3390" class="Symbol">→</a> <a id="3392" href="SessionType.html#3086" class="Datatype">Win</a> <a id="3396" href="Transitions.html#3382" class="Bound">S</a> <a id="3398" class="Symbol">→</a> <a id="3400" href="Transitions.html#1577" class="Datatype">Transition</a> <a id="3411" href="Transitions.html#3382" class="Bound">S</a> <a id="3413" href="Transitions.html#3387" class="Bound">α</a> <a id="3415" href="Transitions.html#3384" class="Bound">S&#39;</a> <a id="3418" class="Symbol">→</a> <a id="3420" href="Data.Empty.html#526" class="Datatype">⊥</a>
<a id="3422" href="Transitions.html#3364" class="Function">win-reduces-⊥</a> <a id="3436" class="Symbol">(</a><a id="3437" href="SessionType.html#3119" class="InductiveConstructor">out</a> <a id="3441" href="Transitions.html#3441" class="Bound">e</a><a id="3442" class="Symbol">)</a> <a id="3444" class="Symbol">(</a><a id="3445" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="3449" href="Transitions.html#3449" class="Bound">!x</a><a id="3451" class="Symbol">)</a> <a id="3453" class="Symbol">=</a> <a id="3455" href="Transitions.html#3441" class="Bound">e</a> <a id="3457" class="Symbol">_</a> <a id="3459" href="Transitions.html#3449" class="Bound">!x</a>
</pre></body></html>