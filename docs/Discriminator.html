<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Discriminator</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-- MIT License</a>

<a id="17" class="Comment">-- Copyright (c) 2021 Luca Ciccone and Luca Padovani</a>

<a id="71" class="Comment">-- Permission is hereby granted, free of charge, to any person</a>
<a id="134" class="Comment">-- obtaining a copy of this software and associated documentation</a>
<a id="200" class="Comment">-- files (the &quot;Software&quot;), to deal in the Software without</a>
<a id="259" class="Comment">-- restriction, including without limitation the rights to use,</a>
<a id="323" class="Comment">-- copy, modify, merge, publish, distribute, sublicense, and/or sell</a>
<a id="392" class="Comment">-- copies of the Software, and to permit persons to whom the</a>
<a id="453" class="Comment">-- Software is furnished to do so, subject to the following</a>
<a id="513" class="Comment">-- conditions:</a>

<a id="529" class="Comment">-- The above copyright notice and this permission notice shall be</a>
<a id="595" class="Comment">-- included in all copies or substantial portions of the Software.</a>

<a id="663" class="Comment">-- THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</a>
<a id="730" class="Comment">-- EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES</a>
<a id="797" class="Comment">-- OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</a>
<a id="857" class="Comment">-- NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</a>
<a id="920" class="Comment">-- HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</a>
<a id="984" class="Comment">-- WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</a>
<a id="1048" class="Comment">-- FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</a>
<a id="1113" class="Comment">-- OTHER DEALINGS IN THE SOFTWARE.</a>

<a id="1149" class="Keyword">open</a> <a id="1154" class="Keyword">import</a> <a id="1161" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="1172" class="Keyword">open</a> <a id="1177" class="Keyword">import</a> <a id="1184" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1197" class="Keyword">open</a> <a id="1202" class="Keyword">import</a> <a id="1209" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="1218" class="Keyword">open</a> <a id="1223" class="Keyword">import</a> <a id="1230" href="Data.List.html" class="Module">Data.List</a> <a id="1240" class="Keyword">using</a> <a id="1246" class="Symbol">(</a><a id="1247" href="Data.List.Base.html#9981" class="InductiveConstructor">[]</a><a id="1249" class="Symbol">;</a> <a id="1251" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="1254" class="Symbol">;</a> <a id="1256" href="Data.List.Base.html#9641" class="Function Operator">_∷ʳ_</a><a id="1260" class="Symbol">;</a> <a id="1262" href="Data.List.Base.html#1763" class="Function Operator">_++_</a><a id="1266" class="Symbol">)</a>
<a id="1268" class="Keyword">open</a> <a id="1273" class="Keyword">import</a> <a id="1280" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="1301" class="Keyword">using</a> <a id="1307" class="Symbol">(</a><a id="1308" href="Data.List.Properties.html#2067" class="Function">∷-injective</a><a id="1319" class="Symbol">)</a>

<a id="1322" class="Keyword">open</a> <a id="1327" class="Keyword">import</a> <a id="1334" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>
<a id="1351" class="Keyword">open</a> <a id="1356" class="Keyword">import</a> <a id="1363" href="Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="1389" class="Keyword">using</a> <a id="1395" class="Symbol">(</a><a id="1396" href="Relation.Nullary.Negation.html#929" class="Function">contraposition</a><a id="1410" class="Symbol">)</a>
<a id="1412" class="Keyword">open</a> <a id="1417" class="Keyword">import</a> <a id="1424" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="1439" class="Keyword">using</a> <a id="1445" class="Symbol">(</a><a id="1446" href="Relation.Unary.html#1523" class="Function Operator">_∈_</a><a id="1449" class="Symbol">;</a> <a id="1451" href="Relation.Unary.html#1563" class="Function Operator">_∉_</a><a id="1454" class="Symbol">;</a> <a id="1456" href="Relation.Unary.html#1742" class="Function Operator">_⊆_</a><a id="1459" class="Symbol">)</a>
<a id="1461" class="Keyword">open</a> <a id="1466" class="Keyword">import</a> <a id="1473" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1511" class="Keyword">using</a> <a id="1517" class="Symbol">(</a><a id="1518" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="1521" class="Symbol">;</a> <a id="1523" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1527" class="Symbol">;</a> <a id="1529" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="1532" class="Symbol">;</a> <a id="1534" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a><a id="1539" class="Symbol">;</a> <a id="1541" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">subst₂</a><a id="1547" class="Symbol">;</a> <a id="1549" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="1553" class="Symbol">)</a>
<a id="1555" class="Keyword">open</a> <a id="1560" class="Keyword">import</a> <a id="1567" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a> <a id="1621" class="Keyword">using</a> <a id="1627" class="Symbol">(</a><a id="1628" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a><a id="1629" class="Symbol">;</a> <a id="1631" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">_◅_</a><a id="1634" class="Symbol">)</a>

<a id="1637" class="Keyword">open</a> <a id="1642" class="Keyword">import</a> <a id="1649" href="Function.Base.html" class="Module">Function.Base</a> <a id="1663" class="Keyword">using</a> <a id="1669" class="Symbol">(</a><a id="1670" href="Function.Base.html#4121" class="Function Operator">case_of_</a><a id="1678" class="Symbol">)</a>

<a id="1681" class="Keyword">open</a> <a id="1686" class="Keyword">import</a> <a id="1693" href="Common.html" class="Module">Common</a>

<a id="1701" class="Keyword">module</a> <a id="1708" href="Discriminator.html" class="Module">Discriminator</a> <a id="1722" class="Symbol">{</a><a id="1723" href="Discriminator.html#1723" class="Bound">ℙ</a> <a id="1725" class="Symbol">:</a> <a id="1727" class="PrimitiveType">Set</a><a id="1730" class="Symbol">}</a> <a id="1732" class="Symbol">(</a><a id="1733" href="Discriminator.html#1733" class="Bound">message</a> <a id="1741" class="Symbol">:</a> <a id="1743" href="Common.html#1500" class="Record">Message</a> <a id="1751" href="Discriminator.html#1723" class="Bound">ℙ</a><a id="1752" class="Symbol">)</a>
  <a id="1756" class="Keyword">where</a>

<a id="1763" class="Keyword">open</a> <a id="1768" class="Keyword">import</a> <a id="1775" href="Trace.html" class="Module">Trace</a> <a id="1781" href="Discriminator.html#1733" class="Bound">message</a>
<a id="1789" class="Keyword">open</a> <a id="1794" class="Keyword">import</a> <a id="1801" href="SessionType.html" class="Module">SessionType</a> <a id="1813" href="Discriminator.html#1733" class="Bound">message</a>
<a id="1821" class="Keyword">open</a> <a id="1826" class="Keyword">import</a> <a id="1833" href="HasTrace.html" class="Module">HasTrace</a> <a id="1842" href="Discriminator.html#1733" class="Bound">message</a>
<a id="1850" class="Keyword">open</a> <a id="1855" class="Keyword">import</a> <a id="1862" href="TraceSet.html" class="Module">TraceSet</a> <a id="1871" href="Discriminator.html#1733" class="Bound">message</a>
<a id="1879" class="Keyword">open</a> <a id="1884" class="Keyword">import</a> <a id="1891" href="Transitions.html" class="Module">Transitions</a> <a id="1903" href="Discriminator.html#1733" class="Bound">message</a>
<a id="1911" class="Keyword">open</a> <a id="1916" class="Keyword">import</a> <a id="1923" href="Subtyping.html" class="Module">Subtyping</a> <a id="1933" href="Discriminator.html#1733" class="Bound">message</a>
<a id="1941" class="Keyword">open</a> <a id="1946" class="Keyword">import</a> <a id="1953" href="Divergence.html" class="Module">Divergence</a> <a id="1964" href="Discriminator.html#1733" class="Bound">message</a>
<a id="1972" class="Keyword">open</a> <a id="1977" class="Keyword">import</a> <a id="1984" href="Session.html" class="Module">Session</a> <a id="1992" href="Discriminator.html#1733" class="Bound">message</a>
<a id="2000" class="Keyword">open</a> <a id="2005" class="Keyword">import</a> <a id="2012" href="Semantics.html" class="Module">Semantics</a> <a id="2022" href="Discriminator.html#1733" class="Bound">message</a>

<a id="make-diverge-backward"></a><a id="2031" href="Discriminator.html#2031" class="Function">make-diverge-backward</a> <a id="2053" class="Symbol">:</a>
  <a id="2057" class="Symbol">∀{</a><a id="2059" href="Discriminator.html#2059" class="Bound">T</a> <a id="2061" href="Discriminator.html#2061" class="Bound">S</a> <a id="2063" href="Discriminator.html#2063" class="Bound">α</a><a id="2064" class="Symbol">}</a>
  <a id="2068" class="Symbol">(</a><a id="2069" href="Discriminator.html#2069" class="Bound">tα</a> <a id="2072" class="Symbol">:</a> <a id="2074" href="Discriminator.html#2059" class="Bound">T</a> <a id="2076" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="2085" class="Symbol">(</a><a id="2086" href="Discriminator.html#2063" class="Bound">α</a> <a id="2088" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2090" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2092" class="Symbol">))</a>
  <a id="2097" class="Symbol">(</a><a id="2098" href="Discriminator.html#2098" class="Bound">sα</a> <a id="2101" class="Symbol">:</a> <a id="2103" href="Discriminator.html#2061" class="Bound">S</a> <a id="2105" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="2114" class="Symbol">(</a><a id="2115" href="Discriminator.html#2063" class="Bound">α</a> <a id="2117" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2119" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2121" class="Symbol">))</a> <a id="2124" class="Symbol">-&gt;</a>
  <a id="2129" href="Discriminator.html#2059" class="Bound">T</a> <a id="2131" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="2133" href="Discriminator.html#2061" class="Bound">S</a> <a id="2135" class="Symbol">-&gt;</a>
  <a id="2140" href="HasTrace.html#1664" class="Function">after</a> <a id="2146" href="Discriminator.html#2069" class="Bound">tα</a> <a id="2149" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="2151" href="HasTrace.html#1664" class="Function">after</a> <a id="2157" href="Discriminator.html#2098" class="Bound">sα</a> <a id="2160" class="Symbol">-&gt;</a>
  <a id="2165" href="Divergence.html#2919" class="Function">DivergeBackward</a> <a id="2181" href="Discriminator.html#2069" class="Bound">tα</a> <a id="2184" href="Discriminator.html#2098" class="Bound">sα</a>
<a id="2187" href="Discriminator.html#2031" class="Function">make-diverge-backward</a> <a id="2209" href="Discriminator.html#2209" class="Bound">tα</a> <a id="2212" href="Discriminator.html#2212" class="Bound">sα</a> <a id="2215" href="Discriminator.html#2215" class="Bound">divε</a> <a id="2220" href="Discriminator.html#2220" class="Bound">divα</a> <a id="2225" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="2230" class="Symbol">=</a> <a id="2232" href="Discriminator.html#2215" class="Bound">divε</a>
<a id="2237" href="Discriminator.html#2031" class="Function">make-diverge-backward</a> <a id="2259" href="Discriminator.html#2259" class="Bound">tα</a> <a id="2262" href="Discriminator.html#2262" class="Bound">sα</a> <a id="2265" href="Discriminator.html#2265" class="Bound">divε</a> <a id="2270" href="Discriminator.html#2270" class="Bound">divα</a> <a id="2275" class="Symbol">(</a><a id="2276" href="Trace.html#2339" class="InductiveConstructor">some</a> <a id="2281" href="Trace.html#2311" class="InductiveConstructor">none</a><a id="2285" class="Symbol">)</a> <a id="2287" class="Symbol">=</a>
  <a id="2291" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">subst₂</a> <a id="2298" class="Symbol">(λ</a> <a id="2301" href="Discriminator.html#2301" class="Bound">u</a> <a id="2303" href="Discriminator.html#2303" class="Bound">v</a> <a id="2305" class="Symbol">-&gt;</a> <a id="2308" href="HasTrace.html#1664" class="Function">after</a> <a id="2314" href="Discriminator.html#2301" class="Bound">u</a> <a id="2316" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="2318" href="HasTrace.html#1664" class="Function">after</a> <a id="2324" href="Discriminator.html#2303" class="Bound">v</a><a id="2325" class="Symbol">)</a> <a id="2327" class="Symbol">(</a><a id="2328" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="2332" class="Symbol">(</a><a id="2333" href="HasTrace.html#5249" class="Function">⊑-has-trace-after</a> <a id="2351" href="Discriminator.html#2259" class="Bound">tα</a><a id="2353" class="Symbol">))</a> <a id="2356" class="Symbol">(</a><a id="2357" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="2361" class="Symbol">(</a><a id="2362" href="HasTrace.html#5249" class="Function">⊑-has-trace-after</a> <a id="2380" href="Discriminator.html#2262" class="Bound">sα</a><a id="2382" class="Symbol">))</a> <a id="2385" href="Discriminator.html#2270" class="Bound">divα</a>

<a id="has-trace-after-split"></a><a id="2391" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="2413" class="Symbol">:</a>
  <a id="2417" class="Symbol">∀{</a><a id="2419" href="Discriminator.html#2419" class="Bound">T</a> <a id="2421" href="Discriminator.html#2421" class="Bound">φ</a> <a id="2423" href="Discriminator.html#2423" class="Bound">ψ</a><a id="2424" class="Symbol">}</a> <a id="2426" class="Symbol">-&gt;</a>
  <a id="2431" class="Symbol">(</a><a id="2432" href="Discriminator.html#2432" class="Bound">tφ</a> <a id="2435" class="Symbol">:</a> <a id="2437" href="Discriminator.html#2419" class="Bound">T</a> <a id="2439" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="2448" href="Discriminator.html#2421" class="Bound">φ</a><a id="2449" class="Symbol">)</a>
  <a id="2453" class="Symbol">(</a><a id="2454" href="Discriminator.html#2454" class="Bound">tφψ</a> <a id="2458" class="Symbol">:</a> <a id="2460" href="Discriminator.html#2419" class="Bound">T</a> <a id="2462" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="2471" class="Symbol">(</a><a id="2472" href="Discriminator.html#2421" class="Bound">φ</a> <a id="2474" href="Data.List.Base.html#1763" class="Function Operator">++</a> <a id="2477" href="Discriminator.html#2423" class="Bound">ψ</a><a id="2478" class="Symbol">))</a> <a id="2481" class="Symbol">-&gt;</a>
  <a id="2486" href="Divergence.html#10076" class="Function">has-trace-after</a> <a id="2502" href="Discriminator.html#2432" class="Bound">tφ</a> <a id="2505" class="Symbol">(</a><a id="2506" href="HasTrace.html#4111" class="Function">split-trace</a> <a id="2518" href="Discriminator.html#2432" class="Bound">tφ</a> <a id="2521" href="Discriminator.html#2454" class="Bound">tφψ</a><a id="2524" class="Symbol">)</a> <a id="2526" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2528" href="Discriminator.html#2454" class="Bound">tφψ</a>
<a id="2532" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="2554" class="Symbol">(_</a> <a id="2557" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2559" href="Discriminator.html#2559" class="Bound">tdef</a> <a id="2564" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2566" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="2570" class="Symbol">)</a> <a id="2572" href="Discriminator.html#2572" class="Bound">tφψ</a> <a id="2576" class="Symbol">=</a> <a id="2578" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="2583" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="2605" class="Symbol">(_</a> <a id="2608" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2610" href="Discriminator.html#2610" class="Bound">tdef</a> <a id="2615" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2617" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="2622" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="2626" href="Discriminator.html#2626" class="Bound">tr</a><a id="2628" class="Symbol">)</a> <a id="2630" class="Symbol">(_</a> <a id="2633" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2635" href="Discriminator.html#2635" class="Bound">sdef</a> <a id="2640" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2642" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="2647" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="2651" href="Discriminator.html#2651" class="Bound">sr</a><a id="2653" class="Symbol">)</a>
  <a id="2657" class="Keyword">rewrite</a> <a id="2665" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="2687" class="Symbol">(_</a> <a id="2690" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2692" href="Discriminator.html#2610" class="Bound">tdef</a> <a id="2697" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2699" href="Discriminator.html#2626" class="Bound">tr</a><a id="2701" class="Symbol">)</a> <a id="2703" class="Symbol">(_</a> <a id="2706" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2708" href="Discriminator.html#2635" class="Bound">sdef</a> <a id="2713" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2715" href="Discriminator.html#2651" class="Bound">sr</a><a id="2717" class="Symbol">)</a> <a id="2719" class="Symbol">=</a> <a id="2721" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="2726" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="2748" class="Symbol">(</a><a id="2749" href="Discriminator.html#2749" class="Bound">T</a> <a id="2751" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2753" href="Discriminator.html#2753" class="Bound">tdef</a> <a id="2758" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2760" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="2765" class="Symbol">(</a><a id="2766" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="2770" href="Discriminator.html#2770" class="Bound">fx</a><a id="2772" class="Symbol">)</a> <a id="2774" href="Discriminator.html#2774" class="Bound">tr</a><a id="2776" class="Symbol">)</a> <a id="2778" class="Symbol">(</a><a id="2779" href="Discriminator.html#2779" class="Bound">S</a> <a id="2781" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2783" href="Discriminator.html#2783" class="Bound">sdef</a> <a id="2788" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2790" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="2795" class="Symbol">(</a><a id="2796" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="2800" href="Discriminator.html#2800" class="Bound">gx</a><a id="2802" class="Symbol">)</a> <a id="2804" href="Discriminator.html#2804" class="Bound">sr</a><a id="2806" class="Symbol">)</a>
  <a id="2810" class="Keyword">rewrite</a> <a id="2818" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="2840" class="Symbol">(_</a> <a id="2843" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2845" href="Discriminator.html#2753" class="Bound">tdef</a> <a id="2850" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2852" href="Discriminator.html#2774" class="Bound">tr</a><a id="2854" class="Symbol">)</a> <a id="2856" class="Symbol">(_</a> <a id="2859" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2861" href="Discriminator.html#2783" class="Bound">sdef</a> <a id="2866" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2868" href="Discriminator.html#2804" class="Bound">sr</a><a id="2870" class="Symbol">)</a> <a id="2872" class="Symbol">=</a>
  <a id="2876" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="2881" class="Symbol">(</a><a id="2882" href="Discriminator.html#2779" class="Bound">S</a> <a id="2884" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,_</a><a id="2886" class="Symbol">)</a> <a id="2888" class="Symbol">(</a><a id="2889" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="2894" class="Symbol">(</a><a id="2895" href="Discriminator.html#2783" class="Bound">sdef</a> <a id="2900" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,_</a><a id="2902" class="Symbol">)</a> <a id="2904" class="Symbol">(</a><a id="2905" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="2910" class="Symbol">(λ</a> <a id="2913" href="Discriminator.html#2913" class="Bound">z</a> <a id="2915" class="Symbol">-&gt;</a> <a id="2918" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="2923" href="Discriminator.html#2913" class="Bound">z</a> <a id="2925" href="Discriminator.html#2804" class="Bound">sr</a><a id="2927" class="Symbol">)</a> <a id="2929" class="Symbol">(</a><a id="2930" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="2935" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="2939" class="Symbol">(</a><a id="2940" href="SessionType.html#2104" class="Function">Defined-eq</a> <a id="2951" class="Symbol">(</a><a id="2952" href="Transitions.html#2723" class="Function">transitions+defined-&gt;defined</a> <a id="2981" href="Discriminator.html#2804" class="Bound">sr</a> <a id="2984" href="Discriminator.html#2783" class="Bound">sdef</a><a id="2988" class="Symbol">)</a> <a id="2990" href="Discriminator.html#2800" class="Bound">gx</a><a id="2992" class="Symbol">))))</a>

<a id="disc-set-has-outputs"></a><a id="2998" href="Discriminator.html#2998" class="Function">disc-set-has-outputs</a> <a id="3019" class="Symbol">:</a>
  <a id="3023" class="Symbol">∀{</a><a id="3025" href="Discriminator.html#3025" class="Bound">T</a> <a id="3027" href="Discriminator.html#3027" class="Bound">S</a> <a id="3029" href="Discriminator.html#3029" class="Bound">φ</a> <a id="3031" href="Discriminator.html#3031" class="Bound">x</a><a id="3032" class="Symbol">}</a> <a id="3034" class="Symbol">-&gt;</a>
  <a id="3039" href="Discriminator.html#3025" class="Bound">T</a> <a id="3041" href="Subtyping.html#2302" class="Function Operator">&lt;:</a> <a id="3044" href="Discriminator.html#3027" class="Bound">S</a> <a id="3046" class="Symbol">-&gt;</a>
  <a id="3051" href="Discriminator.html#3029" class="Bound">φ</a> <a id="3053" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="3055" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="3063" href="Discriminator.html#3025" class="Bound">T</a> <a id="3065" href="Discriminator.html#3027" class="Bound">S</a> <a id="3067" class="Symbol">-&gt;</a>
  <a id="3072" href="Discriminator.html#3025" class="Bound">T</a> <a id="3074" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="3083" class="Symbol">(</a><a id="3084" href="Discriminator.html#3029" class="Bound">φ</a> <a id="3086" href="Data.List.Base.html#9641" class="Function Operator">∷ʳ</a> <a id="3089" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="3091" href="Discriminator.html#3031" class="Bound">x</a><a id="3092" class="Symbol">)</a> <a id="3094" class="Symbol">-&gt;</a>
  <a id="3099" href="Discriminator.html#3027" class="Bound">S</a> <a id="3101" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="3110" href="Discriminator.html#3029" class="Bound">φ</a> <a id="3112" class="Symbol">-&gt;</a>
  <a id="3117" href="Discriminator.html#3029" class="Bound">φ</a> <a id="3119" href="Data.List.Base.html#9641" class="Function Operator">∷ʳ</a> <a id="3122" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="3124" href="Discriminator.html#3031" class="Bound">x</a> <a id="3126" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="3128" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="3136" href="Discriminator.html#3025" class="Bound">T</a> <a id="3138" href="Discriminator.html#3027" class="Bound">S</a>
<a id="3140" href="Discriminator.html#2998" class="Function">disc-set-has-outputs</a> <a id="3161" class="Symbol">{_}</a> <a id="3165" class="Symbol">{</a><a id="3166" href="Discriminator.html#3166" class="Bound">S</a><a id="3167" class="Symbol">}</a> <a id="3169" class="Symbol">{</a><a id="3170" href="Discriminator.html#3170" class="Bound">φ</a><a id="3171" class="Symbol">}</a> <a id="3173" class="Symbol">{</a><a id="3174" href="Discriminator.html#3174" class="Bound">x</a><a id="3175" class="Symbol">}</a> <a id="3177" href="Discriminator.html#3177" class="Bound">sub</a> <a id="3181" class="Symbol">(</a><a id="3182" href="Divergence.html#3508" class="InductiveConstructor">inc</a> <a id="3186" href="Discriminator.html#3186" class="Bound">tφ</a> <a id="3189" href="Discriminator.html#3189" class="Bound">sφ</a> <a id="3192" href="Discriminator.html#3192" class="Bound">div←φ</a><a id="3197" class="Symbol">)</a> <a id="3199" href="Discriminator.html#3199" class="Bound">tφx</a> <a id="3203" class="Symbol">_</a> <a id="3205" class="Keyword">with</a> <a id="3210" href="Discriminator.html#3166" class="Bound">S</a> <a id="3212" href="HasTrace.html#1865" class="Function Operator">HasTrace?</a> <a id="3222" class="Symbol">(</a><a id="3223" href="Discriminator.html#3170" class="Bound">φ</a> <a id="3225" href="Data.List.Base.html#9641" class="Function Operator">∷ʳ</a> <a id="3228" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="3230" href="Discriminator.html#3174" class="Bound">x</a><a id="3231" class="Symbol">)</a>
<a id="3233" class="Symbol">...</a> <a id="3237" class="Symbol">|</a> <a id="3239" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="3243" href="Discriminator.html#3243" class="Bound">sφx</a> <a id="3247" class="Symbol">=</a>
  <a id="3251" class="Keyword">let</a> <a id="3255" href="Discriminator.html#3255" class="Bound">tφ/x</a> <a id="3260" class="Symbol">=</a> <a id="3262" href="HasTrace.html#4111" class="Function">split-trace</a> <a id="3274" class="Bound">tφ</a> <a id="3277" class="Bound">tφx</a> <a id="3281" class="Keyword">in</a>
  <a id="3286" class="Keyword">let</a> <a id="3290" href="Discriminator.html#3290" class="Bound">sφ/x</a> <a id="3295" class="Symbol">=</a> <a id="3297" href="HasTrace.html#4111" class="Function">split-trace</a> <a id="3309" class="Bound">sφ</a> <a id="3312" href="Discriminator.html#3243" class="Bound">sφx</a> <a id="3316" class="Keyword">in</a>
  <a id="3321" class="Keyword">let</a> <a id="3325" href="Discriminator.html#3325" class="Bound">divφ</a> <a id="3330" class="Symbol">=</a> <a id="3332" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">subst₂</a> <a id="3339" class="Symbol">(λ</a> <a id="3342" href="Discriminator.html#3342" class="Bound">u</a> <a id="3344" href="Discriminator.html#3344" class="Bound">v</a> <a id="3346" class="Symbol">-&gt;</a> <a id="3349" href="HasTrace.html#1664" class="Function">after</a> <a id="3355" href="Discriminator.html#3342" class="Bound">u</a> <a id="3357" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="3359" href="HasTrace.html#1664" class="Function">after</a> <a id="3365" href="Discriminator.html#3344" class="Bound">v</a><a id="3366" class="Symbol">)</a> <a id="3368" class="Symbol">(</a><a id="3369" href="HasTrace.html#5249" class="Function">⊑-has-trace-after</a> <a id="3387" class="Bound">tφ</a><a id="3389" class="Symbol">)</a> <a id="3391" class="Symbol">(</a><a id="3392" href="HasTrace.html#5249" class="Function">⊑-has-trace-after</a> <a id="3410" class="Bound">sφ</a><a id="3412" class="Symbol">)</a> <a id="3414" class="Symbol">(</a><a id="3415" class="Bound">div←φ</a> <a id="3421" class="Symbol">(</a><a id="3422" href="Trace.html#2386" class="Function">⊑-refl</a> <a id="3429" class="Bound">φ</a><a id="3430" class="Symbol">))</a> <a id="3433" class="Keyword">in</a>
  <a id="3438" class="Keyword">let</a> <a id="3442" href="Discriminator.html#3442" class="Bound">divx</a> <a id="3447" class="Symbol">=</a> <a id="3449" href="Divergence.html#2198" class="Field">_↑_.divergence</a> <a id="3464" href="Discriminator.html#3325" class="Bound">divφ</a> <a id="3469" class="Symbol">{</a><a id="3470" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3472" class="Symbol">}</a> <a id="3474" class="Symbol">{</a><a id="3475" class="Bound">x</a><a id="3476" class="Symbol">}</a> <a id="3478" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="3483" href="Discriminator.html#3255" class="Bound">tφ/x</a> <a id="3488" href="Discriminator.html#3290" class="Bound">sφ/x</a> <a id="3493" class="Keyword">in</a>
  <a id="3498" class="Keyword">let</a> <a id="3502" href="Discriminator.html#3502" class="Bound">divφ←x</a> <a id="3509" class="Symbol">=</a> <a id="3511" href="Discriminator.html#2031" class="Function">make-diverge-backward</a> <a id="3533" href="Discriminator.html#3255" class="Bound">tφ/x</a> <a id="3538" href="Discriminator.html#3290" class="Bound">sφ/x</a> <a id="3543" href="Discriminator.html#3325" class="Bound">divφ</a> <a id="3548" href="Discriminator.html#3442" class="Bound">divx</a> <a id="3553" class="Keyword">in</a>
  <a id="3558" class="Keyword">let</a> <a id="3562" href="Discriminator.html#3562" class="Bound">div←φx</a> <a id="3569" class="Symbol">=</a> <a id="3571" href="Relation.Binary.PropositionalEquality.Core.html#1835" class="Function">subst₂</a> <a id="3578" href="Divergence.html#2919" class="Function">DivergeBackward</a> <a id="3594" class="Symbol">(</a><a id="3595" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="3617" class="Bound">tφ</a> <a id="3620" class="Bound">tφx</a><a id="3623" class="Symbol">)</a> <a id="3625" class="Symbol">(</a><a id="3626" href="Discriminator.html#2391" class="Function">has-trace-after-split</a> <a id="3648" class="Bound">sφ</a> <a id="3651" href="Discriminator.html#3243" class="Bound">sφx</a><a id="3654" class="Symbol">)</a> <a id="3656" class="Symbol">(</a><a id="3657" href="Divergence.html#10790" class="Function">append-diverge-backward</a> <a id="3681" class="Bound">tφ</a> <a id="3684" class="Bound">sφ</a> <a id="3687" href="Discriminator.html#3255" class="Bound">tφ/x</a> <a id="3692" href="Discriminator.html#3290" class="Bound">sφ/x</a> <a id="3697" class="Bound">div←φ</a> <a id="3703" href="Discriminator.html#3502" class="Bound">divφ←x</a><a id="3709" class="Symbol">)</a> <a id="3711" class="Keyword">in</a>
  <a id="3716" href="Divergence.html#3508" class="InductiveConstructor">inc</a> <a id="3720" class="Bound">tφx</a> <a id="3724" href="Discriminator.html#3243" class="Bound">sφx</a> <a id="3728" href="Discriminator.html#3562" class="Bound">div←φx</a>
<a id="3735" class="Symbol">...</a> <a id="3739" class="Symbol">|</a> <a id="3741" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="3744" href="Discriminator.html#3744" class="Bound">nsφx</a> <a id="3749" class="Symbol">=</a> <a id="3751" href="Divergence.html#3638" class="InductiveConstructor">exc</a> <a id="3755" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3760" class="Bound">tφ</a> <a id="3763" class="Bound">sφ</a> <a id="3766" class="Bound">tφx</a> <a id="3770" href="Discriminator.html#3744" class="Bound">nsφx</a> <a id="3775" class="Bound">div←φ</a>
<a id="3781" href="Discriminator.html#2998" class="Function">disc-set-has-outputs</a> <a id="3802" href="Discriminator.html#3802" class="Bound">sub</a> <a id="3806" class="Symbol">(</a><a id="3807" href="Divergence.html#3638" class="InductiveConstructor">exc</a> <a id="3811" href="Discriminator.html#3811" class="Bound">eq</a> <a id="3814" href="Discriminator.html#3814" class="Bound">tψ</a> <a id="3817" href="Discriminator.html#3817" class="Bound">sψ</a> <a id="3820" href="Discriminator.html#3820" class="Bound">tφ</a> <a id="3823" href="Discriminator.html#3823" class="Bound">nsφ</a> <a id="3827" href="Discriminator.html#3827" class="Bound">div←ψ</a><a id="3832" class="Symbol">)</a> <a id="3834" href="Discriminator.html#3834" class="Bound">tφx</a> <a id="3838" href="Discriminator.html#3838" class="Bound">sφ</a> <a id="3841" class="Symbol">=</a> <a id="3843" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="3850" class="Symbol">(</a><a id="3851" href="Discriminator.html#3823" class="Bound">nsφ</a> <a id="3855" href="Discriminator.html#3838" class="Bound">sφ</a><a id="3857" class="Symbol">)</a>

<a id="defined-becomes-nil"></a><a id="3860" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="3880" class="Symbol">:</a>
  <a id="3884" class="Symbol">∀{</a><a id="3886" href="Discriminator.html#3886" class="Bound">T</a> <a id="3888" href="Discriminator.html#3888" class="Bound">φ</a> <a id="3890" href="Discriminator.html#3890" class="Bound">S</a><a id="3891" class="Symbol">}</a> <a id="3893" class="Symbol">-&gt;</a>
  <a id="3898" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="3906" href="Discriminator.html#3886" class="Bound">T</a> <a id="3908" class="Symbol">-&gt;</a>
  <a id="3913" href="Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="3915" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="3923" href="Discriminator.html#3890" class="Bound">S</a> <a id="3925" class="Symbol">-&gt;</a>
  <a id="3930" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="3942" href="Discriminator.html#3886" class="Bound">T</a> <a id="3944" href="Discriminator.html#3888" class="Bound">φ</a> <a id="3946" href="Discriminator.html#3890" class="Bound">S</a> <a id="3948" class="Symbol">-&gt;</a>
  <a id="3953" href="Data.Product.html#1788" class="Function">∃[</a> <a id="3956" href="Discriminator.html#3956" class="Bound">ψ</a> <a id="3958" href="Data.Product.html#1788" class="Function">]</a> <a id="3960" href="Data.Product.html#1788" class="Function">∃[</a> <a id="3963" href="Discriminator.html#3963" class="Bound">x</a> <a id="3965" href="Data.Product.html#1788" class="Function">]</a> <a id="3967" class="Symbol">(</a><a id="3968" href="Discriminator.html#3888" class="Bound">φ</a> <a id="3970" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3972" href="Discriminator.html#3956" class="Bound">ψ</a> <a id="3974" href="Data.List.Base.html#9641" class="Function Operator">∷ʳ</a> <a id="3977" href="Action.html#1370" class="InductiveConstructor">I</a> <a id="3979" href="Discriminator.html#3963" class="Bound">x</a> <a id="3981" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3983" href="Discriminator.html#3886" class="Bound">T</a> <a id="3985" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="3994" href="Discriminator.html#3956" class="Bound">ψ</a> <a id="3996" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3998" href="Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="4000" href="Discriminator.html#3886" class="Bound">T</a> <a id="4002" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="4011" href="Discriminator.html#3888" class="Bound">φ</a><a id="4012" class="Symbol">)</a>
<a id="4014" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="4034" href="Discriminator.html#4034" class="Bound">def</a> <a id="4038" href="Discriminator.html#4038" class="Bound">ndef</a> <a id="4043" href="Transitions.html#1825" class="InductiveConstructor">refl</a> <a id="4048" class="Symbol">=</a> <a id="4050" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="4057" class="Symbol">(</a><a id="4058" href="Discriminator.html#4038" class="Bound">ndef</a> <a id="4063" href="Discriminator.html#4034" class="Bound">def</a><a id="4066" class="Symbol">)</a>
<a id="4068" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="4088" href="Discriminator.html#4088" class="Bound">def</a> <a id="4092" href="Discriminator.html#4092" class="Bound">ndef</a> <a id="4097" class="Symbol">(</a><a id="4098" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="4103" class="Symbol">(</a><a id="4104" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="4108" class="Symbol">{_}</a> <a id="4112" class="Symbol">{</a><a id="4113" href="Discriminator.html#4113" class="Bound">x</a><a id="4114" class="Symbol">})</a> <a id="4117" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="4121" class="Symbol">)</a> <a id="4123" class="Symbol">=</a>
  <a id="4127" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="4130" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4132" href="Discriminator.html#4113" class="Bound">x</a> <a id="4134" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4136" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4141" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4143" class="Symbol">(_</a> <a id="4146" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4148" href="SessionType.html#1911" class="InductiveConstructor">inp</a> <a id="4152" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4154" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="4158" class="Symbol">)</a> <a id="4160" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4162" href="HasTrace.html#3049" class="Function">inp-has-no-trace</a> <a id="4179" class="Symbol">λ</a> <a id="4181" class="Symbol">{</a> <a id="4183" class="Symbol">(_</a> <a id="4186" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4188" href="Discriminator.html#4188" class="Bound">def</a> <a id="4192" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4194" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="4198" class="Symbol">)</a> <a id="4200" class="Symbol">→</a> <a id="4202" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="4209" class="Symbol">(</a><a id="4210" href="Discriminator.html#4092" class="Bound">ndef</a> <a id="4215" href="Discriminator.html#4188" class="Bound">def</a><a id="4218" class="Symbol">)</a> <a id="4220" class="Symbol">}</a>
<a id="4222" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="4242" href="Discriminator.html#4242" class="Bound">def</a> <a id="4246" href="Discriminator.html#4246" class="Bound">ndef</a> <a id="4251" class="Symbol">(</a><a id="4252" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="4257" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="4261" href="Discriminator.html#4261" class="Bound">tr</a><a id="4263" class="Symbol">@(</a><a id="4265" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="4270" href="Discriminator.html#4270" class="Bound">t</a> <a id="4272" class="Symbol">_))</a> <a id="4276" class="Keyword">with</a> <a id="4281" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="4301" class="Symbol">(</a><a id="4302" href="Transitions.html#1966" class="Function">transition-&gt;defined</a> <a id="4322" href="Discriminator.html#4270" class="Bound">t</a><a id="4323" class="Symbol">)</a> <a id="4325" href="Discriminator.html#4246" class="Bound">ndef</a> <a id="4330" href="Discriminator.html#4261" class="Bound">tr</a>
<a id="4333" class="Symbol">...</a> <a id="4337" class="Symbol">|</a> <a id="4339" href="Discriminator.html#4339" class="Bound">ψ</a> <a id="4341" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4343" href="Discriminator.html#4343" class="Bound">x</a> <a id="4345" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4347" href="Discriminator.html#4347" class="Bound">eq</a> <a id="4350" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4352" href="Discriminator.html#4352" class="Bound">tψ</a> <a id="4355" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4357" href="Discriminator.html#4357" class="Bound">ntφ</a> <a id="4361" class="Symbol">=</a>
  <a id="4365" href="Action.html#1370" class="InductiveConstructor">I</a> <a id="4367" class="Symbol">_</a> <a id="4369" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4371" href="Discriminator.html#4339" class="Bound">ψ</a> <a id="4373" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4375" href="Discriminator.html#4343" class="Bound">x</a> <a id="4377" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4379" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="4384" class="Symbol">(</a><a id="4385" href="Action.html#1370" class="InductiveConstructor">I</a> <a id="4387" class="Symbol">_</a> <a id="4389" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷_</a><a id="4391" class="Symbol">)</a> <a id="4393" href="Discriminator.html#4347" class="Bound">eq</a> <a id="4396" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4398" href="HasTrace.html#2917" class="Function">inp-has-trace</a> <a id="4412" href="Discriminator.html#4352" class="Bound">tψ</a> <a id="4415" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4417" href="HasTrace.html#3049" class="Function">inp-has-no-trace</a> <a id="4434" href="Discriminator.html#4357" class="Bound">ntφ</a>
<a id="4438" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="4458" href="Discriminator.html#4458" class="Bound">def</a> <a id="4462" href="Discriminator.html#4462" class="Bound">ndef</a> <a id="4467" class="Symbol">(</a><a id="4468" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="4473" class="Symbol">(</a><a id="4474" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="4478" href="Discriminator.html#4478" class="Bound">fx</a><a id="4480" class="Symbol">)</a> <a id="4482" href="Discriminator.html#4482" class="Bound">tr</a><a id="4484" class="Symbol">)</a> <a id="4486" class="Keyword">with</a> <a id="4491" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="4511" href="Discriminator.html#4478" class="Bound">fx</a> <a id="4514" href="Discriminator.html#4462" class="Bound">ndef</a> <a id="4519" href="Discriminator.html#4482" class="Bound">tr</a>
<a id="4522" class="Symbol">...</a> <a id="4526" class="Symbol">|</a> <a id="4528" href="Discriminator.html#4528" class="Bound">ψ</a> <a id="4530" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4532" href="Discriminator.html#4532" class="Bound">x</a> <a id="4534" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4536" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4541" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4543" href="Discriminator.html#4543" class="Bound">tψ</a> <a id="4546" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4548" href="Discriminator.html#4548" class="Bound">ntφ</a> <a id="4552" class="Symbol">=</a>
  <a id="4556" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="4558" class="Symbol">_</a> <a id="4560" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4562" href="Discriminator.html#4528" class="Bound">ψ</a> <a id="4564" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4566" href="Discriminator.html#4532" class="Bound">x</a> <a id="4568" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4570" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4575" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4577" href="HasTrace.html#3199" class="Function">out-has-trace</a> <a id="4591" href="Discriminator.html#4543" class="Bound">tψ</a> <a id="4594" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4596" href="HasTrace.html#3371" class="Function">out-has-no-trace</a> <a id="4613" href="Discriminator.html#4548" class="Bound">ntφ</a>

<a id="sub+diverge-&gt;defined"></a><a id="4618" href="Discriminator.html#4618" class="Function">sub+diverge-&gt;defined</a> <a id="4639" class="Symbol">:</a> <a id="4641" class="Symbol">∀{</a><a id="4643" href="Discriminator.html#4643" class="Bound">T</a> <a id="4645" href="Discriminator.html#4645" class="Bound">S</a><a id="4646" class="Symbol">}</a> <a id="4648" class="Symbol">-&gt;</a> <a id="4651" href="Discriminator.html#4643" class="Bound">T</a> <a id="4653" href="Subtyping.html#2302" class="Function Operator">&lt;:</a> <a id="4656" href="Discriminator.html#4645" class="Bound">S</a> <a id="4658" class="Symbol">-&gt;</a> <a id="4661" href="Discriminator.html#4643" class="Bound">T</a> <a id="4663" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="4665" href="Discriminator.html#4645" class="Bound">S</a> <a id="4667" class="Symbol">-&gt;</a> <a id="4670" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="4678" href="Discriminator.html#4643" class="Bound">T</a> <a id="4680" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4682" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="4690" href="Discriminator.html#4645" class="Bound">S</a>
<a id="4692" href="Discriminator.html#4618" class="Function">sub+diverge-&gt;defined</a> <a id="4713" href="Subtyping.html#1905" class="InductiveConstructor">nil&lt;:any</a> <a id="4722" href="Discriminator.html#4722" class="Bound">div</a> <a id="4726" class="Keyword">with</a> <a id="4731" href="Divergence.html#2125" class="Field">_↑_.with-trace</a> <a id="4746" href="Discriminator.html#4722" class="Bound">div</a>
<a id="4750" class="Symbol">...</a> <a id="4754" class="Symbol">|</a> <a id="4756" class="Symbol">_</a> <a id="4758" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4760" href="Discriminator.html#4760" class="Bound">def</a> <a id="4764" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4766" href="Discriminator.html#4766" class="Bound">tr</a> <a id="4769" class="Symbol">=</a> <a id="4771" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="4778" class="Symbol">(</a><a id="4779" href="Relation.Nullary.Negation.html#929" class="Function">contraposition</a> <a id="4794" class="Symbol">(</a><a id="4795" href="Transitions.html#2723" class="Function">transitions+defined-&gt;defined</a> <a id="4824" href="Discriminator.html#4766" class="Bound">tr</a><a id="4826" class="Symbol">)</a> <a id="4828" class="Symbol">(λ</a> <a id="4831" class="Symbol">())</a> <a id="4835" href="Discriminator.html#4760" class="Bound">def</a><a id="4838" class="Symbol">)</a>
<a id="4840" href="Discriminator.html#4618" class="Function">sub+diverge-&gt;defined</a> <a id="4861" class="Symbol">(</a><a id="4862" href="Subtyping.html#1940" class="InductiveConstructor">end&lt;:def</a> <a id="4871" class="Symbol">(</a><a id="4872" href="SessionType.html#3103" class="InductiveConstructor">inp</a> <a id="4876" class="Symbol">_)</a> <a id="4879" href="Discriminator.html#4879" class="Bound">def</a><a id="4882" class="Symbol">)</a> <a id="4884" class="Symbol">_</a> <a id="4886" class="Symbol">=</a> <a id="4888" href="SessionType.html#1911" class="InductiveConstructor">inp</a> <a id="4892" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4894" href="Discriminator.html#4879" class="Bound">def</a>
<a id="4898" href="Discriminator.html#4618" class="Function">sub+diverge-&gt;defined</a> <a id="4919" class="Symbol">(</a><a id="4920" href="Subtyping.html#1940" class="InductiveConstructor">end&lt;:def</a> <a id="4929" class="Symbol">(</a><a id="4930" href="SessionType.html#3157" class="InductiveConstructor">out</a> <a id="4934" class="Symbol">_)</a> <a id="4937" href="Discriminator.html#4937" class="Bound">def</a><a id="4940" class="Symbol">)</a> <a id="4942" class="Symbol">_</a> <a id="4944" class="Symbol">=</a> <a id="4946" href="SessionType.html#1943" class="InductiveConstructor">out</a> <a id="4950" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4952" href="Discriminator.html#4937" class="Bound">def</a>
<a id="4956" href="Discriminator.html#4618" class="Function">sub+diverge-&gt;defined</a> <a id="4977" class="Symbol">(</a><a id="4978" href="Subtyping.html#2005" class="InductiveConstructor">inp&lt;:inp</a> <a id="4987" class="Symbol">_</a> <a id="4989" class="Symbol">_)</a> <a id="4992" class="Symbol">_</a> <a id="4994" class="Symbol">=</a> <a id="4996" href="SessionType.html#1911" class="InductiveConstructor">inp</a> <a id="5000" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5002" href="SessionType.html#1911" class="InductiveConstructor">inp</a>
<a id="5006" href="Discriminator.html#4618" class="Function">sub+diverge-&gt;defined</a> <a id="5027" class="Symbol">(</a><a id="5028" href="Subtyping.html#2147" class="InductiveConstructor">out&lt;:out</a> <a id="5037" class="Symbol">_</a> <a id="5039" class="Symbol">_</a> <a id="5041" class="Symbol">_)</a> <a id="5044" class="Symbol">_</a> <a id="5046" class="Symbol">=</a> <a id="5048" href="SessionType.html#1943" class="InductiveConstructor">out</a> <a id="5052" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5054" href="SessionType.html#1943" class="InductiveConstructor">out</a>

<a id="sub+diverge-&gt;has-empty-trace"></a><a id="5059" href="Discriminator.html#5059" class="Function">sub+diverge-&gt;has-empty-trace</a> <a id="5088" class="Symbol">:</a> <a id="5090" class="Symbol">∀{</a><a id="5092" href="Discriminator.html#5092" class="Bound">T</a> <a id="5094" href="Discriminator.html#5094" class="Bound">S</a><a id="5095" class="Symbol">}</a> <a id="5097" class="Symbol">-&gt;</a> <a id="5100" href="Discriminator.html#5092" class="Bound">T</a> <a id="5102" href="Subtyping.html#2302" class="Function Operator">&lt;:</a> <a id="5105" href="Discriminator.html#5094" class="Bound">S</a> <a id="5107" class="Symbol">-&gt;</a> <a id="5110" href="Discriminator.html#5092" class="Bound">T</a> <a id="5112" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="5114" href="Discriminator.html#5094" class="Bound">S</a> <a id="5116" class="Symbol">-&gt;</a> <a id="5119" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="5127" href="Discriminator.html#5092" class="Bound">T</a> <a id="5129" href="Discriminator.html#5094" class="Bound">S</a> <a id="5131" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="5134" href="Discriminator.html#5059" class="Function">sub+diverge-&gt;has-empty-trace</a> <a id="5163" href="Subtyping.html#1905" class="InductiveConstructor">nil&lt;:any</a> <a id="5172" href="Discriminator.html#5172" class="Bound">div</a> <a id="5176" class="Keyword">with</a> <a id="5181" href="Divergence.html#2125" class="Field">_↑_.with-trace</a> <a id="5196" href="Discriminator.html#5172" class="Bound">div</a>
<a id="5200" class="Symbol">...</a> <a id="5204" class="Symbol">|</a> <a id="5206" href="Discriminator.html#5206" class="Bound">tφ</a> <a id="5209" class="Symbol">=</a> <a id="5211" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="5218" class="Symbol">(</a><a id="5219" href="HasTrace.html#5559" class="Function">nil-has-no-trace</a> <a id="5236" href="Discriminator.html#5206" class="Bound">tφ</a><a id="5238" class="Symbol">)</a>
<a id="5240" href="Discriminator.html#5059" class="Function">sub+diverge-&gt;has-empty-trace</a> <a id="5269" class="Symbol">(</a><a id="5270" href="Subtyping.html#1940" class="InductiveConstructor">end&lt;:def</a> <a id="5279" href="Discriminator.html#5279" class="Bound">e</a> <a id="5281" href="Discriminator.html#5281" class="Bound">def</a><a id="5284" class="Symbol">)</a> <a id="5286" href="Discriminator.html#5286" class="Bound">div</a> <a id="5290" class="Keyword">with</a> <a id="5295" href="Divergence.html#2125" class="Field">_↑_.with-trace</a> <a id="5310" href="Discriminator.html#5286" class="Bound">div</a> <a id="5314" class="Symbol">|</a> <a id="5316" href="Divergence.html#2159" class="Field">_↑_.without-trace</a> <a id="5334" href="Discriminator.html#5286" class="Bound">div</a>
<a id="5338" class="Symbol">...</a> <a id="5342" class="Symbol">|</a> <a id="5344" href="Discriminator.html#5344" class="Bound">tφ</a> <a id="5347" class="Symbol">|</a> <a id="5349" href="Discriminator.html#5349" class="Bound">nsφ</a> <a id="5353" class="Keyword">rewrite</a> <a id="5361" href="HasTrace.html#5674" class="Function">end-has-empty-trace</a> <a id="5381" class="Bound">e</a> <a id="5383" href="Discriminator.html#5344" class="Bound">tφ</a> <a id="5386" class="Symbol">=</a> <a id="5388" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="5395" class="Symbol">(</a><a id="5396" href="Discriminator.html#5349" class="Bound">nsφ</a> <a id="5400" class="Symbol">(</a><a id="5401" href="HasTrace.html#6622" class="Function">defined-&gt;has-empty-trace</a> <a id="5426" class="Bound">def</a><a id="5429" class="Symbol">))</a>
<a id="5432" href="Discriminator.html#5059" class="Function">sub+diverge-&gt;has-empty-trace</a> <a id="5461" class="Symbol">(</a><a id="5462" href="Subtyping.html#2005" class="InductiveConstructor">inp&lt;:inp</a> <a id="5471" class="Symbol">_</a> <a id="5473" class="Symbol">_)</a> <a id="5476" href="Discriminator.html#5476" class="Bound">div</a> <a id="5480" class="Symbol">=</a> <a id="5482" href="Divergence.html#3508" class="InductiveConstructor">inc</a> <a id="5486" class="Symbol">(_</a> <a id="5489" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5491" href="SessionType.html#1911" class="InductiveConstructor">inp</a> <a id="5495" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5497" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="5501" class="Symbol">)</a> <a id="5503" class="Symbol">(_</a> <a id="5506" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5508" href="SessionType.html#1911" class="InductiveConstructor">inp</a> <a id="5512" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5514" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="5518" class="Symbol">)</a> <a id="5520" class="Symbol">λ</a> <a id="5522" class="Symbol">{</a> <a id="5524" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="5529" class="Symbol">→</a> <a id="5531" href="Discriminator.html#5476" class="Bound">div</a> <a id="5535" class="Symbol">}</a>
<a id="5537" href="Discriminator.html#5059" class="Function">sub+diverge-&gt;has-empty-trace</a> <a id="5566" class="Symbol">(</a><a id="5567" href="Subtyping.html#2147" class="InductiveConstructor">out&lt;:out</a> <a id="5576" class="Symbol">_</a> <a id="5578" class="Symbol">_</a> <a id="5580" class="Symbol">_)</a> <a id="5583" href="Discriminator.html#5583" class="Bound">div</a> <a id="5587" class="Symbol">=</a> <a id="5589" href="Divergence.html#3508" class="InductiveConstructor">inc</a> <a id="5593" class="Symbol">(_</a> <a id="5596" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5598" href="SessionType.html#1943" class="InductiveConstructor">out</a> <a id="5602" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5604" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="5608" class="Symbol">)</a> <a id="5610" class="Symbol">(_</a> <a id="5613" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5615" href="SessionType.html#1943" class="InductiveConstructor">out</a> <a id="5619" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5621" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="5625" class="Symbol">)</a> <a id="5627" class="Symbol">λ</a> <a id="5629" class="Symbol">{</a> <a id="5631" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="5636" class="Symbol">→</a> <a id="5638" href="Discriminator.html#5583" class="Bound">div</a> <a id="5642" class="Symbol">}</a>

<a id="discriminator"></a><a id="5645" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="5659" class="Symbol">:</a> <a id="5661" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="5673" class="Symbol">-&gt;</a> <a id="5676" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="5688" class="Symbol">-&gt;</a> <a id="5691" href="SessionType.html#1551" class="Datatype">SessionType</a>
<a id="5703" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="5717" href="Discriminator.html#5717" class="Bound">T</a> <a id="5719" href="Discriminator.html#5719" class="Bound">S</a> <a id="5721" class="Symbol">=</a> <a id="5723" href="Semantics.html#3712" class="Function">decode</a> <a id="5730" class="Symbol">(</a><a id="5731" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="5744" class="Symbol">(</a><a id="5745" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="5765" href="Discriminator.html#5717" class="Bound">T</a> <a id="5767" href="Discriminator.html#5719" class="Bound">S</a><a id="5768" class="Symbol">))</a> <a id="5771" class="Symbol">.</a><a id="5772" href="SessionType.html#1642" class="Field">force</a>

<a id="discriminator-disc-set-sub"></a><a id="5779" href="Discriminator.html#5779" class="Function">discriminator-disc-set-sub</a> <a id="5806" class="Symbol">:</a> <a id="5808" class="Symbol">(</a><a id="5809" href="Discriminator.html#5809" class="Bound">T</a> <a id="5811" href="Discriminator.html#5811" class="Bound">S</a> <a id="5813" class="Symbol">:</a> <a id="5815" href="SessionType.html#1551" class="Datatype">SessionType</a><a id="5826" class="Symbol">)</a> <a id="5828" class="Symbol">-&gt;</a> <a id="5831" href="TraceSet.html#2054" class="Function">CoSet</a> <a id="5837" href="TraceSet.html#1688" class="Function Operator">⟦</a> <a id="5839" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="5853" href="Discriminator.html#5809" class="Bound">T</a> <a id="5855" href="Discriminator.html#5811" class="Bound">S</a> <a id="5857" href="TraceSet.html#1688" class="Function Operator">⟧</a> <a id="5859" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="5861" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="5869" href="Discriminator.html#5809" class="Bound">T</a> <a id="5871" href="Discriminator.html#5811" class="Bound">S</a>
<a id="5873" href="Discriminator.html#5779" class="Function">discriminator-disc-set-sub</a> <a id="5900" href="Discriminator.html#5900" class="Bound">T</a> <a id="5902" href="Discriminator.html#5902" class="Bound">S</a> <a id="5904" href="Discriminator.html#5904" class="Bound">rφ</a> <a id="5907" class="Symbol">=</a>
  <a id="5911" href="TraceSet.html#2643" class="Function">co-inversion</a> <a id="5924" class="Symbol">{</a><a id="5925" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="5933" href="Discriminator.html#5900" class="Bound">T</a> <a id="5935" href="Discriminator.html#5902" class="Bound">S</a><a id="5936" class="Symbol">}</a> <a id="5938" class="Symbol">(</a><a id="5939" href="Semantics.html#3950" class="Function">decode-sub</a> <a id="5950" class="Symbol">(</a><a id="5951" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="5964" class="Symbol">(</a><a id="5965" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="5985" href="Discriminator.html#5900" class="Bound">T</a> <a id="5987" href="Discriminator.html#5902" class="Bound">S</a><a id="5988" class="Symbol">))</a> <a id="5991" href="Discriminator.html#5904" class="Bound">rφ</a><a id="5993" class="Symbol">)</a>

<a id="discriminator-disc-set-sup"></a><a id="5996" href="Discriminator.html#5996" class="Function">discriminator-disc-set-sup</a> <a id="6023" class="Symbol">:</a> <a id="6025" class="Symbol">(</a><a id="6026" href="Discriminator.html#6026" class="Bound">T</a> <a id="6028" href="Discriminator.html#6028" class="Bound">S</a> <a id="6030" class="Symbol">:</a> <a id="6032" href="SessionType.html#1551" class="Datatype">SessionType</a><a id="6043" class="Symbol">)</a> <a id="6045" class="Symbol">-&gt;</a> <a id="6048" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="6056" href="Discriminator.html#6026" class="Bound">T</a> <a id="6058" href="Discriminator.html#6028" class="Bound">S</a> <a id="6060" href="Relation.Unary.html#1742" class="Function Operator">⊆</a> <a id="6062" href="TraceSet.html#2054" class="Function">CoSet</a> <a id="6068" href="TraceSet.html#1688" class="Function Operator">⟦</a> <a id="6070" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="6084" href="Discriminator.html#6026" class="Bound">T</a> <a id="6086" href="Discriminator.html#6028" class="Bound">S</a> <a id="6088" href="TraceSet.html#1688" class="Function Operator">⟧</a>
<a id="6090" href="Discriminator.html#5996" class="Function">discriminator-disc-set-sup</a> <a id="6117" href="Discriminator.html#6117" class="Bound">T</a> <a id="6119" href="Discriminator.html#6119" class="Bound">S</a> <a id="6121" href="Discriminator.html#6121" class="Bound">dφ</a> <a id="6124" class="Symbol">=</a>
  <a id="6128" href="Semantics.html#4604" class="Function">decode-sup</a> <a id="6139" class="Symbol">(</a><a id="6140" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="6153" class="Symbol">(</a><a id="6154" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="6174" href="Discriminator.html#6117" class="Bound">T</a> <a id="6176" href="Discriminator.html#6119" class="Bound">S</a><a id="6177" class="Symbol">))</a> <a id="6180" class="Symbol">(</a><a id="6181" href="TraceSet.html#2526" class="Function">co-definition</a> <a id="6195" class="Symbol">{</a><a id="6196" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="6204" href="Discriminator.html#6117" class="Bound">T</a> <a id="6206" href="Discriminator.html#6119" class="Bound">S</a><a id="6207" class="Symbol">}</a> <a id="6209" href="Discriminator.html#6121" class="Bound">dφ</a><a id="6211" class="Symbol">)</a>

<a id="sub+diverge-&gt;discriminator-defined"></a><a id="6214" href="Discriminator.html#6214" class="Function">sub+diverge-&gt;discriminator-defined</a> <a id="6249" class="Symbol">:</a> <a id="6251" class="Symbol">∀{</a><a id="6253" href="Discriminator.html#6253" class="Bound">T</a> <a id="6255" href="Discriminator.html#6255" class="Bound">S</a><a id="6256" class="Symbol">}</a> <a id="6258" class="Symbol">-&gt;</a> <a id="6261" href="Discriminator.html#6253" class="Bound">T</a> <a id="6263" href="Subtyping.html#2302" class="Function Operator">&lt;:</a> <a id="6266" href="Discriminator.html#6255" class="Bound">S</a> <a id="6268" class="Symbol">-&gt;</a> <a id="6271" href="Discriminator.html#6253" class="Bound">T</a> <a id="6273" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="6275" href="Discriminator.html#6255" class="Bound">S</a> <a id="6277" class="Symbol">-&gt;</a> <a id="6280" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="6288" class="Symbol">(</a><a id="6289" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="6303" href="Discriminator.html#6253" class="Bound">T</a> <a id="6305" href="Discriminator.html#6255" class="Bound">S</a><a id="6306" class="Symbol">)</a>
<a id="6308" href="Discriminator.html#6214" class="Function">sub+diverge-&gt;discriminator-defined</a> <a id="6343" class="Symbol">{</a><a id="6344" href="Discriminator.html#6344" class="Bound">T</a><a id="6345" class="Symbol">}</a> <a id="6347" class="Symbol">{</a><a id="6348" href="Discriminator.html#6348" class="Bound">S</a><a id="6349" class="Symbol">}</a> <a id="6351" href="Discriminator.html#6351" class="Bound">sub</a> <a id="6355" href="Discriminator.html#6355" class="Bound">div</a> <a id="6359" class="Symbol">=</a>
  <a id="6363" href="HasTrace.html#2785" class="Function">has-trace-&gt;defined</a> <a id="6382" class="Symbol">(</a><a id="6383" href="TraceSet.html#2344" class="Function">co-set-right-&gt;left</a> <a id="6402" class="Symbol">{</a><a id="6403" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="6411" href="Discriminator.html#6344" class="Bound">T</a> <a id="6413" href="Discriminator.html#6348" class="Bound">S</a><a id="6414" class="Symbol">}</a> <a id="6416" class="Symbol">{</a><a id="6417" href="TraceSet.html#1688" class="Function Operator">⟦</a> <a id="6419" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="6433" href="Discriminator.html#6344" class="Bound">T</a> <a id="6435" href="Discriminator.html#6348" class="Bound">S</a> <a id="6437" href="TraceSet.html#1688" class="Function Operator">⟧</a><a id="6438" class="Symbol">}</a> <a id="6440" class="Symbol">(</a><a id="6441" href="Discriminator.html#5996" class="Function">discriminator-disc-set-sup</a> <a id="6468" href="Discriminator.html#6344" class="Bound">T</a> <a id="6470" href="Discriminator.html#6348" class="Bound">S</a><a id="6471" class="Symbol">)</a> <a id="6473" class="Symbol">(</a><a id="6474" href="TraceSet.html#2526" class="Function">co-definition</a> <a id="6488" class="Symbol">{</a><a id="6489" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="6497" href="Discriminator.html#6344" class="Bound">T</a> <a id="6499" href="Discriminator.html#6348" class="Bound">S</a><a id="6500" class="Symbol">}</a> <a id="6502" class="Symbol">{</a><a id="6503" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="6505" class="Symbol">}</a> <a id="6507" class="Symbol">(</a><a id="6508" href="Discriminator.html#5059" class="Function">sub+diverge-&gt;has-empty-trace</a> <a id="6537" href="Discriminator.html#6351" class="Bound">sub</a> <a id="6541" href="Discriminator.html#6355" class="Bound">div</a><a id="6544" class="Symbol">)))</a>

<a id="input-does-not-win"></a><a id="6549" href="Discriminator.html#6549" class="Function">input-does-not-win</a> <a id="6568" class="Symbol">:</a>
  <a id="6572" class="Symbol">∀{</a><a id="6574" href="Discriminator.html#6574" class="Bound">T</a> <a id="6576" href="Discriminator.html#6576" class="Bound">S</a> <a id="6578" href="Discriminator.html#6578" class="Bound">φ</a> <a id="6580" href="Discriminator.html#6580" class="Bound">x</a><a id="6581" class="Symbol">}</a> <a id="6583" class="Symbol">(</a><a id="6584" href="Discriminator.html#6584" class="Bound">tφ</a> <a id="6587" class="Symbol">:</a> <a id="6589" href="Discriminator.html#6574" class="Bound">T</a> <a id="6591" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="6600" href="Discriminator.html#6578" class="Bound">φ</a><a id="6601" class="Symbol">)</a> <a id="6603" class="Symbol">-&gt;</a> <a id="6606" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="6618" href="Discriminator.html#6574" class="Bound">T</a> <a id="6620" class="Symbol">(</a><a id="6621" href="Discriminator.html#6578" class="Bound">φ</a> <a id="6623" href="Data.List.Base.html#9641" class="Function Operator">∷ʳ</a> <a id="6626" href="Action.html#1370" class="InductiveConstructor">I</a> <a id="6628" href="Discriminator.html#6580" class="Bound">x</a><a id="6629" class="Symbol">)</a> <a id="6631" href="Discriminator.html#6576" class="Bound">S</a> <a id="6633" class="Symbol">-&gt;</a> <a id="6636" href="Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="6638" href="SessionType.html#2979" class="Datatype">Win</a> <a id="6642" class="Symbol">(</a><a id="6643" href="HasTrace.html#1664" class="Function">after</a> <a id="6649" href="Discriminator.html#6584" class="Bound">tφ</a><a id="6651" class="Symbol">)</a>
<a id="6653" href="Discriminator.html#6549" class="Function">input-does-not-win</a> <a id="6672" class="Symbol">(_</a> <a id="6675" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6677" class="Symbol">_</a> <a id="6679" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6681" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="6685" class="Symbol">)</a> <a id="6687" class="Symbol">(</a><a id="6688" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="6693" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="6697" class="Symbol">_)</a> <a id="6700" class="Symbol">()</a>
<a id="6703" href="Discriminator.html#6549" class="Function">input-does-not-win</a> <a id="6722" class="Symbol">(_</a> <a id="6725" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6727" href="Discriminator.html#6727" class="Bound">def</a> <a id="6731" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6733" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="6738" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="6742" href="Discriminator.html#6742" class="Bound">tr</a><a id="6744" class="Symbol">)</a> <a id="6746" class="Symbol">(</a><a id="6747" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="6752" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="6756" href="Discriminator.html#6756" class="Bound">sr</a><a id="6758" class="Symbol">)</a> <a id="6760" href="Discriminator.html#6760" class="Bound">w</a> <a id="6762" class="Symbol">=</a> <a id="6764" href="Discriminator.html#6549" class="Function">input-does-not-win</a> <a id="6783" class="Symbol">(_</a> <a id="6786" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6788" href="Discriminator.html#6727" class="Bound">def</a> <a id="6792" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6794" href="Discriminator.html#6742" class="Bound">tr</a><a id="6796" class="Symbol">)</a> <a id="6798" href="Discriminator.html#6756" class="Bound">sr</a> <a id="6801" href="Discriminator.html#6760" class="Bound">w</a>
<a id="6803" href="Discriminator.html#6549" class="Function">input-does-not-win</a> <a id="6822" class="Symbol">(_</a> <a id="6825" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6827" href="Discriminator.html#6827" class="Bound">def</a> <a id="6831" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6833" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="6838" class="Symbol">(</a><a id="6839" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="6843" class="Symbol">_)</a> <a id="6846" href="Discriminator.html#6846" class="Bound">tr</a><a id="6848" class="Symbol">)</a> <a id="6850" class="Symbol">(</a><a id="6851" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="6856" class="Symbol">(</a><a id="6857" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="6861" class="Symbol">_)</a> <a id="6864" href="Discriminator.html#6864" class="Bound">sr</a><a id="6866" class="Symbol">)</a> <a id="6868" href="Discriminator.html#6868" class="Bound">w</a> <a id="6870" class="Symbol">=</a> <a id="6872" href="Discriminator.html#6549" class="Function">input-does-not-win</a> <a id="6891" class="Symbol">(_</a> <a id="6894" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6896" href="Discriminator.html#6827" class="Bound">def</a> <a id="6900" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6902" href="Discriminator.html#6846" class="Bound">tr</a><a id="6904" class="Symbol">)</a> <a id="6906" href="Discriminator.html#6864" class="Bound">sr</a> <a id="6909" href="Discriminator.html#6868" class="Bound">w</a>

<a id="ends-with-output-&gt;has-trace"></a><a id="6912" href="Discriminator.html#6912" class="Function">ends-with-output-&gt;has-trace</a> <a id="6940" class="Symbol">:</a> <a id="6942" class="Symbol">∀{</a><a id="6944" href="Discriminator.html#6944" class="Bound">T</a> <a id="6946" href="Discriminator.html#6946" class="Bound">S</a> <a id="6948" href="Discriminator.html#6948" class="Bound">φ</a> <a id="6950" href="Discriminator.html#6950" class="Bound">x</a><a id="6951" class="Symbol">}</a> <a id="6953" class="Symbol">-&gt;</a> <a id="6956" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="6968" href="Discriminator.html#6944" class="Bound">T</a> <a id="6970" class="Symbol">(</a><a id="6971" href="Discriminator.html#6948" class="Bound">φ</a> <a id="6973" href="Data.List.Base.html#9641" class="Function Operator">∷ʳ</a> <a id="6976" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="6978" href="Discriminator.html#6950" class="Bound">x</a><a id="6979" class="Symbol">)</a> <a id="6981" href="Discriminator.html#6946" class="Bound">S</a> <a id="6983" class="Symbol">-&gt;</a> <a id="6986" href="Discriminator.html#6944" class="Bound">T</a> <a id="6988" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="6997" class="Symbol">(</a><a id="6998" href="Discriminator.html#6948" class="Bound">φ</a> <a id="7000" href="Data.List.Base.html#9641" class="Function Operator">∷ʳ</a> <a id="7003" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="7005" href="Discriminator.html#6950" class="Bound">x</a><a id="7006" class="Symbol">)</a>
<a id="7008" href="Discriminator.html#6912" class="Function">ends-with-output-&gt;has-trace</a> <a id="7036" href="Discriminator.html#7036" class="Bound">tr</a> <a id="7039" class="Symbol">=</a> <a id="7041" class="Symbol">_</a> <a id="7043" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7045" href="Transitions.html#2216" class="Function">output-transitions-&gt;defined</a> <a id="7073" href="Discriminator.html#7036" class="Bound">tr</a> <a id="7076" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7078" href="Discriminator.html#7036" class="Bound">tr</a>

<a id="co-trace-swap"></a><a id="7082" href="Discriminator.html#7082" class="Function">co-trace-swap</a> <a id="7096" class="Symbol">:</a> <a id="7098" class="Symbol">∀{</a><a id="7100" href="Discriminator.html#7100" class="Bound">φ</a> <a id="7102" href="Discriminator.html#7102" class="Bound">ψ</a><a id="7103" class="Symbol">}</a> <a id="7105" class="Symbol">-&gt;</a> <a id="7108" href="Trace.html#1586" class="Function">co-trace</a> <a id="7117" href="Discriminator.html#7100" class="Bound">φ</a> <a id="7119" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7121" href="Discriminator.html#7102" class="Bound">ψ</a> <a id="7123" class="Symbol">-&gt;</a> <a id="7126" href="Discriminator.html#7100" class="Bound">φ</a> <a id="7128" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7130" href="Trace.html#1586" class="Function">co-trace</a> <a id="7139" href="Discriminator.html#7102" class="Bound">ψ</a>
<a id="7141" href="Discriminator.html#7082" class="Function">co-trace-swap</a> <a id="7155" class="Symbol">{</a><a id="7156" href="Discriminator.html#7156" class="Bound">φ</a><a id="7157" class="Symbol">}</a> <a id="7159" href="Discriminator.html#7159" class="Bound">eq</a> <a id="7162" class="Keyword">rewrite</a> <a id="7170" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a> <a id="7174" href="Discriminator.html#7159" class="Bound">eq</a> <a id="7177" class="Keyword">rewrite</a> <a id="7185" href="Trace.html#1648" class="Function">co-trace-involution</a> <a id="7205" href="Discriminator.html#7156" class="Bound">φ</a> <a id="7207" class="Symbol">=</a> <a id="7209" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="co-trace-swap-⊑"></a><a id="7215" href="Discriminator.html#7215" class="Function">co-trace-swap-⊑</a> <a id="7231" class="Symbol">:</a> <a id="7233" class="Symbol">∀{</a><a id="7235" href="Discriminator.html#7235" class="Bound">φ</a> <a id="7237" href="Discriminator.html#7237" class="Bound">ψ</a><a id="7238" class="Symbol">}</a> <a id="7240" class="Symbol">-&gt;</a> <a id="7243" href="Trace.html#1586" class="Function">co-trace</a> <a id="7252" href="Discriminator.html#7235" class="Bound">φ</a> <a id="7254" href="Trace.html#2275" class="Datatype Operator">⊑</a> <a id="7256" href="Discriminator.html#7237" class="Bound">ψ</a> <a id="7258" class="Symbol">-&gt;</a> <a id="7261" href="Discriminator.html#7235" class="Bound">φ</a> <a id="7263" href="Trace.html#2275" class="Datatype Operator">⊑</a> <a id="7265" href="Trace.html#1586" class="Function">co-trace</a> <a id="7274" href="Discriminator.html#7237" class="Bound">ψ</a>
<a id="7276" href="Discriminator.html#7215" class="Function">co-trace-swap-⊑</a> <a id="7292" class="Symbol">{</a><a id="7293" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="7295" class="Symbol">}</a> <a id="7297" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="7302" class="Symbol">=</a> <a id="7304" href="Trace.html#2311" class="InductiveConstructor">none</a>
<a id="7309" href="Discriminator.html#7215" class="Function">co-trace-swap-⊑</a> <a id="7325" class="Symbol">{</a><a id="7326" href="Discriminator.html#7326" class="Bound">α</a> <a id="7328" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="7330" class="Symbol">_}</a> <a id="7333" class="Symbol">(</a><a id="7334" href="Trace.html#2339" class="InductiveConstructor">some</a> <a id="7339" href="Discriminator.html#7339" class="Bound">le</a><a id="7341" class="Symbol">)</a> <a id="7343" class="Keyword">rewrite</a> <a id="7351" href="Action.html#1775" class="Function">co-action-involution</a> <a id="7372" href="Discriminator.html#7326" class="Bound">α</a> <a id="7374" class="Symbol">=</a> <a id="7376" href="Trace.html#2339" class="InductiveConstructor">some</a> <a id="7381" class="Symbol">(</a><a id="7382" href="Discriminator.html#7215" class="Function">co-trace-swap-⊑</a> <a id="7398" href="Discriminator.html#7339" class="Bound">le</a><a id="7400" class="Symbol">)</a>

<a id="co-complete"></a><a id="7403" href="Discriminator.html#7403" class="Function">co-complete</a> <a id="7415" class="Symbol">:</a> <a id="7417" class="Symbol">∀{</a><a id="7419" href="Discriminator.html#7419" class="Bound">X</a> <a id="7421" href="Discriminator.html#7421" class="Bound">φ</a><a id="7422" class="Symbol">}</a> <a id="7424" class="Symbol">-&gt;</a> <a id="7427" href="Discriminator.html#7421" class="Bound">φ</a> <a id="7429" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7431" href="TraceSet.html#2790" class="Datatype">Complete</a> <a id="7440" href="Discriminator.html#7419" class="Bound">X</a> <a id="7442" class="Symbol">-&gt;</a> <a id="7445" href="Trace.html#1586" class="Function">co-trace</a> <a id="7454" href="Discriminator.html#7421" class="Bound">φ</a> <a id="7456" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7458" href="TraceSet.html#2790" class="Datatype">Complete</a> <a id="7467" class="Symbol">(</a><a id="7468" href="TraceSet.html#2054" class="Function">CoSet</a> <a id="7474" href="Discriminator.html#7419" class="Bound">X</a><a id="7475" class="Symbol">)</a>
<a id="7477" href="Discriminator.html#7403" class="Function">co-complete</a> <a id="7489" class="Symbol">{</a><a id="7490" href="Discriminator.html#7490" class="Bound">X</a><a id="7491" class="Symbol">}</a> <a id="7493" class="Symbol">(</a><a id="7494" href="TraceSet.html#2834" class="InductiveConstructor">complete</a> <a id="7503" href="Discriminator.html#7503" class="Bound">xφ</a> <a id="7506" href="Discriminator.html#7506" class="Bound">F</a><a id="7507" class="Symbol">)</a> <a id="7509" class="Symbol">=</a>
  <a id="7513" href="TraceSet.html#2834" class="InductiveConstructor">complete</a> <a id="7522" class="Symbol">(</a><a id="7523" href="TraceSet.html#2526" class="Function">co-definition</a> <a id="7537" class="Symbol">{</a><a id="7538" href="Discriminator.html#7490" class="Bound">X</a><a id="7539" class="Symbol">}</a> <a id="7541" href="Discriminator.html#7503" class="Bound">xφ</a><a id="7543" class="Symbol">)</a> <a id="7545" class="Symbol">λ</a> <a id="7547" href="Discriminator.html#7547" class="Bound">le</a> <a id="7550" href="Discriminator.html#7550" class="Bound">xψ</a> <a id="7553" class="Symbol">-&gt;</a> <a id="7556" class="Keyword">let</a> <a id="7560" href="Discriminator.html#7560" class="Bound">le&#39;</a> <a id="7564" class="Symbol">=</a> <a id="7566" href="Discriminator.html#7215" class="Function">co-trace-swap-⊑</a> <a id="7582" href="Discriminator.html#7547" class="Bound">le</a> <a id="7585" class="Keyword">in</a>
                                             <a id="7633" class="Keyword">let</a> <a id="7637" href="Discriminator.html#7637" class="Bound">eq</a> <a id="7640" class="Symbol">=</a> <a id="7642" href="Discriminator.html#7506" class="Bound">F</a> <a id="7644" href="Discriminator.html#7560" class="Bound">le&#39;</a> <a id="7648" href="Discriminator.html#7550" class="Bound">xψ</a> <a id="7651" class="Keyword">in</a>
                                             <a id="7699" href="Discriminator.html#7082" class="Function">co-trace-swap</a> <a id="7713" href="Discriminator.html#7637" class="Bound">eq</a>

<a id="co-complete-2"></a><a id="7717" href="Discriminator.html#7717" class="Function">co-complete-2</a> <a id="7731" class="Symbol">:</a> <a id="7733" class="Symbol">∀{</a><a id="7735" href="Discriminator.html#7735" class="Bound">X</a> <a id="7737" href="Discriminator.html#7737" class="Bound">φ</a><a id="7738" class="Symbol">}</a> <a id="7740" class="Symbol">-&gt;</a> <a id="7743" href="Trace.html#1586" class="Function">co-trace</a> <a id="7752" href="Discriminator.html#7737" class="Bound">φ</a> <a id="7754" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7756" href="TraceSet.html#2790" class="Datatype">Complete</a> <a id="7765" class="Symbol">(</a><a id="7766" href="TraceSet.html#2054" class="Function">CoSet</a> <a id="7772" href="Discriminator.html#7735" class="Bound">X</a><a id="7773" class="Symbol">)</a> <a id="7775" class="Symbol">-&gt;</a> <a id="7778" href="Discriminator.html#7737" class="Bound">φ</a> <a id="7780" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="7782" href="TraceSet.html#2790" class="Datatype">Complete</a> <a id="7791" href="Discriminator.html#7735" class="Bound">X</a>
<a id="7793" href="Discriminator.html#7717" class="Function">co-complete-2</a> <a id="7807" class="Symbol">{</a><a id="7808" href="Discriminator.html#7808" class="Bound">X</a><a id="7809" class="Symbol">}</a> <a id="7811" class="Symbol">(</a><a id="7812" href="TraceSet.html#2834" class="InductiveConstructor">complete</a> <a id="7821" href="Discriminator.html#7821" class="Bound">wit</a> <a id="7825" href="Discriminator.html#7825" class="Bound">F</a><a id="7826" class="Symbol">)</a> <a id="7828" class="Symbol">=</a>
  <a id="7832" href="TraceSet.html#2834" class="InductiveConstructor">complete</a> <a id="7841" class="Symbol">(</a><a id="7842" href="TraceSet.html#2643" class="Function">co-inversion</a> <a id="7855" class="Symbol">{</a><a id="7856" href="Discriminator.html#7808" class="Bound">X</a><a id="7857" class="Symbol">}</a> <a id="7859" href="Discriminator.html#7821" class="Bound">wit</a><a id="7862" class="Symbol">)</a> <a id="7864" class="Symbol">λ</a> <a id="7866" href="Discriminator.html#7866" class="Bound">le</a> <a id="7869" href="Discriminator.html#7869" class="Bound">xψ</a> <a id="7872" class="Symbol">-&gt;</a> <a id="7875" class="Keyword">let</a> <a id="7879" href="Discriminator.html#7879" class="Bound">le&#39;</a> <a id="7883" class="Symbol">=</a> <a id="7885" href="Trace.html#2798" class="Function">⊑-co-trace</a> <a id="7896" href="Discriminator.html#7866" class="Bound">le</a> <a id="7899" class="Keyword">in</a>
                                             <a id="7947" class="Keyword">let</a> <a id="7951" href="Discriminator.html#7951" class="Bound">eq</a> <a id="7954" class="Symbol">=</a> <a id="7956" href="Discriminator.html#7825" class="Bound">F</a> <a id="7958" href="Discriminator.html#7879" class="Bound">le&#39;</a> <a id="7962" class="Symbol">(</a><a id="7963" href="TraceSet.html#2526" class="Function">co-definition</a> <a id="7977" class="Symbol">{</a><a id="7978" href="Discriminator.html#7808" class="Bound">X</a><a id="7979" class="Symbol">}</a> <a id="7981" href="Discriminator.html#7869" class="Bound">xψ</a><a id="7983" class="Symbol">)</a> <a id="7985" class="Keyword">in</a>
                                             <a id="8033" href="Trace.html#2002" class="Function">co-trace-injective</a> <a id="8052" href="Discriminator.html#7951" class="Bound">eq</a>

<a id="co-trace-&gt;co-set"></a><a id="8056" href="Discriminator.html#8056" class="Function">co-trace-&gt;co-set</a> <a id="8073" class="Symbol">:</a> <a id="8075" class="Symbol">∀{</a><a id="8077" href="Discriminator.html#8077" class="Bound">X</a> <a id="8079" href="Discriminator.html#8079" class="Bound">φ</a><a id="8080" class="Symbol">}</a> <a id="8082" class="Symbol">-&gt;</a> <a id="8085" href="Trace.html#1586" class="Function">co-trace</a> <a id="8094" href="Discriminator.html#8079" class="Bound">φ</a> <a id="8096" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="8098" href="TraceSet.html#2790" class="Datatype">Complete</a> <a id="8107" href="Discriminator.html#8077" class="Bound">X</a> <a id="8109" class="Symbol">-&gt;</a> <a id="8112" href="Discriminator.html#8079" class="Bound">φ</a> <a id="8114" href="Relation.Unary.html#1523" class="Function Operator">∈</a> <a id="8116" href="TraceSet.html#2790" class="Datatype">Complete</a> <a id="8125" class="Symbol">(</a><a id="8126" href="TraceSet.html#2054" class="Function">CoSet</a> <a id="8132" href="Discriminator.html#8077" class="Bound">X</a><a id="8133" class="Symbol">)</a>
<a id="8135" href="Discriminator.html#8056" class="Function">co-trace-&gt;co-set</a> <a id="8152" class="Symbol">{_}</a> <a id="8156" class="Symbol">{</a><a id="8157" href="Discriminator.html#8157" class="Bound">φ</a><a id="8158" class="Symbol">}</a> <a id="8160" href="Discriminator.html#8160" class="Bound">cxφ</a> <a id="8164" class="Keyword">with</a> <a id="8169" href="Discriminator.html#7403" class="Function">co-complete</a> <a id="8181" href="Discriminator.html#8160" class="Bound">cxφ</a>
<a id="8185" class="Symbol">...</a> <a id="8189" class="Symbol">|</a> <a id="8191" href="Discriminator.html#8191" class="Bound">res</a> <a id="8195" class="Keyword">rewrite</a> <a id="8203" href="Trace.html#1648" class="Function">co-trace-involution</a> <a id="8223" class="Bound">φ</a> <a id="8225" class="Symbol">=</a> <a id="8227" href="Discriminator.html#8191" class="Bound">res</a>

<a id="discriminator-after-sync-&gt;defined"></a><a id="8232" href="Discriminator.html#8232" class="Function">discriminator-after-sync-&gt;defined</a> <a id="8266" class="Symbol">:</a>
  <a id="8270" class="Symbol">∀{</a><a id="8272" href="Discriminator.html#8272" class="Bound">R</a> <a id="8274" href="Discriminator.html#8274" class="Bound">T</a> <a id="8276" href="Discriminator.html#8276" class="Bound">S</a> <a id="8278" href="Discriminator.html#8278" class="Bound">T&#39;</a> <a id="8281" href="Discriminator.html#8281" class="Bound">φ</a><a id="8282" class="Symbol">}</a> <a id="8284" class="Symbol">-&gt;</a>
  <a id="8289" href="Discriminator.html#8274" class="Bound">T</a> <a id="8291" href="Subtyping.html#2302" class="Function Operator">&lt;:</a> <a id="8294" href="Discriminator.html#8276" class="Bound">S</a> <a id="8296" class="Symbol">-&gt;</a>
  <a id="8301" class="Symbol">(</a><a id="8302" href="Discriminator.html#8302" class="Bound">rdef</a> <a id="8307" class="Symbol">:</a> <a id="8309" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="8317" class="Symbol">(</a><a id="8318" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="8332" href="Discriminator.html#8274" class="Bound">T</a> <a id="8334" href="Discriminator.html#8276" class="Bound">S</a><a id="8335" class="Symbol">))</a>
  <a id="8340" class="Symbol">(</a><a id="8341" href="Discriminator.html#8341" class="Bound">rr</a> <a id="8344" class="Symbol">:</a> <a id="8346" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="8358" class="Symbol">(</a><a id="8359" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="8373" href="Discriminator.html#8274" class="Bound">T</a> <a id="8375" href="Discriminator.html#8276" class="Bound">S</a><a id="8376" class="Symbol">)</a> <a id="8378" class="Symbol">(</a><a id="8379" href="Trace.html#1586" class="Function">co-trace</a> <a id="8388" href="Discriminator.html#8281" class="Bound">φ</a><a id="8389" class="Symbol">)</a> <a id="8391" href="Discriminator.html#8272" class="Bound">R</a><a id="8392" class="Symbol">)</a>
  <a id="8396" class="Symbol">(</a><a id="8397" href="Discriminator.html#8397" class="Bound">tr</a> <a id="8400" class="Symbol">:</a> <a id="8402" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="8414" href="Discriminator.html#8274" class="Bound">T</a> <a id="8416" href="Discriminator.html#8281" class="Bound">φ</a> <a id="8418" href="Discriminator.html#8278" class="Bound">T&#39;</a><a id="8420" class="Symbol">)</a> <a id="8422" class="Symbol">-&gt;</a>
  <a id="8427" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="8435" href="Discriminator.html#8272" class="Bound">R</a>
<a id="8437" href="Discriminator.html#8232" class="Function">discriminator-after-sync-&gt;defined</a> <a id="8471" class="Symbol">{</a><a id="8472" href="Discriminator.html#8472" class="Bound">R</a><a id="8473" class="Symbol">}</a> <a id="8475" class="Symbol">{</a><a id="8476" href="Discriminator.html#8476" class="Bound">T</a><a id="8477" class="Symbol">}</a> <a id="8479" class="Symbol">{</a><a id="8480" href="Discriminator.html#8480" class="Bound">S</a><a id="8481" class="Symbol">}</a> <a id="8483" href="Discriminator.html#8483" class="Bound">sub</a> <a id="8487" href="Discriminator.html#8487" class="Bound">rdef</a> <a id="8492" href="Discriminator.html#8492" class="Bound">rr</a> <a id="8495" href="Discriminator.html#8495" class="Bound">tr</a> <a id="8498" class="Keyword">with</a> <a id="8503" href="SessionType.html#1974" class="Function">Defined?</a> <a id="8512" href="Discriminator.html#8472" class="Bound">R</a>
<a id="8514" class="Symbol">...</a> <a id="8518" class="Symbol">|</a> <a id="8520" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="8524" href="Discriminator.html#8524" class="Bound">rdef&#39;</a> <a id="8530" class="Symbol">=</a> <a id="8532" href="Discriminator.html#8524" class="Bound">rdef&#39;</a>
<a id="8538" class="Symbol">...</a> <a id="8542" class="Symbol">|</a> <a id="8544" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="8547" href="Discriminator.html#8547" class="Bound">nrdef&#39;</a> <a id="8554" class="Keyword">with</a> <a id="8559" href="Discriminator.html#3860" class="Function">defined-becomes-nil</a> <a id="8579" class="Bound">rdef</a> <a id="8584" href="Discriminator.html#8547" class="Bound">nrdef&#39;</a> <a id="8591" class="Bound">rr</a>
<a id="8594" class="Symbol">...</a> <a id="8598" class="Symbol">|</a> <a id="8600" href="Discriminator.html#8600" class="Bound">ψ</a> <a id="8602" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8604" href="Discriminator.html#8604" class="Bound">x</a> <a id="8606" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8608" href="Discriminator.html#8608" class="Bound">eq</a> <a id="8611" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8613" href="Discriminator.html#8613" class="Bound">rψ</a> <a id="8616" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8618" href="Discriminator.html#8618" class="Bound">nrφ</a> <a id="8622" class="Keyword">rewrite</a> <a id="8630" href="Discriminator.html#8608" class="Bound">eq</a> <a id="8633" class="Keyword">with</a> <a id="8638" href="Discriminator.html#6549" class="Function">input-does-not-win</a> <a id="8657" href="Discriminator.html#8613" class="Bound">rψ</a> <a id="8660" class="Bound">rr</a>
<a id="8663" class="Symbol">...</a> <a id="8667" class="Symbol">|</a> <a id="8669" href="Discriminator.html#8669" class="Bound">nwin</a> <a id="8674" class="Keyword">with</a> <a id="8679" href="Relation.Nullary.Negation.html#929" class="Function">contraposition</a> <a id="8694" class="Symbol">(</a><a id="8695" href="Semantics.html#5359" class="Function">decode+complete-&gt;win</a> <a id="8716" class="Symbol">(</a><a id="8717" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="8730" class="Symbol">(</a><a id="8731" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="8751" class="Bound">T</a> <a id="8753" class="Bound">S</a><a id="8754" class="Symbol">))</a> <a id="8757" class="Bound">rψ</a><a id="8759" class="Symbol">)</a> <a id="8761" href="Discriminator.html#8669" class="Bound">nwin</a>
<a id="8766" class="Symbol">...</a> <a id="8770" class="Symbol">|</a> <a id="8772" href="Discriminator.html#8772" class="Bound">ncψ</a> <a id="8776" class="Keyword">with</a> <a id="8781" href="Semantics.html#3950" class="Function">decode-sub</a> <a id="8792" class="Symbol">(</a><a id="8793" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="8806" class="Symbol">(</a><a id="8807" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="8827" class="Bound">T</a> <a id="8829" class="Bound">S</a><a id="8830" class="Symbol">))</a> <a id="8833" class="Bound">rψ</a>
<a id="8836" class="Symbol">...</a> <a id="8840" class="Symbol">|</a> <a id="8842" href="Discriminator.html#8842" class="Bound">dsψ</a> <a id="8846" class="Keyword">with</a> <a id="8851" href="Relation.Nullary.Negation.html#929" class="Function">contraposition</a> <a id="8866" class="Symbol">(</a><a id="8867" href="Divergence.html#9634" class="Function">disc-set-complete-1</a> <a id="8887" href="Discriminator.html#8842" class="Bound">dsψ</a><a id="8890" class="Symbol">)</a> <a id="8892" class="Symbol">(</a><a id="8893" href="Relation.Nullary.Negation.html#929" class="Function">contraposition</a> <a id="8908" href="Discriminator.html#8056" class="Function">co-trace-&gt;co-set</a> <a id="8925" class="Bound">ncψ</a><a id="8928" class="Symbol">)</a>
<a id="8930" class="Symbol">...</a> <a id="8934" class="Symbol">|</a> <a id="8936" href="Discriminator.html#8936" class="Bound">nnsψ</a> <a id="8941" class="Keyword">with</a> <a id="8946" href="HasTrace.html#6777" class="Function">has-trace-double-negation</a> <a id="8972" href="Discriminator.html#8936" class="Bound">nnsψ</a>
<a id="8977" class="Symbol">...</a> <a id="8981" class="Symbol">|</a> <a id="8983" href="Discriminator.html#8983" class="Bound">sψ</a> <a id="8986" class="Keyword">with</a> <a id="8991" class="Keyword">let</a> <a id="8995" href="Discriminator.html#8995" class="Bound">tr&#39;</a> <a id="8999" class="Symbol">=</a> <a id="9001" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a> <a id="9007" class="Symbol">(λ</a> <a id="9010" href="Discriminator.html#9010" class="Bound">z</a> <a id="9012" class="Symbol">-&gt;</a> <a id="9015" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="9027" class="Symbol">_</a> <a id="9029" href="Discriminator.html#9010" class="Bound">z</a> <a id="9031" class="Symbol">_)</a> <a id="9034" class="Symbol">(</a><a id="9035" href="Discriminator.html#7082" class="Function">co-trace-swap</a> <a id="9049" class="Bound">eq</a><a id="9051" class="Symbol">)</a> <a id="9053" class="Bound">tr</a> <a id="9056" class="Keyword">in</a>
              <a id="9073" class="Keyword">let</a> <a id="9077" href="Discriminator.html#9077" class="Bound">tr&#39;&#39;</a> <a id="9082" class="Symbol">=</a> <a id="9084" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a> <a id="9090" class="Symbol">(λ</a> <a id="9093" href="Discriminator.html#9093" class="Bound">z</a> <a id="9095" class="Symbol">-&gt;</a> <a id="9098" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="9110" class="Symbol">_</a> <a id="9112" href="Discriminator.html#9093" class="Bound">z</a> <a id="9114" class="Symbol">_)</a> <a id="9117" class="Symbol">(</a><a id="9118" href="Trace.html#1832" class="Function">co-trace-++</a> <a id="9130" class="Bound">ψ</a> <a id="9132" class="Symbol">(</a><a id="9133" href="Action.html#1370" class="InductiveConstructor">I</a> <a id="9135" class="Bound">x</a> <a id="9137" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9139" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="9141" class="Symbol">))</a> <a id="9144" href="Discriminator.html#8995" class="Bound">tr&#39;</a> <a id="9148" class="Keyword">in</a>
              <a id="9165" href="Discriminator.html#6912" class="Function">ends-with-output-&gt;has-trace</a> <a id="9193" href="Discriminator.html#9077" class="Bound">tr&#39;&#39;</a>
<a id="9198" class="Symbol">...</a> <a id="9202" class="Symbol">|</a> <a id="9204" href="Discriminator.html#9204" class="Bound">tψ</a> <a id="9207" class="Keyword">with</a> <a id="9212" href="Discriminator.html#2998" class="Function">disc-set-has-outputs</a> <a id="9233" class="Bound">sub</a> <a id="9237" class="Bound">dsψ</a> <a id="9241" href="Discriminator.html#9204" class="Bound">tψ</a> <a id="9244" class="Bound">sψ</a>
<a id="9247" class="Symbol">...</a> <a id="9251" class="Symbol">|</a> <a id="9253" href="Discriminator.html#9253" class="Bound">dsφ</a> <a id="9257" class="Keyword">with</a> <a id="9262" href="Semantics.html#4604" class="Function">decode-sup</a> <a id="9273" class="Symbol">(</a><a id="9274" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="9287" class="Symbol">(</a><a id="9288" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="9308" class="Bound">T</a> <a id="9310" class="Bound">S</a><a id="9311" class="Symbol">))</a> <a id="9314" class="Symbol">(</a><a id="9315" href="TraceSet.html#2526" class="Function">co-definition</a> <a id="9329" class="Symbol">{</a><a id="9330" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="9338" class="Bound">T</a> <a id="9340" class="Bound">S</a><a id="9341" class="Symbol">}</a> <a id="9343" href="Discriminator.html#9253" class="Bound">dsφ</a><a id="9346" class="Symbol">)</a>
<a id="9348" class="Symbol">...</a> <a id="9352" class="Symbol">|</a> <a id="9354" href="Discriminator.html#9354" class="Bound">rφ</a> <a id="9357" class="Symbol">=</a> <a id="9359" class="Keyword">let</a> <a id="9363" href="Discriminator.html#9363" class="Bound">rφ&#39;</a> <a id="9367" class="Symbol">=</a> <a id="9369" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a> <a id="9375" class="Symbol">(_</a> <a id="9378" href="HasTrace.html#1566" class="Function Operator">HasTrace_</a><a id="9387" class="Symbol">)</a> <a id="9389" class="Symbol">(</a><a id="9390" href="Trace.html#1832" class="Function">co-trace-++</a> <a id="9402" class="Symbol">(</a><a id="9403" href="Trace.html#1586" class="Function">co-trace</a> <a id="9412" class="Bound">ψ</a><a id="9413" class="Symbol">)</a> <a id="9415" class="Symbol">(</a><a id="9416" href="Action.html#1372" class="InductiveConstructor">O</a> <a id="9418" class="Bound">x</a> <a id="9420" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="9422" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="9424" class="Symbol">))</a> <a id="9427" href="Discriminator.html#9354" class="Bound">rφ</a> <a id="9430" class="Keyword">in</a>
           <a id="9444" class="Keyword">let</a> <a id="9448" href="Discriminator.html#9448" class="Bound">rφ&#39;&#39;</a> <a id="9453" class="Symbol">=</a> <a id="9455" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a> <a id="9461" class="Symbol">(λ</a> <a id="9464" href="Discriminator.html#9464" class="Bound">z</a> <a id="9466" class="Symbol">-&gt;</a> <a id="9469" class="Symbol">_</a> <a id="9471" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="9480" class="Symbol">(</a><a id="9481" href="Discriminator.html#9464" class="Bound">z</a> <a id="9483" href="Data.List.Base.html#1763" class="Function Operator">++</a> <a id="9486" class="Symbol">_))</a> <a id="9490" class="Symbol">(</a><a id="9491" href="Trace.html#1648" class="Function">co-trace-involution</a> <a id="9511" class="Bound">ψ</a><a id="9512" class="Symbol">)</a> <a id="9514" href="Discriminator.html#9363" class="Bound">rφ&#39;</a> <a id="9518" class="Keyword">in</a>
           <a id="9532" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="9539" class="Symbol">(</a><a id="9540" class="Bound">nrφ</a> <a id="9544" href="Discriminator.html#9448" class="Bound">rφ&#39;&#39;</a><a id="9548" class="Symbol">)</a>

<a id="after-trace-defined"></a><a id="9551" href="Discriminator.html#9551" class="Function">after-trace-defined</a> <a id="9571" class="Symbol">:</a> <a id="9573" class="Symbol">∀{</a><a id="9575" href="Discriminator.html#9575" class="Bound">T</a> <a id="9577" href="Discriminator.html#9577" class="Bound">T&#39;</a> <a id="9580" href="Discriminator.html#9580" class="Bound">φ</a><a id="9581" class="Symbol">}</a> <a id="9583" class="Symbol">-&gt;</a> <a id="9586" href="Discriminator.html#9575" class="Bound">T</a> <a id="9588" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="9597" href="Discriminator.html#9580" class="Bound">φ</a> <a id="9599" class="Symbol">-&gt;</a> <a id="9602" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="9614" href="Discriminator.html#9575" class="Bound">T</a> <a id="9616" href="Discriminator.html#9580" class="Bound">φ</a> <a id="9618" href="Discriminator.html#9577" class="Bound">T&#39;</a> <a id="9621" class="Symbol">-&gt;</a> <a id="9624" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="9632" href="Discriminator.html#9577" class="Bound">T&#39;</a>
<a id="9635" href="Discriminator.html#9551" class="Function">after-trace-defined</a> <a id="9655" class="Symbol">(_</a> <a id="9658" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9660" href="Discriminator.html#9660" class="Bound">def</a> <a id="9664" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9666" href="Transitions.html#1825" class="InductiveConstructor">refl</a><a id="9670" class="Symbol">)</a> <a id="9672" href="Transitions.html#1825" class="InductiveConstructor">refl</a> <a id="9677" class="Symbol">=</a> <a id="9679" href="Discriminator.html#9660" class="Bound">def</a>
<a id="9683" href="Discriminator.html#9551" class="Function">after-trace-defined</a> <a id="9703" class="Symbol">(_</a> <a id="9706" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9708" href="Discriminator.html#9708" class="Bound">def</a> <a id="9712" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9714" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="9719" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="9723" href="Discriminator.html#9723" class="Bound">tr</a><a id="9725" class="Symbol">)</a> <a id="9727" class="Symbol">(</a><a id="9728" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="9733" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="9737" href="Discriminator.html#9737" class="Bound">sr</a><a id="9739" class="Symbol">)</a> <a id="9741" class="Symbol">=</a> <a id="9743" href="Discriminator.html#9551" class="Function">after-trace-defined</a> <a id="9763" class="Symbol">(_</a> <a id="9766" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9768" href="Discriminator.html#9708" class="Bound">def</a> <a id="9772" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9774" href="Discriminator.html#9723" class="Bound">tr</a><a id="9776" class="Symbol">)</a> <a id="9778" href="Discriminator.html#9737" class="Bound">sr</a>
<a id="9781" href="Discriminator.html#9551" class="Function">after-trace-defined</a> <a id="9801" class="Symbol">(_</a> <a id="9804" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9806" href="Discriminator.html#9806" class="Bound">def</a> <a id="9810" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9812" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="9817" class="Symbol">(</a><a id="9818" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="9822" class="Symbol">_)</a> <a id="9825" href="Discriminator.html#9825" class="Bound">tr</a><a id="9827" class="Symbol">)</a> <a id="9829" class="Symbol">(</a><a id="9830" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="9835" class="Symbol">(</a><a id="9836" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="9840" class="Symbol">_)</a> <a id="9843" href="Discriminator.html#9843" class="Bound">sr</a><a id="9845" class="Symbol">)</a> <a id="9847" class="Symbol">=</a> <a id="9849" href="Discriminator.html#9551" class="Function">after-trace-defined</a> <a id="9869" class="Symbol">(_</a> <a id="9872" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9874" href="Discriminator.html#9806" class="Bound">def</a> <a id="9878" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9880" href="Discriminator.html#9825" class="Bound">tr</a><a id="9882" class="Symbol">)</a> <a id="9884" href="Discriminator.html#9843" class="Bound">sr</a>

<a id="after-trace-defined-2"></a><a id="9888" href="Discriminator.html#9888" class="Function">after-trace-defined-2</a> <a id="9910" class="Symbol">:</a> <a id="9912" class="Symbol">∀{</a><a id="9914" href="Discriminator.html#9914" class="Bound">T</a> <a id="9916" href="Discriminator.html#9916" class="Bound">φ</a><a id="9917" class="Symbol">}</a> <a id="9919" class="Symbol">(</a><a id="9920" href="Discriminator.html#9920" class="Bound">tφ</a> <a id="9923" class="Symbol">:</a> <a id="9925" href="Discriminator.html#9914" class="Bound">T</a> <a id="9927" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="9936" href="Discriminator.html#9916" class="Bound">φ</a><a id="9937" class="Symbol">)</a> <a id="9939" class="Symbol">-&gt;</a> <a id="9942" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="9950" class="Symbol">(</a><a id="9951" href="HasTrace.html#1664" class="Function">after</a> <a id="9957" href="Discriminator.html#9920" class="Bound">tφ</a><a id="9959" class="Symbol">)</a>
<a id="9961" href="Discriminator.html#9888" class="Function">after-trace-defined-2</a> <a id="9983" class="Symbol">(_</a> <a id="9986" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9988" href="Discriminator.html#9988" class="Bound">def</a> <a id="9992" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9994" class="Symbol">_)</a> <a id="9997" class="Symbol">=</a> <a id="9999" href="Discriminator.html#9988" class="Bound">def</a>

<a id="⊑-after"></a><a id="10004" href="Discriminator.html#10004" class="Function">⊑-after</a> <a id="10012" class="Symbol">:</a> <a id="10014" class="Symbol">∀{</a><a id="10016" href="Discriminator.html#10016" class="Bound">φ</a> <a id="10018" href="Discriminator.html#10018" class="Bound">ψ</a><a id="10019" class="Symbol">}</a> <a id="10021" class="Symbol">-&gt;</a> <a id="10024" href="Discriminator.html#10016" class="Bound">φ</a> <a id="10026" href="Trace.html#2275" class="Datatype Operator">⊑</a> <a id="10028" href="Discriminator.html#10018" class="Bound">ψ</a> <a id="10030" class="Symbol">-&gt;</a> <a id="10033" href="Trace.html#1534" class="Function">Trace</a>
<a id="10039" href="Discriminator.html#10004" class="Function">⊑-after</a> <a id="10047" class="Symbol">{_}</a> <a id="10051" class="Symbol">{</a><a id="10052" href="Discriminator.html#10052" class="Bound">ψ</a><a id="10053" class="Symbol">}</a> <a id="10055" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="10060" class="Symbol">=</a> <a id="10062" href="Discriminator.html#10052" class="Bound">ψ</a>
<a id="10064" href="Discriminator.html#10004" class="Function">⊑-after</a> <a id="10072" class="Symbol">(</a><a id="10073" href="Trace.html#2339" class="InductiveConstructor">some</a> <a id="10078" href="Discriminator.html#10078" class="Bound">le</a><a id="10080" class="Symbol">)</a> <a id="10082" class="Symbol">=</a> <a id="10084" href="Discriminator.html#10004" class="Function">⊑-after</a> <a id="10092" href="Discriminator.html#10078" class="Bound">le</a>

<a id="⊑-after-co-trace"></a><a id="10096" href="Discriminator.html#10096" class="Function">⊑-after-co-trace</a> <a id="10113" class="Symbol">:</a> <a id="10115" class="Symbol">∀{</a><a id="10117" href="Discriminator.html#10117" class="Bound">φ</a> <a id="10119" href="Discriminator.html#10119" class="Bound">ψ</a><a id="10120" class="Symbol">}</a> <a id="10122" class="Symbol">(</a><a id="10123" href="Discriminator.html#10123" class="Bound">le</a> <a id="10126" class="Symbol">:</a> <a id="10128" href="Discriminator.html#10117" class="Bound">φ</a> <a id="10130" href="Trace.html#2275" class="Datatype Operator">⊑</a> <a id="10132" href="Discriminator.html#10119" class="Bound">ψ</a><a id="10133" class="Symbol">)</a> <a id="10135" class="Symbol">-&gt;</a> <a id="10138" href="Discriminator.html#10004" class="Function">⊑-after</a> <a id="10146" class="Symbol">(</a><a id="10147" href="Trace.html#2798" class="Function">⊑-co-trace</a> <a id="10158" href="Discriminator.html#10123" class="Bound">le</a><a id="10160" class="Symbol">)</a> <a id="10162" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="10164" href="Trace.html#1586" class="Function">co-trace</a> <a id="10173" class="Symbol">(</a><a id="10174" href="Discriminator.html#10004" class="Function">⊑-after</a> <a id="10182" href="Discriminator.html#10123" class="Bound">le</a><a id="10184" class="Symbol">)</a>
<a id="10186" href="Discriminator.html#10096" class="Function">⊑-after-co-trace</a> <a id="10203" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="10208" class="Symbol">=</a> <a id="10210" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="10215" href="Discriminator.html#10096" class="Function">⊑-after-co-trace</a> <a id="10232" class="Symbol">(</a><a id="10233" href="Trace.html#2339" class="InductiveConstructor">some</a> <a id="10238" href="Discriminator.html#10238" class="Bound">le</a><a id="10240" class="Symbol">)</a> <a id="10242" class="Symbol">=</a> <a id="10244" href="Discriminator.html#10096" class="Function">⊑-after-co-trace</a> <a id="10261" href="Discriminator.html#10238" class="Bound">le</a>

<a id="extend-transitions"></a><a id="10265" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="10284" class="Symbol">:</a>
  <a id="10288" class="Symbol">∀{</a><a id="10290" href="Discriminator.html#10290" class="Bound">T</a> <a id="10292" href="Discriminator.html#10292" class="Bound">S</a> <a id="10294" href="Discriminator.html#10294" class="Bound">φ</a> <a id="10296" href="Discriminator.html#10296" class="Bound">ψ</a><a id="10297" class="Symbol">}</a>
  <a id="10301" class="Symbol">(</a><a id="10302" href="Discriminator.html#10302" class="Bound">le</a> <a id="10305" class="Symbol">:</a> <a id="10307" href="Discriminator.html#10294" class="Bound">φ</a> <a id="10309" href="Trace.html#2275" class="Datatype Operator">⊑</a> <a id="10311" href="Discriminator.html#10296" class="Bound">ψ</a><a id="10312" class="Symbol">)</a>
  <a id="10316" class="Symbol">(</a><a id="10317" href="Discriminator.html#10317" class="Bound">tr</a> <a id="10320" class="Symbol">:</a> <a id="10322" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="10334" href="Discriminator.html#10290" class="Bound">T</a> <a id="10336" href="Discriminator.html#10294" class="Bound">φ</a> <a id="10338" href="Discriminator.html#10292" class="Bound">S</a><a id="10339" class="Symbol">)</a>
  <a id="10343" class="Symbol">(</a><a id="10344" href="Discriminator.html#10344" class="Bound">tψ</a> <a id="10347" class="Symbol">:</a> <a id="10349" href="Discriminator.html#10290" class="Bound">T</a> <a id="10351" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="10360" href="Discriminator.html#10296" class="Bound">ψ</a><a id="10361" class="Symbol">)</a> <a id="10363" class="Symbol">-&gt;</a>
  <a id="10368" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="10380" href="Discriminator.html#10292" class="Bound">S</a> <a id="10382" class="Symbol">(</a><a id="10383" href="Discriminator.html#10004" class="Function">⊑-after</a> <a id="10391" href="Discriminator.html#10302" class="Bound">le</a><a id="10393" class="Symbol">)</a> <a id="10395" class="Symbol">(</a><a id="10396" href="HasTrace.html#1664" class="Function">after</a> <a id="10402" href="Discriminator.html#10344" class="Bound">tψ</a><a id="10404" class="Symbol">)</a>
<a id="10406" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="10425" href="Trace.html#2311" class="InductiveConstructor">none</a> <a id="10430" href="Transitions.html#1825" class="InductiveConstructor">refl</a> <a id="10435" class="Symbol">(_</a> <a id="10438" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10440" class="Symbol">_</a> <a id="10442" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10444" href="Discriminator.html#10444" class="Bound">sr</a><a id="10446" class="Symbol">)</a> <a id="10448" class="Symbol">=</a> <a id="10450" href="Discriminator.html#10444" class="Bound">sr</a>
<a id="10453" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="10472" class="Symbol">(</a><a id="10473" href="Trace.html#2339" class="InductiveConstructor">some</a> <a id="10478" href="Discriminator.html#10478" class="Bound">le</a><a id="10480" class="Symbol">)</a> <a id="10482" class="Symbol">(</a><a id="10483" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="10488" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="10492" href="Discriminator.html#10492" class="Bound">tr</a><a id="10494" class="Symbol">)</a> <a id="10496" class="Symbol">(_</a> <a id="10499" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10501" href="Discriminator.html#10501" class="Bound">sdef</a> <a id="10506" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10508" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="10513" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="10517" href="Discriminator.html#10517" class="Bound">sr</a><a id="10519" class="Symbol">)</a> <a id="10521" class="Symbol">=</a> <a id="10523" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="10542" href="Discriminator.html#10478" class="Bound">le</a> <a id="10545" href="Discriminator.html#10492" class="Bound">tr</a> <a id="10548" class="Symbol">(_</a> <a id="10551" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10553" href="Discriminator.html#10501" class="Bound">sdef</a> <a id="10558" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10560" href="Discriminator.html#10517" class="Bound">sr</a><a id="10562" class="Symbol">)</a>
<a id="10564" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="10583" class="Symbol">(</a><a id="10584" href="Trace.html#2339" class="InductiveConstructor">some</a> <a id="10589" href="Discriminator.html#10589" class="Bound">le</a><a id="10591" class="Symbol">)</a> <a id="10593" class="Symbol">(</a><a id="10594" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="10599" class="Symbol">(</a><a id="10600" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="10604" class="Symbol">_)</a> <a id="10607" href="Discriminator.html#10607" class="Bound">tr</a><a id="10609" class="Symbol">)</a> <a id="10611" class="Symbol">(_</a> <a id="10614" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10616" href="Discriminator.html#10616" class="Bound">sdef</a> <a id="10621" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10623" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="10628" class="Symbol">(</a><a id="10629" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="10633" class="Symbol">_)</a> <a id="10636" href="Discriminator.html#10636" class="Bound">sr</a><a id="10638" class="Symbol">)</a> <a id="10640" class="Symbol">=</a> <a id="10642" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="10661" href="Discriminator.html#10589" class="Bound">le</a> <a id="10664" href="Discriminator.html#10607" class="Bound">tr</a> <a id="10667" class="Symbol">(_</a> <a id="10670" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10672" href="Discriminator.html#10616" class="Bound">sdef</a> <a id="10677" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10679" href="Discriminator.html#10636" class="Bound">sr</a><a id="10681" class="Symbol">)</a>

<a id="discriminator-compliant"></a><a id="10684" href="Discriminator.html#10684" class="Function">discriminator-compliant</a> <a id="10708" class="Symbol">:</a> <a id="10710" class="Symbol">∀{</a><a id="10712" href="Discriminator.html#10712" class="Bound">T</a> <a id="10714" href="Discriminator.html#10714" class="Bound">S</a><a id="10715" class="Symbol">}</a> <a id="10717" class="Symbol">-&gt;</a> <a id="10720" href="Discriminator.html#10712" class="Bound">T</a> <a id="10722" href="Subtyping.html#2302" class="Function Operator">&lt;:</a> <a id="10725" href="Discriminator.html#10714" class="Bound">S</a> <a id="10727" class="Symbol">-&gt;</a> <a id="10730" href="Discriminator.html#10712" class="Bound">T</a> <a id="10732" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="10734" href="Discriminator.html#10714" class="Bound">S</a> <a id="10736" class="Symbol">-&gt;</a> <a id="10739" href="Session.html#2550" class="Function">FairComplianceS</a> <a id="10755" class="Symbol">(</a><a id="10756" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="10770" href="Discriminator.html#10712" class="Bound">T</a> <a id="10772" href="Discriminator.html#10714" class="Bound">S</a> <a id="10774" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="10776" href="Discriminator.html#10712" class="Bound">T</a><a id="10777" class="Symbol">)</a>
<a id="10779" href="Discriminator.html#10684" class="Function">discriminator-compliant</a> <a id="10803" class="Symbol">{</a><a id="10804" href="Discriminator.html#10804" class="Bound">T</a><a id="10805" class="Symbol">}</a> <a id="10807" class="Symbol">{</a><a id="10808" href="Discriminator.html#10808" class="Bound">S</a><a id="10809" class="Symbol">}</a> <a id="10811" href="Discriminator.html#10811" class="Bound">sub</a> <a id="10815" href="Discriminator.html#10815" class="Bound">div</a> <a id="10819" class="Symbol">{</a><a id="10820" href="Discriminator.html#10820" class="Bound">R&#39;</a> <a id="10823" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="10825" href="Discriminator.html#10825" class="Bound">T&#39;</a><a id="10827" class="Symbol">}</a> <a id="10829" href="Discriminator.html#10829" class="Bound">reds</a> <a id="10834" class="Keyword">with</a> <a id="10839" href="Session.html#2919" class="Function">unzip-red*</a> <a id="10850" href="Discriminator.html#10829" class="Bound">reds</a>
<a id="10855" class="Symbol">...</a> <a id="10859" class="Symbol">|</a> <a id="10861" href="Discriminator.html#10861" class="Bound">φ</a> <a id="10863" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10865" href="Discriminator.html#10865" class="Bound">rr</a> <a id="10868" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10870" href="Discriminator.html#10870" class="Bound">tr</a> <a id="10873" class="Keyword">with</a> <a id="10878" href="Discriminator.html#6214" class="Function">sub+diverge-&gt;discriminator-defined</a> <a id="10913" class="Bound">sub</a> <a id="10917" class="Bound">div</a> <a id="10921" class="Symbol">|</a> <a id="10923" href="Discriminator.html#4618" class="Function">sub+diverge-&gt;defined</a> <a id="10944" class="Bound">sub</a> <a id="10948" class="Bound">div</a>
<a id="10952" class="Symbol">...</a> <a id="10956" class="Symbol">|</a> <a id="10958" href="Discriminator.html#10958" class="Bound">rdef</a> <a id="10963" class="Symbol">|</a> <a id="10965" href="Discriminator.html#10965" class="Bound">tdef</a> <a id="10970" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10972" href="Discriminator.html#10972" class="Bound">sdef</a> <a id="10977" class="Keyword">with</a> <a id="10982" href="Discriminator.html#8232" class="Function">discriminator-after-sync-&gt;defined</a> <a id="11016" class="Bound">sub</a> <a id="11020" href="Discriminator.html#10958" class="Bound">rdef</a> <a id="11025" class="Bound">rr</a> <a id="11028" class="Bound">tr</a>
<a id="11031" class="Symbol">...</a> <a id="11035" class="Symbol">|</a> <a id="11037" href="Discriminator.html#11037" class="Bound">rdef&#39;</a> <a id="11043" class="Keyword">with</a> <a id="11048" href="Semantics.html#3950" class="Function">decode-sub</a> <a id="11059" class="Symbol">(</a><a id="11060" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="11073" class="Symbol">(</a><a id="11074" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="11094" class="Bound">T</a> <a id="11096" class="Bound">S</a><a id="11097" class="Symbol">))</a> <a id="11100" class="Symbol">(_</a> <a id="11103" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11105" href="Discriminator.html#11037" class="Bound">rdef&#39;</a> <a id="11111" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11113" class="Bound">rr</a><a id="11115" class="Symbol">)</a>
<a id="11117" class="Symbol">...</a> <a id="11121" class="Symbol">|</a> <a id="11123" href="Discriminator.html#11123" class="Bound">dsφ</a> <a id="11127" class="Keyword">rewrite</a> <a id="11135" href="Trace.html#1648" class="Function">co-trace-involution</a> <a id="11155" class="Bound">φ</a> <a id="11157" class="Symbol">=</a>
  <a id="11161" href="Function.Base.html#4121" class="Function Operator">case</a> <a id="11166" href="Divergence.html#11886" class="Function">completion</a> <a id="11177" class="Bound">sub</a> <a id="11181" href="Discriminator.html#11123" class="Bound">dsφ</a> <a id="11185" href="Function.Base.html#4121" class="Function Operator">of</a>
  <a id="11190" class="Symbol">λ</a> <a id="11192" class="Symbol">{</a> <a id="11194" class="Symbol">(</a><a id="11195" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="11200" class="Symbol">(</a><a id="11201" href="Discriminator.html#11201" class="Bound">ψ</a> <a id="11203" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11205" href="Discriminator.html#11205" class="Bound">lt</a> <a id="11208" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11210" href="Discriminator.html#11210" class="Bound">cψ</a><a id="11212" class="Symbol">@(</a><a id="11214" href="TraceSet.html#2834" class="InductiveConstructor">complete</a> <a id="11223" href="Discriminator.html#11223" class="Bound">dsψ</a> <a id="11227" class="Symbol">_)))</a> <a id="11232" class="Symbol">-&gt;</a>
      <a id="11241" class="Keyword">let</a> <a id="11245" href="Discriminator.html#11245" class="Bound">rψ</a> <a id="11248" class="Symbol">=</a> <a id="11250" href="Semantics.html#4604" class="Function">decode-sup</a> <a id="11261" class="Symbol">(</a><a id="11262" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="11275" class="Symbol">(</a><a id="11276" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="11296" class="Bound">T</a> <a id="11298" class="Bound">S</a><a id="11299" class="Symbol">))</a> <a id="11302" class="Symbol">(</a><a id="11303" href="TraceSet.html#2526" class="Function">co-definition</a> <a id="11317" class="Symbol">{</a><a id="11318" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="11326" class="Bound">T</a> <a id="11328" class="Bound">S</a><a id="11329" class="Symbol">}</a> <a id="11331" href="Discriminator.html#11223" class="Bound">dsψ</a><a id="11334" class="Symbol">)</a> <a id="11336" class="Keyword">in</a>
      <a id="11345" class="Keyword">let</a> <a id="11349" href="Discriminator.html#11349" class="Bound">tψ</a> <a id="11352" class="Symbol">=</a> <a id="11354" href="Divergence.html#6057" class="Function">disc-set-subset</a> <a id="11370" href="Discriminator.html#11223" class="Bound">dsψ</a> <a id="11374" class="Keyword">in</a>
      <a id="11383" class="Keyword">let</a> <a id="11387" href="Discriminator.html#11387" class="Bound">rr&#39;</a> <a id="11391" class="Symbol">=</a> <a id="11393" href="Relation.Binary.PropositionalEquality.Core.html#1780" class="Function">subst</a> <a id="11399" class="Symbol">(λ</a> <a id="11402" href="Discriminator.html#11402" class="Bound">z</a> <a id="11404" class="Symbol">-&gt;</a> <a id="11407" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="11419" class="Symbol">_</a> <a id="11421" href="Discriminator.html#11402" class="Bound">z</a> <a id="11423" class="Symbol">_)</a> <a id="11426" class="Symbol">(</a><a id="11427" href="Discriminator.html#10096" class="Function">⊑-after-co-trace</a> <a id="11444" class="Symbol">(</a><a id="11445" href="Trace.html#3686" class="Function">⊏-&gt;⊑</a> <a id="11450" href="Discriminator.html#11205" class="Bound">lt</a><a id="11452" class="Symbol">))</a> <a id="11455" class="Symbol">(</a><a id="11456" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="11475" class="Symbol">(</a><a id="11476" href="Trace.html#2798" class="Function">⊑-co-trace</a> <a id="11487" class="Symbol">(</a><a id="11488" href="Trace.html#3686" class="Function">⊏-&gt;⊑</a> <a id="11493" href="Discriminator.html#11205" class="Bound">lt</a><a id="11495" class="Symbol">))</a> <a id="11498" class="Bound">rr</a> <a id="11501" href="Discriminator.html#11245" class="Bound">rψ</a><a id="11503" class="Symbol">)</a> <a id="11505" class="Keyword">in</a>
      <a id="11514" class="Keyword">let</a> <a id="11518" href="Discriminator.html#11518" class="Bound">tr&#39;</a> <a id="11522" class="Symbol">=</a> <a id="11524" href="Discriminator.html#10265" class="Function">extend-transitions</a> <a id="11543" class="Symbol">(</a><a id="11544" href="Trace.html#3686" class="Function">⊏-&gt;⊑</a> <a id="11549" href="Discriminator.html#11205" class="Bound">lt</a><a id="11551" class="Symbol">)</a> <a id="11553" class="Bound">tr</a> <a id="11556" href="Discriminator.html#11349" class="Bound">tψ</a> <a id="11559" class="Keyword">in</a>
      <a id="11568" class="Keyword">let</a> <a id="11572" href="Discriminator.html#11572" class="Bound">winr</a> <a id="11577" class="Symbol">=</a> <a id="11579" href="Semantics.html#5359" class="Function">decode+complete-&gt;win</a> <a id="11600" class="Symbol">(</a><a id="11601" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="11614" class="Symbol">(</a><a id="11615" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="11635" class="Bound">T</a> <a id="11637" class="Bound">S</a><a id="11638" class="Symbol">))</a> <a id="11641" href="Discriminator.html#11245" class="Bound">rψ</a> <a id="11644" class="Symbol">(</a><a id="11645" href="Discriminator.html#7403" class="Function">co-complete</a> <a id="11657" href="Discriminator.html#11210" class="Bound">cψ</a><a id="11659" class="Symbol">)</a> <a id="11661" class="Keyword">in</a>
      <a id="11670" class="Keyword">let</a> <a id="11674" href="Discriminator.html#11674" class="Bound">reds&#39;</a> <a id="11680" class="Symbol">=</a> <a id="11682" href="Session.html#3183" class="Function">zip-red*</a> <a id="11691" href="Discriminator.html#11387" class="Bound">rr&#39;</a> <a id="11695" href="Discriminator.html#11518" class="Bound">tr&#39;</a> <a id="11699" class="Keyword">in</a>
      <a id="11708" class="Symbol">_</a> <a id="11710" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11712" href="Discriminator.html#11674" class="Bound">reds&#39;</a> <a id="11718" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11720" href="Session.html#2071" class="InductiveConstructor">win#def</a> <a id="11728" href="Discriminator.html#11572" class="Bound">winr</a> <a id="11733" class="Symbol">(</a><a id="11734" href="Discriminator.html#9888" class="Function">after-trace-defined-2</a> <a id="11756" href="Discriminator.html#11349" class="Bound">tψ</a><a id="11758" class="Symbol">)</a>
    <a id="11764" class="Symbol">;</a> <a id="11766" class="Symbol">(</a><a id="11767" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="11772" class="Symbol">(</a><a id="11773" href="Discriminator.html#11773" class="Bound">cφ</a> <a id="11776" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11778" href="Discriminator.html#11778" class="Bound">nsφ</a><a id="11781" class="Symbol">))</a> <a id="11784" class="Symbol">-&gt;</a>
      <a id="11793" class="Keyword">let</a> <a id="11797" href="Discriminator.html#11797" class="Bound">winr</a> <a id="11802" class="Symbol">=</a> <a id="11804" href="Semantics.html#5359" class="Function">decode+complete-&gt;win</a> <a id="11825" class="Symbol">(</a><a id="11826" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="11839" class="Symbol">(</a><a id="11840" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="11860" class="Bound">T</a> <a id="11862" class="Bound">S</a><a id="11863" class="Symbol">))</a> <a id="11866" class="Symbol">(_</a> <a id="11869" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11871" class="Bound">rdef&#39;</a> <a id="11877" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11879" class="Bound">rr</a><a id="11881" class="Symbol">)</a> <a id="11883" class="Symbol">(</a><a id="11884" href="Discriminator.html#7403" class="Function">co-complete</a> <a id="11896" href="Discriminator.html#11773" class="Bound">cφ</a><a id="11898" class="Symbol">)</a> <a id="11900" class="Keyword">in</a>
      <a id="11909" class="Symbol">_</a> <a id="11911" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11913" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a> <a id="11915" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11917" href="Session.html#2071" class="InductiveConstructor">win#def</a> <a id="11925" href="Discriminator.html#11797" class="Bound">winr</a> <a id="11930" class="Symbol">(</a><a id="11931" href="Discriminator.html#9551" class="Function">after-trace-defined</a> <a id="11951" class="Symbol">(</a><a id="11952" href="Divergence.html#6057" class="Function">disc-set-subset</a> <a id="11968" href="Discriminator.html#11123" class="Bound">dsφ</a><a id="11971" class="Symbol">)</a> <a id="11973" class="Bound">tr</a><a id="11975" class="Symbol">)</a> <a id="11977" class="Symbol">}</a>

<a id="discriminator-not-compliant"></a><a id="11980" href="Discriminator.html#11980" class="Function">discriminator-not-compliant</a> <a id="12008" class="Symbol">:</a> <a id="12010" class="Symbol">∀{</a><a id="12012" href="Discriminator.html#12012" class="Bound">T</a> <a id="12014" href="Discriminator.html#12014" class="Bound">S</a><a id="12015" class="Symbol">}</a> <a id="12017" class="Symbol">-&gt;</a> <a id="12020" href="Discriminator.html#12012" class="Bound">T</a> <a id="12022" href="Subtyping.html#2302" class="Function Operator">&lt;:</a> <a id="12025" href="Discriminator.html#12014" class="Bound">S</a> <a id="12027" class="Symbol">-&gt;</a> <a id="12030" href="Discriminator.html#12012" class="Bound">T</a> <a id="12032" href="Divergence.html#2029" class="Record Operator">↑</a> <a id="12034" href="Discriminator.html#12014" class="Bound">S</a> <a id="12036" class="Symbol">-&gt;</a> <a id="12039" href="Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="12041" href="Session.html#2550" class="Function">FairComplianceS</a> <a id="12057" class="Symbol">(</a><a id="12058" href="Discriminator.html#5645" class="Function">discriminator</a> <a id="12072" href="Discriminator.html#12012" class="Bound">T</a> <a id="12074" href="Discriminator.html#12014" class="Bound">S</a> <a id="12076" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="12078" href="Discriminator.html#12014" class="Bound">S</a><a id="12079" class="Symbol">)</a>
<a id="12081" href="Discriminator.html#11980" class="Function">discriminator-not-compliant</a> <a id="12109" class="Symbol">{</a><a id="12110" href="Discriminator.html#12110" class="Bound">T</a><a id="12111" class="Symbol">}</a> <a id="12113" class="Symbol">{</a><a id="12114" href="Discriminator.html#12114" class="Bound">S</a><a id="12115" class="Symbol">}</a> <a id="12117" href="Discriminator.html#12117" class="Bound">sub</a> <a id="12121" href="Discriminator.html#12121" class="Bound">div</a> <a id="12125" href="Discriminator.html#12125" class="Bound">comp</a> <a id="12130" class="Keyword">with</a> <a id="12135" href="Discriminator.html#12125" class="Bound">comp</a> <a id="12140" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a>
<a id="12142" class="Symbol">...</a> <a id="12146" class="Symbol">|</a> <a id="12148" class="Symbol">_</a> <a id="12150" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12152" href="Discriminator.html#12152" class="Bound">reds</a> <a id="12157" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12159" href="Session.html#2071" class="InductiveConstructor">win#def</a> <a id="12167" href="Discriminator.html#12167" class="Bound">w</a> <a id="12169" href="Discriminator.html#12169" class="Bound">def</a> <a id="12173" class="Keyword">with</a> <a id="12178" href="Session.html#2919" class="Function">unzip-red*</a> <a id="12189" href="Discriminator.html#12152" class="Bound">reds</a>
<a id="12194" class="Symbol">...</a> <a id="12198" class="Symbol">|</a> <a id="12200" href="Discriminator.html#12200" class="Bound">φ</a> <a id="12202" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12204" href="Discriminator.html#12204" class="Bound">rr</a> <a id="12207" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12209" href="Discriminator.html#12209" class="Bound">sr</a> <a id="12212" class="Keyword">with</a> <a id="12217" href="Semantics.html#6834" class="Function">decode+win-&gt;complete</a> <a id="12238" class="Symbol">(</a><a id="12239" href="Semantics.html#3247" class="Function">co-semantics</a> <a id="12252" class="Symbol">(</a><a id="12253" href="Divergence.html#5871" class="Function">disc-set-&gt;semantics</a> <a id="12273" class="Bound">T</a> <a id="12275" class="Bound">S</a><a id="12276" class="Symbol">))</a> <a id="12279" class="Symbol">(_</a> <a id="12282" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12284" href="SessionType.html#3312" class="Function">win-&gt;defined</a> <a id="12297" class="Bound">w</a> <a id="12299" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12301" href="Discriminator.html#12204" class="Bound">rr</a><a id="12303" class="Symbol">)</a> <a id="12305" class="Bound">w</a>
<a id="12307" class="Symbol">...</a> <a id="12311" class="Symbol">|</a> <a id="12313" href="Discriminator.html#12313" class="Bound">cφ</a> <a id="12316" class="Keyword">with</a> <a id="12321" href="Discriminator.html#7717" class="Function">co-complete-2</a> <a id="12335" class="Symbol">{</a><a id="12336" href="Divergence.html#3447" class="Datatype">DiscSet</a> <a id="12344" class="Bound">T</a> <a id="12346" class="Bound">S</a><a id="12347" class="Symbol">}</a> <a id="12349" href="Discriminator.html#12313" class="Bound">cφ</a>
<a id="12352" class="Symbol">...</a> <a id="12356" class="Symbol">|</a> <a id="12358" href="Discriminator.html#12358" class="Bound">csφ</a> <a id="12362" class="Keyword">with</a> <a id="12367" href="Divergence.html#12990" class="Function">disc-set-complete-2</a> <a id="12387" class="Bound">sub</a> <a id="12391" href="Discriminator.html#12358" class="Bound">csφ</a>
<a id="12395" class="Symbol">...</a> <a id="12399" class="Symbol">|</a> <a id="12401" href="Discriminator.html#12401" class="Bound">nsφ</a> <a id="12405" class="Symbol">=</a> <a id="12407" href="Discriminator.html#12401" class="Bound">nsφ</a> <a id="12411" class="Symbol">(_</a> <a id="12414" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12416" class="Bound">def</a> <a id="12420" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="12422" class="Bound">sr</a><a id="12424" class="Symbol">)</a>
</pre></body></html>