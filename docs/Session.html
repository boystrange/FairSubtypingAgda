<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Session</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-- MIT License</a>

<a id="17" class="Comment">-- Copyright (c) 2021 Luca Ciccone and Luca Padovani</a>

<a id="71" class="Comment">-- Permission is hereby granted, free of charge, to any person</a>
<a id="134" class="Comment">-- obtaining a copy of this software and associated documentation</a>
<a id="200" class="Comment">-- files (the &quot;Software&quot;), to deal in the Software without</a>
<a id="259" class="Comment">-- restriction, including without limitation the rights to use,</a>
<a id="323" class="Comment">-- copy, modify, merge, publish, distribute, sublicense, and/or sell</a>
<a id="392" class="Comment">-- copies of the Software, and to permit persons to whom the</a>
<a id="453" class="Comment">-- Software is furnished to do so, subject to the following</a>
<a id="513" class="Comment">-- conditions:</a>

<a id="529" class="Comment">-- The above copyright notice and this permission notice shall be</a>
<a id="595" class="Comment">-- included in all copies or substantial portions of the Software.</a>

<a id="663" class="Comment">-- THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</a>
<a id="730" class="Comment">-- EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES</a>
<a id="797" class="Comment">-- OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</a>
<a id="857" class="Comment">-- NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</a>
<a id="920" class="Comment">-- HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</a>
<a id="984" class="Comment">-- WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</a>
<a id="1048" class="Comment">-- FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</a>
<a id="1113" class="Comment">-- OTHER DEALINGS IN THE SOFTWARE.</a>

<a id="1149" class="Keyword">open</a> <a id="1154" class="Keyword">import</a> <a id="1161" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="1172" class="Keyword">open</a> <a id="1177" class="Keyword">import</a> <a id="1184" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="1195" class="Keyword">open</a> <a id="1200" class="Keyword">import</a> <a id="1207" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1220" class="Keyword">open</a> <a id="1225" class="Keyword">import</a> <a id="1232" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="1241" class="Keyword">open</a> <a id="1246" class="Keyword">import</a> <a id="1253" href="Data.List.html" class="Module">Data.List</a> <a id="1263" class="Keyword">using</a> <a id="1269" class="Symbol">(</a><a id="1270" href="Data.List.Base.html#9981" class="InductiveConstructor">[]</a><a id="1272" class="Symbol">;</a> <a id="1274" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="1277" class="Symbol">;</a> <a id="1279" href="Data.List.Base.html#1763" class="Function Operator">_++_</a><a id="1283" class="Symbol">)</a>

<a id="1286" class="Keyword">open</a> <a id="1291" class="Keyword">import</a> <a id="1298" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>
<a id="1315" class="Keyword">open</a> <a id="1320" class="Keyword">import</a> <a id="1327" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="1342" class="Keyword">using</a> <a id="1348" class="Symbol">(</a><a id="1349" href="Relation.Unary.html#4417" class="Function Operator">_∪_</a><a id="1352" class="Symbol">;</a> <a id="1354" href="Relation.Unary.html#4503" class="Function Operator">_∩_</a><a id="1357" class="Symbol">;</a> <a id="1359" href="Relation.Unary.html#3085" class="Function">Satisfiable</a><a id="1370" class="Symbol">)</a>
<a id="1372" class="Keyword">open</a> <a id="1377" class="Keyword">import</a> <a id="1384" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a> <a id="1438" class="Keyword">using</a> <a id="1444" class="Symbol">(</a><a id="1445" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#485" class="Datatype">Star</a><a id="1449" class="Symbol">;</a> <a id="1451" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a><a id="1452" class="Symbol">;</a> <a id="1454" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">_◅_</a><a id="1457" class="Symbol">)</a>

<a id="1460" class="Keyword">open</a> <a id="1465" class="Keyword">import</a> <a id="1472" href="Common.html" class="Module">Common</a>

<a id="1480" class="Keyword">module</a> <a id="1487" href="Session.html" class="Module">Session</a> <a id="1495" class="Symbol">{</a><a id="1496" href="Session.html#1496" class="Bound">ℙ</a> <a id="1498" class="Symbol">:</a> <a id="1500" class="PrimitiveType">Set</a><a id="1503" class="Symbol">}</a> <a id="1505" class="Symbol">(</a><a id="1506" href="Session.html#1506" class="Bound">message</a> <a id="1514" class="Symbol">:</a> <a id="1516" href="Common.html#1500" class="Record">Message</a> <a id="1524" href="Session.html#1496" class="Bound">ℙ</a><a id="1525" class="Symbol">)</a>
  <a id="1529" class="Keyword">where</a>

<a id="1536" class="Keyword">open</a> <a id="1541" class="Keyword">import</a> <a id="1548" href="Trace.html" class="Module">Trace</a> <a id="1554" href="Session.html#1506" class="Bound">message</a>
<a id="1562" class="Keyword">open</a> <a id="1567" class="Keyword">import</a> <a id="1574" href="SessionType.html" class="Module">SessionType</a> <a id="1586" href="Session.html#1506" class="Bound">message</a>
<a id="1594" class="Keyword">open</a> <a id="1599" class="Keyword">import</a> <a id="1606" href="Transitions.html" class="Module">Transitions</a> <a id="1618" href="Session.html#1506" class="Bound">message</a>
<a id="1626" class="Keyword">open</a> <a id="1631" class="Keyword">import</a> <a id="1638" href="HasTrace.html" class="Module">HasTrace</a> <a id="1647" href="Session.html#1506" class="Bound">message</a>

<a id="1656" class="Keyword">data</a> <a id="Session"></a><a id="1661" href="Session.html#1661" class="Datatype">Session</a> <a id="1669" class="Symbol">:</a> <a id="1671" class="PrimitiveType">Set</a> <a id="1675" class="Keyword">where</a>
  <a id="Session._#_"></a><a id="1683" href="Session.html#1683" class="InductiveConstructor Operator">_#_</a>  <a id="1688" class="Symbol">:</a> <a id="1690" class="Symbol">(</a><a id="1691" href="Session.html#1691" class="Bound">T</a> <a id="1693" class="Symbol">:</a> <a id="1695" href="SessionType.html#1551" class="Datatype">SessionType</a><a id="1706" class="Symbol">)</a> <a id="1708" class="Symbol">(</a><a id="1709" href="Session.html#1709" class="Bound">S</a> <a id="1711" class="Symbol">:</a> <a id="1713" href="SessionType.html#1551" class="Datatype">SessionType</a><a id="1724" class="Symbol">)</a> <a id="1726" class="Symbol">-&gt;</a> <a id="1729" href="Session.html#1661" class="Datatype">Session</a>

<a id="1738" class="Keyword">data</a> <a id="Reduction"></a><a id="1743" href="Session.html#1743" class="Datatype">Reduction</a> <a id="1753" class="Symbol">:</a> <a id="1755" href="Session.html#1661" class="Datatype">Session</a> <a id="1763" class="Symbol">-&gt;</a> <a id="1766" href="Session.html#1661" class="Datatype">Session</a> <a id="1774" class="Symbol">-&gt;</a> <a id="1777" class="PrimitiveType">Set</a> <a id="1781" class="Keyword">where</a>
  <a id="Reduction.sync"></a><a id="1789" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="1794" class="Symbol">:</a> <a id="1796" class="Symbol">∀{</a><a id="1798" href="Session.html#1798" class="Bound">α</a> <a id="1800" href="Session.html#1800" class="Bound">R</a> <a id="1802" href="Session.html#1802" class="Bound">R&#39;</a> <a id="1805" href="Session.html#1805" class="Bound">T</a> <a id="1807" href="Session.html#1807" class="Bound">T&#39;</a><a id="1809" class="Symbol">}</a> <a id="1811" class="Symbol">(</a><a id="1812" href="Session.html#1812" class="Bound">r</a> <a id="1814" class="Symbol">:</a> <a id="1816" href="Transitions.html#1546" class="Datatype">Transition</a> <a id="1827" href="Session.html#1800" class="Bound">R</a> <a id="1829" class="Symbol">(</a><a id="1830" href="Action.html#1543" class="Function">co-action</a> <a id="1840" href="Session.html#1798" class="Bound">α</a><a id="1841" class="Symbol">)</a> <a id="1843" href="Session.html#1802" class="Bound">R&#39;</a><a id="1845" class="Symbol">)</a> <a id="1847" class="Symbol">(</a><a id="1848" href="Session.html#1848" class="Bound">t</a> <a id="1850" class="Symbol">:</a> <a id="1852" href="Transitions.html#1546" class="Datatype">Transition</a> <a id="1863" href="Session.html#1805" class="Bound">T</a> <a id="1865" href="Session.html#1798" class="Bound">α</a> <a id="1867" href="Session.html#1807" class="Bound">T&#39;</a><a id="1869" class="Symbol">)</a> <a id="1871" class="Symbol">-&gt;</a> <a id="1874" href="Session.html#1743" class="Datatype">Reduction</a> <a id="1884" class="Symbol">(</a><a id="1885" href="Session.html#1800" class="Bound">R</a> <a id="1887" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="1889" href="Session.html#1805" class="Bound">T</a><a id="1890" class="Symbol">)</a> <a id="1892" class="Symbol">(</a><a id="1893" href="Session.html#1802" class="Bound">R&#39;</a> <a id="1896" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="1898" href="Session.html#1807" class="Bound">T&#39;</a><a id="1900" class="Symbol">)</a>

<a id="Reductions"></a><a id="1903" href="Session.html#1903" class="Function">Reductions</a> <a id="1914" class="Symbol">:</a> <a id="1916" href="Session.html#1661" class="Datatype">Session</a> <a id="1924" class="Symbol">-&gt;</a> <a id="1927" href="Session.html#1661" class="Datatype">Session</a> <a id="1935" class="Symbol">-&gt;</a> <a id="1938" class="PrimitiveType">Set</a>
<a id="1942" href="Session.html#1903" class="Function">Reductions</a> <a id="1953" class="Symbol">=</a> <a id="1955" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#485" class="Datatype">Star</a> <a id="1960" href="Session.html#1743" class="Datatype">Reduction</a>

<a id="Reduce"></a><a id="1971" href="Session.html#1971" class="Function">Reduce</a> <a id="1978" class="Symbol">:</a> <a id="1980" href="Session.html#1661" class="Datatype">Session</a> <a id="1988" class="Symbol">-&gt;</a> <a id="1991" class="PrimitiveType">Set</a>
<a id="1995" href="Session.html#1971" class="Function">Reduce</a> <a id="2002" href="Session.html#2002" class="Bound">S</a> <a id="2004" class="Symbol">=</a> <a id="2006" href="Relation.Unary.html#3085" class="Function">Satisfiable</a> <a id="2018" class="Symbol">(</a><a id="2019" href="Session.html#1743" class="Datatype">Reduction</a> <a id="2029" href="Session.html#2002" class="Bound">S</a><a id="2030" class="Symbol">)</a>

<a id="2033" class="Keyword">data</a> <a id="Success"></a><a id="2038" href="Session.html#2038" class="Datatype">Success</a> <a id="2046" class="Symbol">:</a> <a id="2048" href="Session.html#1661" class="Datatype">Session</a> <a id="2056" class="Symbol">-&gt;</a> <a id="2059" class="PrimitiveType">Set</a> <a id="2063" class="Keyword">where</a>
  <a id="Success.win#def"></a><a id="2071" href="Session.html#2071" class="InductiveConstructor">win#def</a> <a id="2079" class="Symbol">:</a> <a id="2081" class="Symbol">∀{</a><a id="2083" href="Session.html#2083" class="Bound">T</a> <a id="2085" href="Session.html#2085" class="Bound">S</a><a id="2086" class="Symbol">}</a> <a id="2088" class="Symbol">(</a><a id="2089" href="Session.html#2089" class="Bound">w</a> <a id="2091" class="Symbol">:</a> <a id="2093" href="SessionType.html#2979" class="Datatype">Win</a> <a id="2097" href="Session.html#2083" class="Bound">T</a><a id="2098" class="Symbol">)</a> <a id="2100" class="Symbol">(</a><a id="2101" href="Session.html#2101" class="Bound">def</a> <a id="2105" class="Symbol">:</a> <a id="2107" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="2115" href="Session.html#2085" class="Bound">S</a><a id="2116" class="Symbol">)</a> <a id="2118" class="Symbol">-&gt;</a> <a id="2121" href="Session.html#2038" class="Datatype">Success</a> <a id="2129" class="Symbol">(</a><a id="2130" href="Session.html#2083" class="Bound">T</a> <a id="2132" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="2134" href="Session.html#2085" class="Bound">S</a><a id="2135" class="Symbol">)</a>

<a id="ProgressS"></a><a id="2138" href="Session.html#2138" class="Function">ProgressS</a> <a id="2148" class="Symbol">:</a> <a id="2150" href="Session.html#1661" class="Datatype">Session</a> <a id="2158" class="Symbol">-&gt;</a> <a id="2161" class="PrimitiveType">Set</a>
<a id="2165" href="Session.html#2138" class="Function">ProgressS</a> <a id="2175" class="Symbol">=</a> <a id="2177" href="Session.html#2038" class="Datatype">Success</a> <a id="2185" href="Relation.Unary.html#4417" class="Function Operator">∪</a> <a id="2187" href="Session.html#1971" class="Function">Reduce</a>

<a id="MaySucceed"></a><a id="2195" href="Session.html#2195" class="Function">MaySucceed</a> <a id="2206" class="Symbol">:</a> <a id="2208" href="Session.html#1661" class="Datatype">Session</a> <a id="2216" class="Symbol">-&gt;</a> <a id="2219" class="PrimitiveType">Set</a>
<a id="2223" href="Session.html#2195" class="Function">MaySucceed</a> <a id="2234" href="Session.html#2234" class="Bound">S</a> <a id="2236" class="Symbol">=</a> <a id="2238" href="Relation.Unary.html#3085" class="Function">Satisfiable</a> <a id="2250" class="Symbol">(</a><a id="2251" href="Session.html#1903" class="Function">Reductions</a> <a id="2262" href="Session.html#2234" class="Bound">S</a> <a id="2264" href="Relation.Unary.html#4503" class="Function Operator">∩</a> <a id="2266" href="Session.html#2038" class="Datatype">Success</a><a id="2273" class="Symbol">)</a>

<a id="InvariantS"></a><a id="2276" href="Session.html#2276" class="Function">InvariantS</a> <a id="2287" class="Symbol">:</a> <a id="2289" class="Symbol">(</a><a id="2290" href="Session.html#1661" class="Datatype">Session</a> <a id="2298" class="Symbol">-&gt;</a> <a id="2301" class="PrimitiveType">Set</a><a id="2304" class="Symbol">)</a> <a id="2306" class="Symbol">-&gt;</a> <a id="2309" href="Session.html#1661" class="Datatype">Session</a> <a id="2317" class="Symbol">-&gt;</a> <a id="2320" class="PrimitiveType">Set</a>
<a id="2324" href="Session.html#2276" class="Function">InvariantS</a> <a id="2335" href="Session.html#2335" class="Bound">P</a> <a id="2337" href="Session.html#2337" class="Bound">S</a> <a id="2339" class="Symbol">=</a> <a id="2341" class="Symbol">∀{</a><a id="2343" href="Session.html#2343" class="Bound">S&#39;</a><a id="2345" class="Symbol">}</a> <a id="2347" class="Symbol">-&gt;</a> <a id="2350" href="Session.html#1903" class="Function">Reductions</a> <a id="2361" href="Session.html#2337" class="Bound">S</a> <a id="2363" href="Session.html#2343" class="Bound">S&#39;</a> <a id="2366" class="Symbol">-&gt;</a> <a id="2369" href="Session.html#2335" class="Bound">P</a> <a id="2371" href="Session.html#2343" class="Bound">S&#39;</a>

<a id="ImplyS"></a><a id="2375" href="Session.html#2375" class="Function">ImplyS</a> <a id="2382" class="Symbol">:</a> <a id="2384" class="Symbol">(</a><a id="2385" href="Session.html#1661" class="Datatype">Session</a> <a id="2393" class="Symbol">-&gt;</a> <a id="2396" class="PrimitiveType">Set</a><a id="2399" class="Symbol">)</a> <a id="2401" class="Symbol">-&gt;</a> <a id="2404" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2416" class="Symbol">-&gt;</a> <a id="2419" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2431" class="Symbol">-&gt;</a> <a id="2434" class="PrimitiveType">Set</a>
<a id="2438" href="Session.html#2375" class="Function">ImplyS</a> <a id="2445" href="Session.html#2445" class="Bound">P</a> <a id="2447" href="Session.html#2447" class="Bound">T</a> <a id="2449" href="Session.html#2449" class="Bound">S</a> <a id="2451" class="Symbol">=</a> <a id="2453" class="Symbol">∀{</a><a id="2455" href="Session.html#2455" class="Bound">R</a><a id="2456" class="Symbol">}</a> <a id="2458" class="Symbol">-&gt;</a> <a id="2461" href="Session.html#2445" class="Bound">P</a> <a id="2463" class="Symbol">(</a><a id="2464" href="Session.html#2455" class="Bound">R</a> <a id="2466" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="2468" href="Session.html#2447" class="Bound">T</a><a id="2469" class="Symbol">)</a> <a id="2471" class="Symbol">-&gt;</a> <a id="2474" href="Session.html#2445" class="Bound">P</a> <a id="2476" class="Symbol">(</a><a id="2477" href="Session.html#2455" class="Bound">R</a> <a id="2479" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="2481" href="Session.html#2449" class="Bound">S</a><a id="2482" class="Symbol">)</a>

<a id="ComplianceS"></a><a id="2485" href="Session.html#2485" class="Function">ComplianceS</a> <a id="2497" class="Symbol">:</a> <a id="2499" href="Session.html#1661" class="Datatype">Session</a> <a id="2507" class="Symbol">-&gt;</a> <a id="2510" class="PrimitiveType">Set</a>
<a id="2514" href="Session.html#2485" class="Function">ComplianceS</a> <a id="2526" class="Symbol">=</a> <a id="2528" href="Session.html#2276" class="Function">InvariantS</a> <a id="2539" href="Session.html#2138" class="Function">ProgressS</a>

<a id="FairComplianceS"></a><a id="2550" href="Session.html#2550" class="Function">FairComplianceS</a> <a id="2566" class="Symbol">:</a> <a id="2568" href="Session.html#1661" class="Datatype">Session</a> <a id="2576" class="Symbol">-&gt;</a> <a id="2579" class="PrimitiveType">Set</a>
<a id="2583" href="Session.html#2550" class="Function">FairComplianceS</a> <a id="2599" class="Symbol">=</a> <a id="2601" href="Session.html#2276" class="Function">InvariantS</a> <a id="2612" href="Session.html#2195" class="Function">MaySucceed</a>

<a id="SubtypingS"></a><a id="2624" href="Session.html#2624" class="Function">SubtypingS</a> <a id="2635" class="Symbol">:</a> <a id="2637" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2649" class="Symbol">-&gt;</a> <a id="2652" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2664" class="Symbol">-&gt;</a> <a id="2667" class="PrimitiveType">Set</a>
<a id="2671" href="Session.html#2624" class="Function">SubtypingS</a> <a id="2682" class="Symbol">=</a> <a id="2684" href="Session.html#2375" class="Function">ImplyS</a> <a id="2691" href="Session.html#2485" class="Function">ComplianceS</a>

<a id="FairSubtypingS"></a><a id="2704" href="Session.html#2704" class="Function">FairSubtypingS</a> <a id="2719" class="Symbol">:</a> <a id="2721" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2733" class="Symbol">-&gt;</a> <a id="2736" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2748" class="Symbol">-&gt;</a> <a id="2751" class="PrimitiveType">Set</a>
<a id="2755" href="Session.html#2704" class="Function">FairSubtypingS</a> <a id="2770" class="Symbol">=</a> <a id="2772" href="Session.html#2375" class="Function">ImplyS</a> <a id="2779" href="Session.html#2550" class="Function">FairComplianceS</a>

<a id="ConvergenceS"></a><a id="2796" href="Session.html#2796" class="Function">ConvergenceS</a> <a id="2809" class="Symbol">:</a> <a id="2811" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2823" class="Symbol">-&gt;</a> <a id="2826" href="SessionType.html#1551" class="Datatype">SessionType</a> <a id="2838" class="Symbol">-&gt;</a> <a id="2841" class="PrimitiveType">Set</a>
<a id="2845" href="Session.html#2796" class="Function">ConvergenceS</a> <a id="2858" href="Session.html#2858" class="Bound">T</a> <a id="2860" href="Session.html#2860" class="Bound">S</a> <a id="2862" class="Symbol">=</a> <a id="2864" class="Symbol">∀{</a><a id="2866" href="Session.html#2866" class="Bound">R</a><a id="2867" class="Symbol">}</a> <a id="2869" class="Symbol">-&gt;</a> <a id="2872" href="Session.html#2550" class="Function">FairComplianceS</a> <a id="2888" class="Symbol">(</a><a id="2889" href="Session.html#2866" class="Bound">R</a> <a id="2891" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="2893" href="Session.html#2858" class="Bound">T</a><a id="2894" class="Symbol">)</a> <a id="2896" class="Symbol">-&gt;</a> <a id="2899" href="Session.html#2195" class="Function">MaySucceed</a> <a id="2910" class="Symbol">(</a><a id="2911" href="Session.html#2866" class="Bound">R</a> <a id="2913" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="2915" href="Session.html#2860" class="Bound">S</a><a id="2916" class="Symbol">)</a>

<a id="unzip-red*"></a><a id="2919" href="Session.html#2919" class="Function">unzip-red*</a> <a id="2930" class="Symbol">:</a> <a id="2932" class="Symbol">∀{</a><a id="2934" href="Session.html#2934" class="Bound">T</a> <a id="2936" href="Session.html#2936" class="Bound">T&#39;</a> <a id="2939" href="Session.html#2939" class="Bound">S</a> <a id="2941" href="Session.html#2941" class="Bound">S&#39;</a><a id="2943" class="Symbol">}</a> <a id="2945" class="Symbol">-&gt;</a> <a id="2948" href="Session.html#1903" class="Function">Reductions</a> <a id="2959" class="Symbol">(</a><a id="2960" href="Session.html#2934" class="Bound">T</a> <a id="2962" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="2964" href="Session.html#2939" class="Bound">S</a><a id="2965" class="Symbol">)</a> <a id="2967" class="Symbol">(</a><a id="2968" href="Session.html#2936" class="Bound">T&#39;</a> <a id="2971" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="2973" href="Session.html#2941" class="Bound">S&#39;</a><a id="2975" class="Symbol">)</a> <a id="2977" class="Symbol">-&gt;</a>
             <a id="2993" href="Data.Product.html#1788" class="Function">∃[</a> <a id="2996" href="Session.html#2996" class="Bound">φ</a> <a id="2998" href="Data.Product.html#1788" class="Function">]</a> <a id="3000" class="Symbol">(</a><a id="3001" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="3013" href="Session.html#2934" class="Bound">T</a> <a id="3015" class="Symbol">(</a><a id="3016" href="Trace.html#1586" class="Function">co-trace</a> <a id="3025" href="Session.html#2996" class="Bound">φ</a><a id="3026" class="Symbol">)</a> <a id="3028" href="Session.html#2936" class="Bound">T&#39;</a> <a id="3031" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="3033" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="3045" href="Session.html#2939" class="Bound">S</a> <a id="3047" href="Session.html#2996" class="Bound">φ</a> <a id="3049" href="Session.html#2941" class="Bound">S&#39;</a><a id="3051" class="Symbol">)</a>
<a id="3053" href="Session.html#2919" class="Function">unzip-red*</a> <a id="3064" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a> <a id="3066" class="Symbol">=</a> <a id="3068" class="Symbol">_</a> <a id="3070" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3072" href="Transitions.html#1825" class="InductiveConstructor">refl</a> <a id="3077" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3079" href="Transitions.html#1825" class="InductiveConstructor">refl</a>
<a id="3084" href="Session.html#2919" class="Function">unzip-red*</a> <a id="3095" class="Symbol">(</a><a id="3096" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="3101" href="Session.html#3101" class="Bound">r</a> <a id="3103" href="Session.html#3103" class="Bound">t</a> <a id="3105" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">◅</a> <a id="3107" href="Session.html#3107" class="Bound">reds</a><a id="3111" class="Symbol">)</a> <a id="3113" class="Symbol">=</a>
  <a id="3117" class="Keyword">let</a> <a id="3121" class="Symbol">_</a> <a id="3123" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3125" href="Session.html#3125" class="Bound">tr</a> <a id="3128" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3130" href="Session.html#3130" class="Bound">sr</a> <a id="3133" class="Symbol">=</a> <a id="3135" href="Session.html#2919" class="Function">unzip-red*</a> <a id="3146" href="Session.html#3107" class="Bound">reds</a> <a id="3151" class="Keyword">in</a>
  <a id="3156" class="Symbol">_</a> <a id="3158" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3160" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="3165" href="Session.html#3101" class="Bound">r</a> <a id="3167" href="Session.html#3125" class="Bound">tr</a> <a id="3170" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3172" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="3177" href="Session.html#3103" class="Bound">t</a> <a id="3179" href="Session.html#3130" class="Bound">sr</a>

<a id="zip-red*"></a><a id="3183" href="Session.html#3183" class="Function">zip-red*</a> <a id="3192" class="Symbol">:</a> <a id="3194" class="Symbol">∀{</a><a id="3196" href="Session.html#3196" class="Bound">φ</a> <a id="3198" href="Session.html#3198" class="Bound">T</a> <a id="3200" href="Session.html#3200" class="Bound">T&#39;</a> <a id="3203" href="Session.html#3203" class="Bound">S</a> <a id="3205" href="Session.html#3205" class="Bound">S&#39;</a><a id="3207" class="Symbol">}</a> <a id="3209" class="Symbol">-&gt;</a>
           <a id="3223" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="3235" href="Session.html#3198" class="Bound">T</a> <a id="3237" class="Symbol">(</a><a id="3238" href="Trace.html#1586" class="Function">co-trace</a> <a id="3247" href="Session.html#3196" class="Bound">φ</a><a id="3248" class="Symbol">)</a> <a id="3250" href="Session.html#3200" class="Bound">T&#39;</a> <a id="3253" class="Symbol">-&gt;</a>
           <a id="3267" href="Transitions.html#1760" class="Datatype">Transitions</a> <a id="3279" href="Session.html#3203" class="Bound">S</a> <a id="3281" href="Session.html#3196" class="Bound">φ</a> <a id="3283" href="Session.html#3205" class="Bound">S&#39;</a> <a id="3286" class="Symbol">-&gt;</a>
           <a id="3300" href="Session.html#1903" class="Function">Reductions</a> <a id="3311" class="Symbol">(</a><a id="3312" href="Session.html#3198" class="Bound">T</a> <a id="3314" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="3316" href="Session.html#3203" class="Bound">S</a><a id="3317" class="Symbol">)</a> <a id="3319" class="Symbol">(</a><a id="3320" href="Session.html#3200" class="Bound">T&#39;</a> <a id="3323" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="3325" href="Session.html#3205" class="Bound">S&#39;</a><a id="3327" class="Symbol">)</a>
<a id="3329" href="Session.html#3183" class="Function">zip-red*</a> <a id="3338" href="Transitions.html#1825" class="InductiveConstructor">refl</a> <a id="3343" href="Transitions.html#1825" class="InductiveConstructor">refl</a> <a id="3348" class="Symbol">=</a> <a id="3350" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#546" class="InductiveConstructor">ε</a>
<a id="3352" href="Session.html#3183" class="Function">zip-red*</a> <a id="3361" class="Symbol">(</a><a id="3362" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="3367" href="Session.html#3367" class="Bound">t</a> <a id="3369" href="Session.html#3369" class="Bound">tr</a><a id="3371" class="Symbol">)</a> <a id="3373" class="Symbol">(</a><a id="3374" href="Transitions.html#1861" class="InductiveConstructor">step</a> <a id="3379" href="Session.html#3379" class="Bound">s</a> <a id="3381" href="Session.html#3381" class="Bound">sr</a><a id="3383" class="Symbol">)</a> <a id="3385" class="Symbol">=</a> <a id="3387" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="3392" href="Session.html#3367" class="Bound">t</a> <a id="3394" href="Session.html#3379" class="Bound">s</a> <a id="3396" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#573" class="InductiveConstructor Operator">◅</a> <a id="3398" href="Session.html#3183" class="Function">zip-red*</a> <a id="3407" href="Session.html#3369" class="Bound">tr</a> <a id="3410" href="Session.html#3381" class="Bound">sr</a>

<a id="zip-traces"></a><a id="3414" href="Session.html#3414" class="Function">zip-traces</a> <a id="3425" class="Symbol">:</a>
  <a id="3429" class="Symbol">∀{</a><a id="3431" href="Session.html#3431" class="Bound">R</a> <a id="3433" href="Session.html#3433" class="Bound">T</a> <a id="3435" href="Session.html#3435" class="Bound">φ</a><a id="3436" class="Symbol">}</a>
  <a id="3440" class="Symbol">(</a><a id="3441" href="Session.html#3441" class="Bound">rφ</a> <a id="3444" class="Symbol">:</a> <a id="3446" href="Session.html#3431" class="Bound">R</a> <a id="3448" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="3457" class="Symbol">(</a><a id="3458" href="Trace.html#1586" class="Function">co-trace</a> <a id="3467" href="Session.html#3435" class="Bound">φ</a><a id="3468" class="Symbol">))</a>
  <a id="3473" class="Symbol">(</a><a id="3474" href="Session.html#3474" class="Bound">tφ</a> <a id="3477" class="Symbol">:</a> <a id="3479" href="Session.html#3433" class="Bound">T</a> <a id="3481" href="HasTrace.html#1566" class="Function Operator">HasTrace</a> <a id="3490" href="Session.html#3435" class="Bound">φ</a><a id="3491" class="Symbol">)</a> <a id="3493" class="Symbol">-&gt;</a>
  <a id="3498" href="Session.html#1903" class="Function">Reductions</a> <a id="3509" class="Symbol">(</a><a id="3510" href="Session.html#3431" class="Bound">R</a> <a id="3512" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="3514" href="Session.html#3433" class="Bound">T</a><a id="3515" class="Symbol">)</a> <a id="3517" class="Symbol">(</a><a id="3518" href="HasTrace.html#1664" class="Function">after</a> <a id="3524" href="Session.html#3441" class="Bound">rφ</a> <a id="3527" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="3529" href="HasTrace.html#1664" class="Function">after</a> <a id="3535" href="Session.html#3474" class="Bound">tφ</a><a id="3537" class="Symbol">)</a>
<a id="3539" href="Session.html#3414" class="Function">zip-traces</a> <a id="3550" class="Symbol">(_</a> <a id="3553" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3555" class="Symbol">_</a> <a id="3557" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3559" href="Session.html#3559" class="Bound">rr</a><a id="3561" class="Symbol">)</a> <a id="3563" class="Symbol">(_</a> <a id="3566" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3568" class="Symbol">_</a> <a id="3570" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3572" href="Session.html#3572" class="Bound">tr</a><a id="3574" class="Symbol">)</a> <a id="3576" class="Symbol">=</a> <a id="3578" href="Session.html#3183" class="Function">zip-red*</a> <a id="3587" href="Session.html#3559" class="Bound">rr</a> <a id="3590" href="Session.html#3572" class="Bound">tr</a>

<a id="success-not-reduce"></a><a id="3594" href="Session.html#3594" class="Function">success-not-reduce</a> <a id="3613" class="Symbol">:</a> <a id="3615" class="Symbol">∀{</a><a id="3617" href="Session.html#3617" class="Bound">S</a> <a id="3619" href="Session.html#3619" class="Bound">S&#39;</a><a id="3621" class="Symbol">}</a> <a id="3623" class="Symbol">→</a> <a id="3625" href="Session.html#2038" class="Datatype">Success</a> <a id="3633" href="Session.html#3617" class="Bound">S</a> <a id="3635" class="Symbol">→</a> <a id="3637" href="Relation.Nullary.html#653" class="Function Operator">¬</a> <a id="3639" class="Symbol">(</a><a id="3640" href="Session.html#1743" class="Datatype">Reduction</a> <a id="3650" href="Session.html#3617" class="Bound">S</a> <a id="3652" href="Session.html#3619" class="Bound">S&#39;</a><a id="3654" class="Symbol">)</a>
<a id="3656" href="Session.html#3594" class="Function">success-not-reduce</a> <a id="3675" class="Symbol">(</a><a id="3676" href="Session.html#2071" class="InductiveConstructor">win#def</a> <a id="3684" href="Session.html#3684" class="Bound">win</a> <a id="3688" class="Symbol">_)</a> <a id="3691" class="Symbol">(</a><a id="3692" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="3697" href="Session.html#3697" class="Bound">r</a> <a id="3699" class="Symbol">_)</a> <a id="3702" class="Symbol">=</a> <a id="3704" href="Transitions.html#3333" class="Function">win-reduces-⊥</a> <a id="3718" href="Session.html#3684" class="Bound">win</a> <a id="3722" href="Session.html#3697" class="Bound">r</a>
</pre></body></html>