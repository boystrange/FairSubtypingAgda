<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Progress</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-- MIT License</a>

<a id="17" class="Comment">-- Copyright (c) 2021 Luca Ciccone and Luca Padovani</a>

<a id="71" class="Comment">-- Permission is hereby granted, free of charge, to any person</a>
<a id="134" class="Comment">-- obtaining a copy of this software and associated documentation</a>
<a id="200" class="Comment">-- files (the &quot;Software&quot;), to deal in the Software without</a>
<a id="259" class="Comment">-- restriction, including without limitation the rights to use,</a>
<a id="323" class="Comment">-- copy, modify, merge, publish, distribute, sublicense, and/or sell</a>
<a id="392" class="Comment">-- copies of the Software, and to permit persons to whom the</a>
<a id="453" class="Comment">-- Software is furnished to do so, subject to the following</a>
<a id="513" class="Comment">-- conditions:</a>

<a id="529" class="Comment">-- The above copyright notice and this permission notice shall be</a>
<a id="595" class="Comment">-- included in all copies or substantial portions of the Software.</a>

<a id="663" class="Comment">-- THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</a>
<a id="730" class="Comment">-- EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES</a>
<a id="797" class="Comment">-- OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</a>
<a id="857" class="Comment">-- NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</a>
<a id="920" class="Comment">-- HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</a>
<a id="984" class="Comment">-- WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</a>
<a id="1048" class="Comment">-- FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</a>
<a id="1113" class="Comment">-- OTHER DEALINGS IN THE SOFTWARE.</a>

<a id="1149" class="Symbol">{-#</a> <a id="1153" class="Keyword">OPTIONS</a> <a id="1161" class="Pragma">--guardedness</a> <a id="1175" class="Symbol">#-}</a>

<a id="1180" class="Keyword">open</a> <a id="1185" class="Keyword">import</a> <a id="1192" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1205" class="Keyword">open</a> <a id="1210" class="Keyword">import</a> <a id="1217" href="Data.Sum.html" class="Module">Data.Sum</a>

<a id="1227" class="Keyword">open</a> <a id="1232" class="Keyword">import</a> <a id="1239" href="Common.html" class="Module">Common</a>

<a id="1247" class="Keyword">module</a> <a id="1254" href="Progress.html" class="Module">Progress</a> <a id="1263" class="Symbol">{</a><a id="1264" href="Progress.html#1264" class="Bound">ℙ</a> <a id="1266" class="Symbol">:</a> <a id="1268" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1271" class="Symbol">}</a> <a id="1273" class="Symbol">(</a><a id="1274" href="Progress.html#1274" class="Bound">message</a> <a id="1282" class="Symbol">:</a> <a id="1284" href="Common.html#1500" class="Record">Message</a> <a id="1292" href="Progress.html#1264" class="Bound">ℙ</a><a id="1293" class="Symbol">)</a>
  <a id="1297" class="Keyword">where</a>

<a id="1304" class="Keyword">open</a> <a id="1309" class="Keyword">import</a> <a id="1316" href="SessionType.html" class="Module">SessionType</a> <a id="1328" href="Progress.html#1274" class="Bound">message</a>
<a id="1336" class="Keyword">open</a> <a id="1341" class="Keyword">import</a> <a id="1348" href="Transitions.html" class="Module">Transitions</a> <a id="1360" href="Progress.html#1274" class="Bound">message</a>
<a id="1368" class="Keyword">open</a> <a id="1373" class="Keyword">import</a> <a id="1380" href="Session.html" class="Module">Session</a> <a id="1388" href="Progress.html#1274" class="Bound">message</a>

<a id="1397" class="Keyword">data</a> <a id="Progress"></a><a id="1402" href="Progress.html#1402" class="Datatype">Progress</a> <a id="1411" class="Symbol">:</a> <a id="1413" href="Session.html#1692" class="Datatype">Session</a> <a id="1421" class="Symbol">-&gt;</a> <a id="1424" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1428" class="Keyword">where</a>
  <a id="Progress.win#def"></a><a id="1436" href="Progress.html#1436" class="InductiveConstructor">win#def</a> <a id="1444" class="Symbol">:</a> <a id="1446" class="Symbol">∀{</a><a id="1448" href="Progress.html#1448" class="Bound">T</a> <a id="1450" href="Progress.html#1450" class="Bound">S</a><a id="1451" class="Symbol">}</a> <a id="1453" class="Symbol">(</a><a id="1454" href="Progress.html#1454" class="Bound">w</a> <a id="1456" class="Symbol">:</a> <a id="1458" href="SessionType.html#3086" class="Datatype">Win</a> <a id="1462" href="Progress.html#1448" class="Bound">T</a><a id="1463" class="Symbol">)</a> <a id="1465" class="Symbol">(</a><a id="1466" href="Progress.html#1466" class="Bound">def</a> <a id="1470" class="Symbol">:</a> <a id="1472" href="SessionType.html#1981" class="Datatype">Defined</a> <a id="1480" href="Progress.html#1450" class="Bound">S</a><a id="1481" class="Symbol">)</a> <a id="1483" class="Symbol">-&gt;</a> <a id="1486" href="Progress.html#1402" class="Datatype">Progress</a> <a id="1495" class="Symbol">(</a><a id="1496" href="Progress.html#1448" class="Bound">T</a> <a id="1498" href="Session.html#1714" class="InductiveConstructor Operator">#</a> <a id="1500" href="Progress.html#1450" class="Bound">S</a><a id="1501" class="Symbol">)</a>
  <a id="Progress.inp#out"></a><a id="1505" href="Progress.html#1505" class="InductiveConstructor">inp#out</a> <a id="1513" class="Symbol">:</a> <a id="1515" class="Symbol">∀{</a><a id="1517" href="Progress.html#1517" class="Bound">f</a> <a id="1519" href="Progress.html#1519" class="Bound">g</a><a id="1520" class="Symbol">}</a> <a id="1522" class="Symbol">(</a><a id="1523" href="Progress.html#1523" class="Bound">W</a> <a id="1525" class="Symbol">:</a> <a id="1527" href="SessionType.html#2629" class="Function">Witness</a> <a id="1535" href="Progress.html#1519" class="Bound">g</a><a id="1536" class="Symbol">)</a> <a id="1538" class="Symbol">-&gt;</a> <a id="1541" href="Progress.html#1402" class="Datatype">Progress</a> <a id="1550" class="Symbol">(</a><a id="1551" href="SessionType.html#1893" class="InductiveConstructor">inp</a> <a id="1555" href="Progress.html#1517" class="Bound">f</a> <a id="1557" href="Session.html#1714" class="InductiveConstructor Operator">#</a> <a id="1559" href="SessionType.html#1935" class="InductiveConstructor">out</a> <a id="1563" href="Progress.html#1519" class="Bound">g</a><a id="1564" class="Symbol">)</a>
  <a id="Progress.out#inp"></a><a id="1568" href="Progress.html#1568" class="InductiveConstructor">out#inp</a> <a id="1576" class="Symbol">:</a> <a id="1578" class="Symbol">∀{</a><a id="1580" href="Progress.html#1580" class="Bound">f</a> <a id="1582" href="Progress.html#1582" class="Bound">g</a><a id="1583" class="Symbol">}</a> <a id="1585" class="Symbol">(</a><a id="1586" href="Progress.html#1586" class="Bound">W</a> <a id="1588" class="Symbol">:</a> <a id="1590" href="SessionType.html#2629" class="Function">Witness</a> <a id="1598" href="Progress.html#1580" class="Bound">f</a><a id="1599" class="Symbol">)</a> <a id="1601" class="Symbol">-&gt;</a> <a id="1604" href="Progress.html#1402" class="Datatype">Progress</a> <a id="1613" class="Symbol">(</a><a id="1614" href="SessionType.html#1935" class="InductiveConstructor">out</a> <a id="1618" href="Progress.html#1580" class="Bound">f</a> <a id="1620" href="Session.html#1714" class="InductiveConstructor Operator">#</a> <a id="1622" href="SessionType.html#1893" class="InductiveConstructor">inp</a> <a id="1626" href="Progress.html#1582" class="Bound">g</a><a id="1627" class="Symbol">)</a>

<a id="progress-sound"></a><a id="1630" href="Progress.html#1630" class="Function">progress-sound</a> <a id="1645" class="Symbol">:</a> <a id="1647" class="Symbol">∀{</a><a id="1649" href="Progress.html#1649" class="Bound">S</a><a id="1650" class="Symbol">}</a> <a id="1652" class="Symbol">-&gt;</a> <a id="1655" href="Progress.html#1402" class="Datatype">Progress</a> <a id="1664" href="Progress.html#1649" class="Bound">S</a> <a id="1666" class="Symbol">-&gt;</a> <a id="1669" href="Session.html#2169" class="Function">ProgressS</a> <a id="1679" href="Progress.html#1649" class="Bound">S</a>
<a id="1681" href="Progress.html#1630" class="Function">progress-sound</a> <a id="1696" class="Symbol">(</a><a id="1697" href="Progress.html#1436" class="InductiveConstructor">win#def</a> <a id="1705" href="Progress.html#1705" class="Bound">e</a> <a id="1707" href="Progress.html#1707" class="Bound">def</a><a id="1710" class="Symbol">)</a> <a id="1712" class="Symbol">=</a> <a id="1714" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1719" class="Symbol">(</a><a id="1720" href="Session.html#2102" class="InductiveConstructor">win#def</a> <a id="1728" href="Progress.html#1705" class="Bound">e</a> <a id="1730" href="Progress.html#1707" class="Bound">def</a><a id="1733" class="Symbol">)</a>
<a id="1735" href="Progress.html#1630" class="Function">progress-sound</a> <a id="1750" class="Symbol">(</a><a id="1751" href="Progress.html#1505" class="InductiveConstructor">inp#out</a> <a id="1759" class="Symbol">(_</a> <a id="1762" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1764" href="Progress.html#1764" class="Bound">!x</a><a id="1766" class="Symbol">))</a> <a id="1769" class="Symbol">=</a> <a id="1771" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1776" class="Symbol">(_</a> <a id="1779" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1781" href="Session.html#1820" class="InductiveConstructor">sync</a> <a id="1786" href="Transitions.html#1642" class="InductiveConstructor">inp</a> <a id="1790" class="Symbol">(</a><a id="1791" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="1795" href="Progress.html#1764" class="Bound">!x</a><a id="1797" class="Symbol">))</a>
<a id="1800" href="Progress.html#1630" class="Function">progress-sound</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Progress.html#1568" class="InductiveConstructor">out#inp</a> <a id="1824" class="Symbol">(_</a> <a id="1827" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1829" href="Progress.html#1829" class="Bound">!x</a><a id="1831" class="Symbol">))</a> <a id="1834" class="Symbol">=</a> <a id="1836" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1841" class="Symbol">(_</a> <a id="1844" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1846" href="Session.html#1820" class="InductiveConstructor">sync</a> <a id="1851" class="Symbol">(</a><a id="1852" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="1856" href="Progress.html#1829" class="Bound">!x</a><a id="1858" class="Symbol">)</a> <a id="1860" href="Transitions.html#1642" class="InductiveConstructor">inp</a><a id="1863" class="Symbol">)</a>

<a id="progress-complete"></a><a id="1866" href="Progress.html#1866" class="Function">progress-complete</a> <a id="1884" class="Symbol">:</a> <a id="1886" class="Symbol">∀{</a><a id="1888" href="Progress.html#1888" class="Bound">S</a><a id="1889" class="Symbol">}</a> <a id="1891" class="Symbol">-&gt;</a> <a id="1894" href="Session.html#2169" class="Function">ProgressS</a> <a id="1904" href="Progress.html#1888" class="Bound">S</a> <a id="1906" class="Symbol">-&gt;</a> <a id="1909" href="Progress.html#1402" class="Datatype">Progress</a> <a id="1918" href="Progress.html#1888" class="Bound">S</a>
<a id="1920" href="Progress.html#1866" class="Function">progress-complete</a> <a id="1938" class="Symbol">(</a><a id="1939" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1944" class="Symbol">(</a><a id="1945" href="Session.html#2102" class="InductiveConstructor">win#def</a> <a id="1953" href="Progress.html#1953" class="Bound">e</a> <a id="1955" href="Progress.html#1955" class="Bound">def</a><a id="1958" class="Symbol">))</a> <a id="1961" class="Symbol">=</a> <a id="1963" href="Progress.html#1436" class="InductiveConstructor">win#def</a> <a id="1971" href="Progress.html#1953" class="Bound">e</a> <a id="1973" href="Progress.html#1955" class="Bound">def</a>
<a id="1977" href="Progress.html#1866" class="Function">progress-complete</a> <a id="1995" class="Symbol">(</a><a id="1996" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="2001" class="Symbol">(_</a> <a id="2004" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2006" href="Session.html#1820" class="InductiveConstructor">sync</a> <a id="2011" href="Transitions.html#1642" class="InductiveConstructor">inp</a> <a id="2015" class="Symbol">(</a><a id="2016" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="2020" href="Progress.html#2020" class="Bound">!x</a><a id="2022" class="Symbol">)))</a> <a id="2026" class="Symbol">=</a> <a id="2028" href="Progress.html#1505" class="InductiveConstructor">inp#out</a> <a id="2036" class="Symbol">(_</a> <a id="2039" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2041" href="Progress.html#2020" class="Bound">!x</a><a id="2043" class="Symbol">)</a>
<a id="2045" href="Progress.html#1866" class="Function">progress-complete</a> <a id="2063" class="Symbol">(</a><a id="2064" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="2069" class="Symbol">(_</a> <a id="2072" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2074" href="Session.html#1820" class="InductiveConstructor">sync</a> <a id="2079" class="Symbol">(</a><a id="2080" href="Transitions.html#1714" class="InductiveConstructor">out</a> <a id="2084" href="Progress.html#2084" class="Bound">!x</a><a id="2086" class="Symbol">)</a> <a id="2088" href="Transitions.html#1642" class="InductiveConstructor">inp</a><a id="2091" class="Symbol">))</a> <a id="2094" class="Symbol">=</a> <a id="2096" href="Progress.html#1568" class="InductiveConstructor">out#inp</a> <a id="2104" class="Symbol">(_</a> <a id="2107" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2109" href="Progress.html#2084" class="Bound">!x</a><a id="2111" class="Symbol">)</a>
</pre></body></html>