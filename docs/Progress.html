<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Progress</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-- MIT License</a>

<a id="17" class="Comment">-- Copyright (c) 2021 Luca Ciccone and Luca Padovani</a>

<a id="71" class="Comment">-- Permission is hereby granted, free of charge, to any person</a>
<a id="134" class="Comment">-- obtaining a copy of this software and associated documentation</a>
<a id="200" class="Comment">-- files (the &quot;Software&quot;), to deal in the Software without</a>
<a id="259" class="Comment">-- restriction, including without limitation the rights to use,</a>
<a id="323" class="Comment">-- copy, modify, merge, publish, distribute, sublicense, and/or sell</a>
<a id="392" class="Comment">-- copies of the Software, and to permit persons to whom the</a>
<a id="453" class="Comment">-- Software is furnished to do so, subject to the following</a>
<a id="513" class="Comment">-- conditions:</a>

<a id="529" class="Comment">-- The above copyright notice and this permission notice shall be</a>
<a id="595" class="Comment">-- included in all copies or substantial portions of the Software.</a>

<a id="663" class="Comment">-- THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</a>
<a id="730" class="Comment">-- EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES</a>
<a id="797" class="Comment">-- OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</a>
<a id="857" class="Comment">-- NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</a>
<a id="920" class="Comment">-- HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</a>
<a id="984" class="Comment">-- WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</a>
<a id="1048" class="Comment">-- FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</a>
<a id="1113" class="Comment">-- OTHER DEALINGS IN THE SOFTWARE.</a>

<a id="1149" class="Keyword">open</a> <a id="1154" class="Keyword">import</a> <a id="1161" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1174" class="Keyword">open</a> <a id="1179" class="Keyword">import</a> <a id="1186" href="Data.Sum.html" class="Module">Data.Sum</a>

<a id="1196" class="Keyword">open</a> <a id="1201" class="Keyword">import</a> <a id="1208" href="Common.html" class="Module">Common</a>

<a id="1216" class="Keyword">module</a> <a id="1223" href="Progress.html" class="Module">Progress</a> <a id="1232" class="Symbol">{</a><a id="1233" href="Progress.html#1233" class="Bound">ℙ</a> <a id="1235" class="Symbol">:</a> <a id="1237" class="PrimitiveType">Set</a><a id="1240" class="Symbol">}</a> <a id="1242" class="Symbol">(</a><a id="1243" href="Progress.html#1243" class="Bound">message</a> <a id="1251" class="Symbol">:</a> <a id="1253" href="Common.html#1500" class="Record">Message</a> <a id="1261" href="Progress.html#1233" class="Bound">ℙ</a><a id="1262" class="Symbol">)</a>
  <a id="1266" class="Keyword">where</a>

<a id="1273" class="Keyword">open</a> <a id="1278" class="Keyword">import</a> <a id="1285" href="SessionType.html" class="Module">SessionType</a> <a id="1297" href="Progress.html#1243" class="Bound">message</a>
<a id="1305" class="Keyword">open</a> <a id="1310" class="Keyword">import</a> <a id="1317" href="Transitions.html" class="Module">Transitions</a> <a id="1329" href="Progress.html#1243" class="Bound">message</a>
<a id="1337" class="Keyword">open</a> <a id="1342" class="Keyword">import</a> <a id="1349" href="Session.html" class="Module">Session</a> <a id="1357" href="Progress.html#1243" class="Bound">message</a>

<a id="1366" class="Keyword">data</a> <a id="Progress"></a><a id="1371" href="Progress.html#1371" class="Datatype">Progress</a> <a id="1380" class="Symbol">:</a> <a id="1382" href="Session.html#1661" class="Datatype">Session</a> <a id="1390" class="Symbol">-&gt;</a> <a id="1393" class="PrimitiveType">Set</a> <a id="1397" class="Keyword">where</a>
  <a id="Progress.win#def"></a><a id="1405" href="Progress.html#1405" class="InductiveConstructor">win#def</a> <a id="1413" class="Symbol">:</a> <a id="1415" class="Symbol">∀{</a><a id="1417" href="Progress.html#1417" class="Bound">T</a> <a id="1419" href="Progress.html#1419" class="Bound">S</a><a id="1420" class="Symbol">}</a> <a id="1422" class="Symbol">(</a><a id="1423" href="Progress.html#1423" class="Bound">w</a> <a id="1425" class="Symbol">:</a> <a id="1427" href="SessionType.html#2979" class="Datatype">Win</a> <a id="1431" href="Progress.html#1417" class="Bound">T</a><a id="1432" class="Symbol">)</a> <a id="1434" class="Symbol">(</a><a id="1435" href="Progress.html#1435" class="Bound">def</a> <a id="1439" class="Symbol">:</a> <a id="1441" href="SessionType.html#1874" class="Datatype">Defined</a> <a id="1449" href="Progress.html#1419" class="Bound">S</a><a id="1450" class="Symbol">)</a> <a id="1452" class="Symbol">-&gt;</a> <a id="1455" href="Progress.html#1371" class="Datatype">Progress</a> <a id="1464" class="Symbol">(</a><a id="1465" href="Progress.html#1417" class="Bound">T</a> <a id="1467" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="1469" href="Progress.html#1419" class="Bound">S</a><a id="1470" class="Symbol">)</a>
  <a id="Progress.inp#out"></a><a id="1474" href="Progress.html#1474" class="InductiveConstructor">inp#out</a> <a id="1482" class="Symbol">:</a> <a id="1484" class="Symbol">∀{</a><a id="1486" href="Progress.html#1486" class="Bound">f</a> <a id="1488" href="Progress.html#1488" class="Bound">g</a><a id="1489" class="Symbol">}</a> <a id="1491" class="Symbol">(</a><a id="1492" href="Progress.html#1492" class="Bound">W</a> <a id="1494" class="Symbol">:</a> <a id="1496" href="SessionType.html#2522" class="Function">Witness</a> <a id="1504" href="Progress.html#1488" class="Bound">g</a><a id="1505" class="Symbol">)</a> <a id="1507" class="Symbol">-&gt;</a> <a id="1510" href="Progress.html#1371" class="Datatype">Progress</a> <a id="1519" class="Symbol">(</a><a id="1520" href="SessionType.html#1786" class="InductiveConstructor">inp</a> <a id="1524" href="Progress.html#1486" class="Bound">f</a> <a id="1526" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="1528" href="SessionType.html#1828" class="InductiveConstructor">out</a> <a id="1532" href="Progress.html#1488" class="Bound">g</a><a id="1533" class="Symbol">)</a>
  <a id="Progress.out#inp"></a><a id="1537" href="Progress.html#1537" class="InductiveConstructor">out#inp</a> <a id="1545" class="Symbol">:</a> <a id="1547" class="Symbol">∀{</a><a id="1549" href="Progress.html#1549" class="Bound">f</a> <a id="1551" href="Progress.html#1551" class="Bound">g</a><a id="1552" class="Symbol">}</a> <a id="1554" class="Symbol">(</a><a id="1555" href="Progress.html#1555" class="Bound">W</a> <a id="1557" class="Symbol">:</a> <a id="1559" href="SessionType.html#2522" class="Function">Witness</a> <a id="1567" href="Progress.html#1549" class="Bound">f</a><a id="1568" class="Symbol">)</a> <a id="1570" class="Symbol">-&gt;</a> <a id="1573" href="Progress.html#1371" class="Datatype">Progress</a> <a id="1582" class="Symbol">(</a><a id="1583" href="SessionType.html#1828" class="InductiveConstructor">out</a> <a id="1587" href="Progress.html#1549" class="Bound">f</a> <a id="1589" href="Session.html#1683" class="InductiveConstructor Operator">#</a> <a id="1591" href="SessionType.html#1786" class="InductiveConstructor">inp</a> <a id="1595" href="Progress.html#1551" class="Bound">g</a><a id="1596" class="Symbol">)</a>

<a id="progress-sound"></a><a id="1599" href="Progress.html#1599" class="Function">progress-sound</a> <a id="1614" class="Symbol">:</a> <a id="1616" class="Symbol">∀{</a><a id="1618" href="Progress.html#1618" class="Bound">S</a><a id="1619" class="Symbol">}</a> <a id="1621" class="Symbol">-&gt;</a> <a id="1624" href="Progress.html#1371" class="Datatype">Progress</a> <a id="1633" href="Progress.html#1618" class="Bound">S</a> <a id="1635" class="Symbol">-&gt;</a> <a id="1638" href="Session.html#2138" class="Function">ProgressS</a> <a id="1648" href="Progress.html#1618" class="Bound">S</a>
<a id="1650" href="Progress.html#1599" class="Function">progress-sound</a> <a id="1665" class="Symbol">(</a><a id="1666" href="Progress.html#1405" class="InductiveConstructor">win#def</a> <a id="1674" href="Progress.html#1674" class="Bound">e</a> <a id="1676" href="Progress.html#1676" class="Bound">def</a><a id="1679" class="Symbol">)</a> <a id="1681" class="Symbol">=</a> <a id="1683" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1688" class="Symbol">(</a><a id="1689" href="Session.html#2071" class="InductiveConstructor">win#def</a> <a id="1697" href="Progress.html#1674" class="Bound">e</a> <a id="1699" href="Progress.html#1676" class="Bound">def</a><a id="1702" class="Symbol">)</a>
<a id="1704" href="Progress.html#1599" class="Function">progress-sound</a> <a id="1719" class="Symbol">(</a><a id="1720" href="Progress.html#1474" class="InductiveConstructor">inp#out</a> <a id="1728" class="Symbol">(_</a> <a id="1731" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1733" href="Progress.html#1733" class="Bound">!x</a><a id="1735" class="Symbol">))</a> <a id="1738" class="Symbol">=</a> <a id="1740" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1745" class="Symbol">(_</a> <a id="1748" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1750" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="1755" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="1759" class="Symbol">(</a><a id="1760" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="1764" href="Progress.html#1733" class="Bound">!x</a><a id="1766" class="Symbol">))</a>
<a id="1769" href="Progress.html#1599" class="Function">progress-sound</a> <a id="1784" class="Symbol">(</a><a id="1785" href="Progress.html#1537" class="InductiveConstructor">out#inp</a> <a id="1793" class="Symbol">(_</a> <a id="1796" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1798" href="Progress.html#1798" class="Bound">!x</a><a id="1800" class="Symbol">))</a> <a id="1803" class="Symbol">=</a> <a id="1805" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1810" class="Symbol">(_</a> <a id="1813" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1815" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="1820" class="Symbol">(</a><a id="1821" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="1825" href="Progress.html#1798" class="Bound">!x</a><a id="1827" class="Symbol">)</a> <a id="1829" href="Transitions.html#1611" class="InductiveConstructor">inp</a><a id="1832" class="Symbol">)</a>

<a id="progress-complete"></a><a id="1835" href="Progress.html#1835" class="Function">progress-complete</a> <a id="1853" class="Symbol">:</a> <a id="1855" class="Symbol">∀{</a><a id="1857" href="Progress.html#1857" class="Bound">S</a><a id="1858" class="Symbol">}</a> <a id="1860" class="Symbol">-&gt;</a> <a id="1863" href="Session.html#2138" class="Function">ProgressS</a> <a id="1873" href="Progress.html#1857" class="Bound">S</a> <a id="1875" class="Symbol">-&gt;</a> <a id="1878" href="Progress.html#1371" class="Datatype">Progress</a> <a id="1887" href="Progress.html#1857" class="Bound">S</a>
<a id="1889" href="Progress.html#1835" class="Function">progress-complete</a> <a id="1907" class="Symbol">(</a><a id="1908" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1913" class="Symbol">(</a><a id="1914" href="Session.html#2071" class="InductiveConstructor">win#def</a> <a id="1922" href="Progress.html#1922" class="Bound">e</a> <a id="1924" href="Progress.html#1924" class="Bound">def</a><a id="1927" class="Symbol">))</a> <a id="1930" class="Symbol">=</a> <a id="1932" href="Progress.html#1405" class="InductiveConstructor">win#def</a> <a id="1940" href="Progress.html#1922" class="Bound">e</a> <a id="1942" href="Progress.html#1924" class="Bound">def</a>
<a id="1946" href="Progress.html#1835" class="Function">progress-complete</a> <a id="1964" class="Symbol">(</a><a id="1965" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1970" class="Symbol">(_</a> <a id="1973" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1975" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="1980" href="Transitions.html#1611" class="InductiveConstructor">inp</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="1989" href="Progress.html#1989" class="Bound">!x</a><a id="1991" class="Symbol">)))</a> <a id="1995" class="Symbol">=</a> <a id="1997" href="Progress.html#1474" class="InductiveConstructor">inp#out</a> <a id="2005" class="Symbol">(_</a> <a id="2008" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2010" href="Progress.html#1989" class="Bound">!x</a><a id="2012" class="Symbol">)</a>
<a id="2014" href="Progress.html#1835" class="Function">progress-complete</a> <a id="2032" class="Symbol">(</a><a id="2033" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="2038" class="Symbol">(_</a> <a id="2041" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2043" href="Session.html#1789" class="InductiveConstructor">sync</a> <a id="2048" class="Symbol">(</a><a id="2049" href="Transitions.html#1683" class="InductiveConstructor">out</a> <a id="2053" href="Progress.html#2053" class="Bound">!x</a><a id="2055" class="Symbol">)</a> <a id="2057" href="Transitions.html#1611" class="InductiveConstructor">inp</a><a id="2060" class="Symbol">))</a> <a id="2063" class="Symbol">=</a> <a id="2065" href="Progress.html#1537" class="InductiveConstructor">out#inp</a> <a id="2073" class="Symbol">(_</a> <a id="2076" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2078" href="Progress.html#2053" class="Bound">!x</a><a id="2080" class="Symbol">)</a>
</pre></body></html>